/*!
  * BsMultiSelect v1.2.0-beta.27 (https://dashboardcode.github.io/BsMultiSelect/)
  * Copyright 2017-2021 Roman Pokrovskij (github user rpokrovskij)
  * Licensed under Apache 2 (https://github.com/DashboardCode/BsMultiSelect/blob/master/LICENSE)
  */
function isBoolean(e){return!0===e||!1===e}function isString(e){return e instanceof String||"string"==typeof e}function extendIfUndefined(e,t){for(let i in t)void 0===e[i]&&(e[i]=t[i])}function shallowClearClone(e,...t){var i={};for(let t in e){let n=e[t];null!=n&&(i[t]=n)}return t&&t.forEach((e=>{for(let t in e){let n=e[t];null!=n?i[t]=n:i.hasOwnProperty(t)&&delete i[t]}})),i}function forEachRecursion(e,t){if(!t)return;!1!==e(t.value)&&forEachRecursion(e,t.prev)}function indexRecursion(e,t){if(!t.prev)return e;indexRecursion(++e,t.prev)}function List(){var e=null,t=0;return{add(i){e?(e.next={value:i,prev:e,next:null},e=e.next):e={value:i,prev:null,next:null},t++;let n=e;return{remove:function(){n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),e==n&&(e=n.prev),t--},index:function(){return indexRecursion(0,n)}}},forEach(t){forEachRecursion(t,e)},getTail:()=>e?e.value:null,getCount:()=>t,isEmpty:()=>0==t,reset(){e=null,t=0}}}function DoublyLinkedList(e,t,i,n){var o=null,l=null,c=0;return{add(i,s){if(l)if(s){s===o&&(o=i);let l=e(s);n(i,s),t(s,i),l?(t(i,l),n(l,i)):t(i,null)}else t(i,l),n(i,null),n(l,i),l=i;else o=l=i,t(i,null),n(i,null);c++},remove(s){let a=i(s),r=e(s);r&&n(r,a),a&&t(a,r),l==s&&(l=r),o==s&&(o=a),c--},getHead:()=>o,getTail:()=>l,getCount:()=>c,isEmpty:()=>0==c,reset(){l=o=null,c=0}}}function ArrayFacade(){var e=[];return{push(t){e.push(t)},add(t,i){e.splice(i,0,t)},get:t=>e[t],getNext:(t,i)=>{let n=e.length,o=t+1;if(t<n){if(!i)return e[o];for(let t=o;t<n;t++){let n=e[t];if(i(n))return n}}},remove(t){var i=e[t];return e.splice(t,1),i},forLoop(t){for(let i=0;i<e.length;i++){t(e[i],i)}},getHead:()=>e[0],getCount:()=>e.length,isEmpty:()=>0==e.length,reset(){e=[]}}}function composeSync(...e){return()=>e.forEach((e=>{e&&e()}))}function defCall(...e){for(let t of e)if(t){if(!(t instanceof Function))return t;{let e=t();if(e)return e}}}function ObservableValue(e){var t=List();return{getValue:()=>e,setValue(i){e=i,t.forEach((e=>e(i)))},attach:e=>t.add(e),detachAll(){t.reset()}}}function ObservableLambda(e){var t=List(),i=e();return{getValue:()=>i,call(){i=e(),t.forEach((e=>e(i)))},attach:e=>t.add(e),detachAll(){t.reset()}}}function ObjectValuesEx(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t}function addStyling(e,t){var i={classes:[],styles:{}};if(t){var{classes:n,styles:o}=t;n.forEach((t=>e.classList.add(t))),i.classes=n.slice();for(let t in o)i.styles[t]=e.style[t],e.style[t]=o[t]}return i}function removeStyling(e,t){if(t){var{classes:i,styles:n}=t;i.forEach((t=>e.classList.remove(t)));for(let t in n)e.style[t]=n[t]}}function toggleStyling(e,t){var i={classes:[],styles:{}},n=!1,o=t instanceof Function;return(l,c)=>{l?!1===n?(i=addStyling(e,o?t():t),n=!0):c&&(removeStyling(e,i),i=addStyling(e,o?t():t)):!0!==n&&!0!==c||(removeStyling(e,i),n=!1)}}function extendClasses(e,t,i,n,o){if(isString(t)){if(""===t)o&&(e.classes=[]);else{let n=t.split(" ");e.classes=i(n)}return!0}return t instanceof Array&&(0==t.length?o&&(e.classes=[]):e.classes=n(t),!0)}function extend(e,t,i,n,o,l){if(!1===extendClasses(e,t,i,n,l)&&t instanceof Object){var{classes:c,styles:s}=t;extendClasses(e,c,i,n,l),s?e.styles=o(s):c||(e.styles=o(t))}}function Styling(e){var t={classes:[],styles:{}};return e&&extend(t,e,(e=>e),(e=>e.slice()),(e=>shallowClearClone(e)),!0),Object.freeze(t)}function createStyling(e,t,...i){var n={classes:[],styles:{}};if(t&&(extend(n,t,(e=>e),(e=>e.slice()),(e=>shallowClearClone(e)),!0),i)){var{classes:o,styles:l}=n,c=e?e=>extend(n,e,(e=>e),(e=>e.slice()),(e=>shallowClearClone(l,e)),!0):e=>extend(n,e,(e=>o.concat(e)),(e=>o.concat(e)),(e=>shallowClearClone(l,e)),!1);i.forEach((e=>c(e)))}return Styling(n)}function createCss(e,t){var i={};for(let n in e){let o=e[n],l=t?t[n]:void 0;i[n]=void 0===l?Styling(o):createStyling(!0,o,l)}if(t)for(let n in t)e[n]||(i[n]=Styling(t[n]));return i}function extendCss(e,t){for(let i in t){let n=t[i],o=e[i];e[i]=void 0===o?Styling(n):createStyling(!1,o,n)}}function PickDomFactoryPlugCss(e){e.pickContent=""}function PickDomFactory(e,t,i){return{create(n){let o=n.wrap,{pickDom:l,pickDomManagerHandlers:c}=n,s=l.pickElement,a=t.createElement("SPAN");s.appendChild(a),l.pickContentElement=a,c.updateData=()=>{a.textContent=i.getText(o.option)},addStyling(a,e.pickContent),n.dispose=composeSync(n.dispose,(()=>{l.pickContentElement=null,c.updateData=null})),c.updateData()}}}function PicksDomFactory(e){return{create(){var{picksElement:t,isDisposablePicksElementFlag:i,css:n,createElementAspect:o}=e,l=o.createElement("LI");addStyling(t,n.picks),addStyling(l,n.pickFilter);let c=toggleStyling(t,n.picks_disabled),s=toggleStyling(t,n.picks_focus),a=!1;return{picksElement:t,isDisposablePicksElementFlag:i,pickFilterElement:l,createPickElement(){var e=o.createElement("LI");return addStyling(e,n.pick),{pickElement:e,attach:i=>t.insertBefore(e,null!=i?i:l),detach:()=>t.removeChild(e)}},disable(e){c(e)},toggleFocusStyling(){s(a)},getIsFocusIn:()=>a,setIsFocusIn(e){a=e},dispose(){i||(c(!1),s(!1),l.parentNode&&l.parentNode.removeChild(l))}}}}}function PicksDomFactoryPlugCss(e){e.picks="form-control",e.pickFilter="",e.picks_disabled="disabled",e.picks_focus="focus",e.pick="badge"}function PicksDomFactoryPlugCssPatch(e){e.picks={listStyleType:"none",display:"flex",flexWrap:"wrap",height:"auto",marginBottom:"0",cursor:"text"},e.picks_disabled={backgroundColor:"#e9ecef"},e.picks_focus={borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)"},e.pick={paddingLeft:"0",paddingRight:".5rem",paddingInlineStart:"0",paddingInlineEnd:"0.5rem"}}function PicksDomFactoryPlugCssPatchBs4(e){PicksDomFactoryPlugCssPatch(e),e.pick.paddingTop="0.35em",e.pick.paddingBottom="0.35em"}function findDirectChildByTagName(e,t){let i=null;for(let n=0;n<e.children.length;n++){let o=e.children[n];if(o.tagName==t){i=o;break}}return i}function closestByTagName(e,t){return closest(e,(e=>e.tagName===t))}function closestByClassName(e,t){return closest(e,(e=>e.classList.contains(t)))}function closestByAttribute(e,t,i){return closest(e,(e=>e.getAttribute(t)===i))}function containsAndSelf(e,t){return e===t||e.contains(t)}function getDataGuardedWithPrefix(e,t,i){var n=e.getAttribute("data-"+t+"-"+i);if(n)return n;var o=e.getAttribute("data-"+i);return o||null}function closest(e,t){return e&&e instanceof Element?t(e)?e:closest(e.parentNode,t):null}function siblingsAsArray(e){var t=[];if(e.parentNode){var i=e.parentNode.children,n=e.parentNode.children.length;if(i.length>1)for(var o=0;o<n;++o){var l=i[o];l!=e&&t.push(l)}}return t}function getIsRtl(e){var t=!1;return closestByAttribute(e,"dir","rtl")&&(t=!0),t}function EventBinder(){var e=[];return{bind(t,i,n){t.addEventListener(i,n),e.push({element:t,eventName:i,handler:n})},unbind(){e.forEach((e=>{let{element:t,eventName:i,handler:n}=e;t.removeEventListener(i,n)}))}}}function EventTumbler(e,t,i){return{on(){e.addEventListener(t,i)},off(){e.removeEventListener(t,i)}}}function AttributeBackup(){var e=[];return{set(t,i,n){var o=t.getAttribute(i);e.push({element:t,currentAtribute:o,attribute:n}),t.setAttribute(i,n)},restore(){e.forEach((e=>{let{element:t,attributeName:i,attribute:n}=e;i?t.setAttribute(i,n):t.removeAttribute(i)}))}}}function EventLoopProlongableFlag(e){var t=!1,i=null;return{get:()=>t,set(n){t&&i&&e.clearTimeout(i),t=!0,i=e.setTimeout((()=>{t=!1,i=null}),n||0)}}}function ResetableFlag(){var e=!1;return{get:()=>e,set(){e=!0},reset(){e=!1}}}function buildDom(e,t,i,n){i.createElementFromHtml(e,'<div><input formnovalidate type="checkbox"><label></label></div>');let o=e.querySelector("DIV"),l=o.querySelector("INPUT"),c=o.querySelector("LABEL");t.choiceContentElement=o,t.choiceCheckBoxElement=l,t.choiceLabelElement=c,addStyling(o,n.choiceContent),addStyling(l,n.choiceCheckBox),addStyling(c,n.choiceLabel)}function buidDisabled(e,t,i,n){let o=toggleStyling(e.choiceElement,i.choice_disabled),l=toggleStyling(e.choiceCheckBoxElement,i.choiceCheckBox_disabled),c=toggleStyling(e.choiceLabelElement,i.choiceLabel_disabled),s=toggleStyling(e.choiceElement,{classes:[],styles:{cursor:"default"}});t.updateDisabled=function(){o(n.isOptionDisabled),l(n.isOptionDisabled),c(n.isOptionDisabled);let t=n.isOptionDisabled&&!n.isOptionSelected;e.choiceCheckBoxElement.disabled=t,s(t)}}function ChoiceDomFactory(e,t,i){return{create(n){let o=n.wrap,{choiceDom:l,choiceDomManagerHandlers:c}=n,s=n.choiceDom.choiceElement;buildDom(s,l,t,e);let a=toggleStyling(s,(()=>!0===o.isOptionDisabled&&e.choice_disabled_hover&&!1===o.isOptionSelected?e.choice_disabled_hover:e.choice_hover));c.updateHoverIn=()=>a(n.isHoverIn);let r=toggleStyling(s,e.choice_selected);c.updateSelected=function(){r(o.isOptionSelected),l.choiceCheckBoxElement.checked=o.isOptionSelected,(o.isOptionDisabled||n.isHoverIn)&&a(n.isHoverIn,!0)},buidDisabled(l,c,e,o),c.updateData=()=>{l.choiceLabelElement.textContent=i.getText(o.option)},c.updateData();let u=EventBinder();u.bind(s,"click",(e=>n.choiсeClick(e))),composeSync(n.dispose,(()=>{u.unbind(),c.updateData=null,c.updateHoverIn=null,c.updateSelected=null,c.updateDisabled=null,l.choiceContentElement=null,l.choiceCheckBoxElement=null,l.choiceLabelElement=null}))}}}function ChoiceDomFactoryPlugCss(e){e.choiceCheckBox_disabled="disabled",e.choiceLabel_disabled="",e.choice_disabled_hover="",e.choice_hover="hover"}function ChoiceDomFactoryPlugCssBs4(e){ChoiceDomFactoryPlugCss(e),e.choiceCheckBox="custom-control-input",e.choiceContent="custom-control custom-checkbox d-flex",e.choiceLabel="custom-control-label justify-content-start",e.choice_selected="",e.choice_disabled=""}function ChoiceDomFactoryPlugCssPatch(e){e.choiceCheckBox={color:"inherit",cursor:"inherit"},e.choiceContent={justifyContent:"flex-start",cursor:"inherit"},e.choiceLabel={color:"inherit",cursor:"inherit"},e.choiceLabel_disabled={opacity:".65"},e.choice_disabled_hover="bg-light",e.choice_hover="bg-light text-primary"}function ChoicesDomFactory(e){return{create(){let{css:t,createElementAspect:i}=e;var n=i.createElement("DIV"),o=i.createElement("UL");return n.appendChild(o),n.style.display="none",addStyling(n,t.choices),addStyling(o,t.choicesList),{choicesElement:n,choicesListElement:o,createChoiceElement(){var e=i.createElement("LI");return addStyling(e,t.choice),{choiceElement:e,setVisible:t=>e.style.display=t?"block":"none",attach:t=>o.insertBefore(e,t),detach:()=>o.removeChild(e)}}}}}}function ChoicesDomFactoryPlugCss(e){e.choices="dropdown-menu",e.choicesList="",e.choice=""}function ChoicesDomFactoryPlugCssPatch(e){e.choicesList={listStyleType:"none",paddingLeft:"0",paddingRight:"0",marginBottom:"0"},e.choice={classes:"px-md-2 px-1",styles:{cursor:"pointer"}}}function FilterDomFactory(e){return{create(){let{isDisposablePicksElementFlag:t,css:i,createElementAspect:n}=e;var o=n.createElement("INPUT");addStyling(o,i.filterInput),o.setAttribute("type","search"),o.setAttribute("autocomplete","off");var l=EventBinder();return{filterInputElement:o,isEmpty:()=>!o.value,setEmpty(){o.value=""},getValue:()=>o.value,setFocus(){o.focus()},setWidth(e){o.style.width=1.3*e.length+2+"ch"},setFocusIfNotTarget(e){e!=o&&o.focus()},onInput(e){l.bind(o,"input",e)},onFocusIn(e){l.bind(o,"focusin",e)},onFocusOut(e){l.bind(o,"focusout",e)},onKeyDown(e){l.bind(o,"keydown",e)},onKeyUp(e){l.bind(o,"keyup",e)},dispose(){l.unbind(),t||o.parentNode&&o.parentNode.removeChild(o)}}}}}function FilterDomFactoryPlugCss(e){e.filterInput=""}function FilterDomFactoryPlugCssPatch(e){e.filterInput={border:"0px",height:"auto",boxShadow:"none",padding:"0",margin:"0",outline:"none",backgroundColor:"transparent",backgroundImage:"none"}}function createDefaultCssBs4(){var e={};return PickDomFactoryPlugCss(e),PicksDomFactoryPlugCss(e),ChoiceDomFactoryPlugCssBs4(e),ChoicesDomFactoryPlugCss(e),FilterDomFactoryPlugCss(e),e}function BsAppearancePlugin(){return{plug:plug$p}}function plug$p(e){let t={},i={};return n=>(n.getSizeComponentAspect=t,n.getValidityComponentAspect=i,{preLayout:()=>{var{getLabelAspect:t,staticDom:i}=n,{selectElement:o}=i,{getDefaultLabel:l}=e;let c=t.getLabel;t.getLabel=()=>{var e=c();if(e)return e;if(o){return l(o)}}},layout:()=>{let{validationApiAspect:o,picksDom:l,staticDom:c,updateAppearanceAspect:s,floatingLabelAspect:a}=n,{getValidity:r,getSize:u,useCssPatch:p,css:d,composeGetSize:g}=e,{selectElement:h,initialElement:m}=c,f=!1;var y;if(a&&(f=closestByClassName(m,"form-floating"),a.isFloatingLabel=()=>f),h?(r||(r=composeGetValidity(h)),u||(u=g(h))):(r||(r=()=>null),u||(u=()=>null)),t.getSize=u,i.getValidity=r,p){let{picks_lg:e,picks_sm:t,picks_def:i,picks_floating_def:n}=d;f&&(e=t=i=n),y=()=>updateSizeJsForAdapter(l.picksElement,e,t,i,u)}else y=()=>updateSizeForAdapter(l.picksElement,u);if(p){var C=l.toggleFocusStyling;l.toggleFocusStyling=()=>{var e=P.getValue(),t=l.getIsFocusIn();C(t),t&&(!1===e?(l.setIsFocusIn(t),addStyling(l.picksElement,d.picks_focus_invalid)):!0===e&&(l.setIsFocusIn(t),addStyling(l.picksElement,d.picks_focus_valid)))}}var b=ObservableLambda((()=>!!closestByClassName(m,"was-validated"))),v=ObservableLambda((()=>r())),P=ObservableLambda((()=>b.getValue()?o.getValue():v.getValue()));return P.attach((e=>{var{validMessages:t,invalidMessages:i}=getMessagesElements(c.containerElement);updateValidity(l.picksElement,t,i,e),l.toggleFocusStyling()})),b.attach((()=>P.call())),o&&o.attach((()=>P.call())),v.attach((()=>P.call())),s.updateAppearance=composeSync(s.updateAppearance,y,P.call,v.call),{buildApi(e){e.updateSize=y,e.updateValidity=()=>v.call(),e.updateWasValidated=()=>b.call()},dispose(){b.detachAll(),P.detachAll(),v.detachAll()}}}})}function updateValidity(e,t,i,n){!1===n?(e.classList.add("is-invalid"),e.classList.remove("is-valid"),i.map((e=>e.style.display="block")),t.map((e=>e.style.display="none"))):!0===n?(e.classList.remove("is-invalid"),e.classList.add("is-valid"),i.map((e=>e.style.display="none")),t.map((e=>e.style.display="block"))):(e.classList.remove("is-invalid"),e.classList.remove("is-valid"),i.map((e=>e.style.display="")),t.map((e=>e.style.display="")))}function updateSizeClasses(e,t){"lg"==t?(e.classList.add("form-control-lg"),e.classList.remove("form-control-sm")):"sm"==t?(e.classList.remove("form-control-lg"),e.classList.add("form-control-sm")):(e.classList.remove("form-control-lg"),e.classList.remove("form-control-sm"))}function updateSizeJsPicks(e,t,i,n,o){addStyling(e,"lg"==o?t:"sm"==o?i:n)}function updateSizeJs(e,t,i,n,o){updateSizeClasses(e,o),updateSizeJsPicks(e,t,i,n,o)}function updateSizeForAdapter(e,t){updateSizeClasses(e,t())}function updateSizeJsForAdapter(e,t,i,n,o){updateSizeJs(e,t,i,n,o())}function getMessagesElements(e){var t=siblingsAsArray(e),i=t.filter((e=>e.classList.contains("invalid-feedback")||e.classList.contains("invalid-tooltip")));return{validMessages:t.filter((e=>e.classList.contains("valid-feedback")||e.classList.contains("valid-tooltip"))),invalidMessages:i}}function composeGetValidity(e){return()=>!e.classList.contains("is-invalid")&&(!!e.classList.contains("is-valid")||null)}function BsAppearanceBs4Plugin(e){return e.composeGetSize=composeGetSize,e.getDefaultLabel=getDefaultLabel,BsAppearancePlugin()}function composeGetSize(e){let t=closestByClassName(e,"input-group"),i=null;return i=t?function(){var e=null;return t.classList.contains("input-group-lg")?e="lg":t.classList.contains("input-group-sm")&&(e="sm"),e}:function(){var t=null;return e.classList.contains("custom-select-lg")||e.classList.contains("form-control-lg")?t="lg":(e.classList.contains("custom-select-sm")||e.classList.contains("form-control-sm"))&&(t="sm"),t},i}function getDefaultLabel(e){let t=null,i=closestByClassName(e,"form-group");return i&&(t=i.querySelector(`label[for="${e.id}"]`)),t}function BsAppearanceBs4CssPatchPlugin(e){let t=e.cssPatch;t.picks_def={minHeight:"calc(2.25rem + 2px)"},t.picks_lg={minHeight:"calc(2.875rem + 2px)"},t.picks_sm={minHeight:"calc(1.8125rem + 2px)"},t.picks_focus_valid={borderColor:"",boxShadow:"0 0 0 0.2rem rgba(40, 167, 69, 0.25)"},t.picks_focus_invalid={borderColor:"",boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)"}}function LabelForAttributePlugin(e){return e.label=null,{plug:plug$o}}function plug$o(e){var t={getLabel:()=>defCall(e.label)},i={createFilterInputElementId:()=>defCall(e.filterInputElementId)};return n=>(n.getLabelAspect=t,n.createFilterInputElementIdAspect=i,{layout:()=>{var{filterDom:o,loadAspect:l,disposeAspect:c,staticDom:s}=n;l.load=composeSync(l.load,(()=>{let{filterInputElement:n}=o,l=t.getLabel();if(l){let t=l.getAttribute("for");var a=i.createFilterInputElementId();if(!a){let{containerClass:t}=e,{containerElement:i}=s;a=`${t}-generated-filter-${i.id}`}n.setAttribute("id",a),l.setAttribute("for",a),t&&(c.dispose=composeSync(c.dispose,(()=>l.setAttribute("for",t))))}}))}})}function RtlPlugin(){return{plug:plug$n}}function plug$n(e){return t=>({layout:()=>{let{popperRtlAspect:i,staticDom:n}=t,{isRtl:o}=e,l=!1;isBoolean(o)?l=!0:o=getIsRtl(n.initialElement);var c=AttributeBackup();if(l)c.set(n.containerElement,"dir","rtl");else if(n.selectElement){var s=n.selectElement.getAttribute("dir");s&&c.set(n.containerElement,"dir",s)}return i&&(i.getIsRtl=()=>o),{dispose(){c.restore()}}}})}function FormResetPlugin(){return{plug:plug$m}}function plug$m(){return e=>({layout:()=>{var{staticDom:t,updateDataAspect:i,environment:n}=e,o=EventBinder();if(t.selectElement){var l=closestByTagName(t.selectElement,"FORM");l&&o.bind(l,"reset",(()=>n.window.setTimeout((()=>i.updateData()))))}return{dispose(){o.unbind()}}}})}const defValueMissingMessage="Please select an item in the list";function ValidationApiPlugin(e){return preset$4(e),{plug:plug$l}}function preset$4(e){e.getValueRequired=()=>!1,e.valueMissingMessage=""}function plug$l(e){let{required:t,getValueRequired:i,getIsValueMissing:n,valueMissingMessage:o}=e;var l=GetValueRequiredAspect(t,i);return e=>(e.getValueRequiredAspect=l,{plugStaticDom:()=>{var{dataWrap:t,staticDom:i}=e,c=defCall(o,(()=>getDataGuardedWithPrefix(i.initialElement,"bsmultiselect","value-missing-message")),defValueMissingMessage);return n||(n=()=>{let e=0,i=t.getOptions();for(var n=0;n<i.length;n++)i[n].selected&&e++;return 0===e}),{preLayout(){var t=ObservableLambda((()=>l.getValueRequired()&&n())),i=ObservableValue(!t.getValue());return e.validationApiAspect=ValidationApiAspect(i),{layout:()=>{var{onChangeAspect:n,updateDataAspect:o}=e;return n.onChange=composeSync(t.call,n.onChange),o.updateData=composeSync(t.call,o.updateData),{buildApi(n){var{staticDom:o,filterDom:l}=e;n.validationApi=ValidityApi(l.filterInputElement,t,c,(e=>i.setValue(e)),o.trigger)}}},dispose(){t.detachAll(),i.detachAll()}}}}}})}function GetValueRequiredAspect(e,t){return{getValueRequired(){let i=!1;return isBoolean(e)||t&&(i=t()),i}}}function ValidationApiAspect(e){return{getValue:()=>e.getValue(),attach(t){e.attach(t)}}}function ValidityApi(e,t,i,n,o){var l="",c="",s=null;function a(t,o){s=Object.freeze({valueMissing:t,customError:o,valid:!(t||o)}),c=o?l:t?i:"",e.setCustomValidity(c),n(s.valid)}a(t.getValue(),!1),t.attach((e=>{a(e,s.customError)}));var r=()=>(s.valid||o("dashboardcode.multiselect:invalid"),s.valid);return{validationMessage:c,willValidate:!0,validity:s,setCustomValidity(e){l=e,a(s.valueMissing,!!l)},checkValidity:r,reportValidity:()=>(e.reportValidity(),r())}}function HiddenOptionPlugin(){return{plug:plug$k}}function plug$k(e){return t=>({layout:()=>{let{createWrapAspect:i,isChoiceSelectableAspect:n,wrapsCollection:o,produceChoiceAspect:l,buildAndAttachChoiceAspect:c,countableChoicesListInsertAspect:s,countableChoicesList:a}=t;s.countableChoicesListInsert=(e,t)=>{if(!e.isOptionHidden){let i=o.getNext(t,(e=>!e.isOptionHidden));a.add(e,i)}};let r=c.buildAndAttachChoice;c.buildAndAttachChoice=(e,t)=>{e.isOptionHidden?buildHiddenChoice(e):r(e,t)};var u=n.isSelectable;n.isSelectable=e=>u(e)&&!e.isOptionHidden;let{getIsOptionHidden:p,options:d}=e;d?p||(p=e=>void 0!==e.hidden&&e.hidden):p||(p=e=>e.hidden);var g=i.createWrap;return i.createWrap=e=>{let t=g(e);return t.isOptionHidden=p(e),t},{buildApi(e){let t=e=>o.getNext(e,(e=>!e.isOptionHidden));e.updateOptionsHidden=()=>o.forLoop(((e,i)=>updateChoiceHidden(e,i,t,a,p,l))),e.updateOptionHidden=e=>updateChoiceHidden(o.get(e),e,t,a,p,l)}}}})}function buildHiddenChoice(e){e.updateSelected=()=>{},e.choice.choicesDom={},e.choice.choiceDomManagerHandlers={},e.choice.choiceDomManagerHandlers.setVisible=null,e.choice.setHoverIn=null,e.choice.dispose=()=>{e.choice.dispose=null},e.dispose=()=>{e.choice.dispose(),e.dispose=null}}function updateChoiceHidden(e,t,i,n,o,l){let c=o(e.option);if(c!=e.isOptionHidden)if(e.isOptionHidden=c,e.isOptionHidden)n.remove(e),e.choice.choiceDomManagerHandlers.detach(),buildHiddenChoice(e);else{let o=i(t);n.add(e,o),l.produceChoice(e),e.choice.choiceDomManagerHandlers.attach(null==o?void 0:o.choice.choiceDom.choiceElement)}}function CssPatchPlugin(e){return e.useCssPatch=!0,{merge(t,i){let n=null==i?void 0:i.cssPatch;if(isBoolean(n))throw new Error("BsMultiSelect: 'cssPatch' was used instead of 'useCssPatch'");t.cssPatch=createCss(e.cssPatch,n)},plug:plug$j}}function plug$j(e){e.useCssPatch&&(extendCss(e.css,e.cssPatch),e.cssPatch=void 0)}function CssPatchBs4Plugin(e){var t={};return PicksDomFactoryPlugCssPatchBs4(t),ChoiceDomFactoryPlugCssPatch(t),ChoicesDomFactoryPlugCssPatch(t),FilterDomFactoryPlugCssPatch(t),e.cssPatch=t,CssPatchPlugin(e)}function JQueryMethodsPlugin(){return{plug:plug$i}}function plug$i(){return e=>({layout:()=>{let{staticDom:t,choicesDom:i,filterDom:n,picksList:o,picksDom:l}=e;return{buildApi(e){e.getContainer=()=>t.containerElement,e.getChoices=()=>i.choicesElement,e.getChoicesList=()=>i.choicesListElement,e.getFilterInput=()=>n.filterInputElement,e.getPicks=()=>l.picksElement,e.picksCount=()=>o.getCount()}}}})}function OptionsApiPlugin(){return{plug:plug$h}}function plug$h(){return e=>({buildApi(t){let{buildAndAttachChoiceAspect:i,wraps:n,wrapsCollection:o,createWrapAspect:l,createChoiceBaseAspect:c,dataWrap:s,resetLayoutAspect:a}=e;t.updateOptionAdded=e=>{let t=s.getOptions()[e],a=l.createWrap(t);a.choice=c.createChoiceBase(t),n.insert(e,a);i.buildAndAttachChoice(a,(()=>{var t;return null==(t=o.getNext(e,(e=>e.choice.choiceDom.choiceElement)))?void 0:t.choice.choiceDom.choiceElement}))},t.updateOptionRemoved=e=>{a.resetLayout();var t=n.remove(e);null==t.choice.choiceDomManagerHandlers.detach||t.choice.choiceDomManagerHandlers.detach(),null==t.dispose||t.dispose()}}})}function FormRestoreOnBackwardPlugin(){return{plug:plug$g}}function plug$g(){return e=>({layout:()=>{let{staticDom:t,environment:i,loadAspect:n,updateOptionsSelectedAspect:o}=e,l=i.window;t.selectElement&&o&&(n.load=composeSync(n.load,(function(){"complete"!=l.document.readyState&&l.setTimeout((function(){o.updateOptionsSelected()}))})))}})}function SelectElementPlugin(){return{plug:plug$f}}function plug$f(e){return t=>({data:(e,t,i,n)=>{let o=null;if(t.containerElement=null,"SELECT"==e.tagName)o=e,n&&(t.containerElement=closestByClassName(o,n));else if("DIV"==e.tagName){if(o=findDirectChildByTagName(e,"SELECT"),!o)return origCreateStaticDom(e,n);n&&(t.containerElement=closestByClassName(e,n))}o&&(t.selectElement=o,i.getOptions=()=>o.options)},dom:()=>{let{staticDomFactory:i,onChangeAspect:n,dataWrap:o,disposeAspect:l,staticDom:c,showErrorAspect:s,getValueRequiredAspect:a,createFilterInputElementIdAspect:r,optGroupAspect:u,disabledComponentAspect:p}=t,{createElementAspect:d,initialElement:g}=c,h=e.containerClass,m=i.createStaticDom;i.createStaticDom=()=>{let e=null,t=null;if("SELECT"==g.tagName)e=g,h&&(t=closestByClassName(e,h));else if("DIV"==g.tagName){if(e=findDirectChildByTagName(g,"SELECT"),!e)return m(g,h);h&&(t=closestByClassName(g,h))}let i=null;t&&(i=findDirectChildByTagName(t,"UL"));let f=!1;if(t||(t=d.createElement("DIV"),t.classList.add(h),f=!0),e){s.showError=t=>{let i=d.createElement("SPAN");i.style.backgroundColor="red",i.style.color="white",i.style.padding="0.2rem 0.5rem",i.textContent="BsMultiSelect "+t.toString(),e.parentNode.insertBefore(i,e.nextSibling)};var y=e.style.display;e.style.display="none";var C=e.required;if(a&&(a.getValueRequired=function(){return C}),!0===e.required&&(e.required=!1),p){var b=closestByTagName(e,"FIELDSET"),v=p.getDisabled;p.getDisabled=b?()=>{var t=v();return null===t&&(t=e.disabled||b.disabled),t}:()=>{var t=v();return null===t&&(t=e.disabled),t}}if(n.onChange=composeSync((()=>c.trigger("change")),n.onChange),o.getOptions=()=>e.options,u&&(u.getOptionOptGroup=e=>e.parentNode,u.getOptGroupText=e=>e.label,u.getOptGroupId=e=>e.id),e&&r){var P=r.createFilterInputElementId;r.createFilterInputElementId=()=>{let t=P();return t||(t=`${h}-generated-input-${(e.id?e.id:e.name).toLowerCase()}-id`),t}}l.dispose=composeSync(l.dispose,(()=>{e.required=C,e.style.display=y}))}let A=!1;return i||(i=d.createElement("UL"),A=!0),c.containerElement=t,c.isDisposablePicksElementFlag=A,c.picksElement=i,c.selectElement=e,{staticManager:{appendToContainer(){let{choicesDom:i,filterDom:n,picksDom:o,isDisposablePicksElementFlag:l}=c;o.pickFilterElement.appendChild(n.filterInputElement),o.picksElement.appendChild(o.pickFilterElement),f?(e.parentNode.insertBefore(t,e.nextSibling),t.appendChild(i.choicesElement)):e.parentNode.insertBefore(i.choicesElement,e.nextSibling),l&&t.appendChild(o.picksElement)},dispose(){let{choicesDom:i,filterDom:n,picksDom:o,isDisposablePicksElementFlag:l}=c;i.choicesElement.parentNode.removeChild(i.choicesElement),f&&e.parentNode.removeChild(t),l&&t.removeChild(o.picksElement),o.dispose(),n.dispose()}}}}},layout:()=>{var{loadAspect:e,environment:i}=t,n=i.window.document,o=e.loop;e.loop=function(){if("loading"!=n.readyState)o();else{n.addEventListener("DOMContentLoaded",(function e(){o(),n.removeEventListener("DOMContentLoaded",e)}))}}}})}function SelectedOptionPlugin(){return{plug:plug$e}}function plug$e(e){let t=IsChoiceSelectableAspect();return i=>{i.isChoiceSelectableAspect=t;let{getSelected:n,setSelected:o,options:l}=e;l?(o||(o=(e,t)=>{e.selected=t}),n||(n=e=>e.selected)):(n||(n=e=>e.selected),o||(o=(e,t)=>{e.selected=t}));var c={getSelected:n},s={setSelected:o};return i.getSelectedAspect=c,i.setSelectedAspect=s,{plugStaticDom:()=>{let{wrapsCollection:e}=i;i.updateOptionsSelectedAspect=UpdateOptionsSelectedAspect(e,c)},layout:()=>{let{wrapsCollection:e,updateOptionsSelectedAspect:n,createWrapAspect:o,produceChoiceAspect:l,resetLayoutAspect:a,picksList:r,producePickAspect:u,onChangeAspect:p,filterPredicateAspect:d}=i,g=d.filterPredicate;function h(e,t){return()=>{e.isOptionSelected=t,e.updateSelected()}}function m(e,t,i){let n=!1;return!1!==s.setSelected(e,i)&&(t(),n=!0),n}d.filterPredicate=(e,t)=>!e.isOptionSelected&&g(e,t),ExtendProduceChoiceAspectProduceChoice$1(l,p,m,h,u,r);let f=o.createWrap;return o.createWrap=e=>{let t=f(e);return t.isOptionSelected=c.getSelected(e),t.updateSelected=null,t},ExtendProducePickAspect$1(u,m,h),{buildApi(i){i.selectAll=()=>{a.resetLayout(),e.forLoop((e=>{t.isSelectable(e)&&!e.isOptionSelected&&m(e.option,h(e,!0),!0)}))},i.deselectAll=()=>{a.resetLayout(),r.forEach((e=>e.setSelectedFalse()))},i.setOptionSelected=(t,i)=>{let n=e.get(t);return m(n.option,h(n,i),i)},i.updateOptionsSelected=()=>n.updateOptionsSelected(),i.updateOptionSelected=t=>updateChoiceSelected(e.get(t),c)}}}}}}function ExtendProduceChoiceAspectProduceChoice$1(e,t,i,n,o,l){let c=e.produceChoice;e.produceChoice=e=>{let s=c(e);return e.choice.choiceDomManagerHandlers.updateSelected(),e.choice.tryToggleChoice=()=>i(e.option,n(e,!e.isOptionSelected),!e.isOptionSelected),e.choice.fullMatch=()=>i(e.option,n(e,!0),!0),e.choice.choiсeClick=t=>{e.choice.tryToggleChoice()},e.updateSelected=()=>{e.choice.choiceDomManagerHandlers.updateSelected(),t.onChange()},e.choice.addPickForChoice=()=>{var t={producePick:(null,()=>{let i=o.producePick(e),{remove:n}=l.add(i);return i.dispose=composeSync(n,i.dispose),t.removeAndDispose=()=>i.dispose(),i}),removeAndDispose:null};if(e.updateSelected=composeSync((()=>{if(e.isOptionSelected){let i=t.producePick();e.pick=i,i.dispose=composeSync(i.dispose,(()=>{e.pick=null}))}else t.removeAndDispose(),t.removeAndDispose=null}),e.updateSelected),e.isOptionSelected){let i=t.producePick();e.pick=i,i.dispose=composeSync(i.dispose,(()=>{e.pick=null}))}return t},e.dispose=composeSync((()=>{e.updateSelected=null,e.choice.choiсeClick=null,e.choice.tryToggleChoice=null,e.choice.fullMatch=null,e.choice.addPickForChoice=null}),e.dispose),s}}function ExtendProducePickAspect$1(e,t,i){let n=e.producePick;e.producePick=function(e,o){let l=n(e,o);return l.setSelectedFalse=()=>t(e.option,i(e,!1),!1),l.dispose=composeSync(l.dispose,(()=>{l.setSelectedFalse=null})),l}}function UpdateOptionsSelectedAspect(e,t){return{updateOptionsSelected(){e.forLoop((e=>updateChoiceSelected(e,t)))}}}function updateChoiceSelected(e,t){let i=t.getSelected(e.option);i!=e.isOptionSelected&&(e.isOptionSelected=i,null==e.updateSelected||e.updateSelected())}function IsChoiceSelectableAspect(){return{isSelectable:e=>!0}}function DisabledOptionCssPatchPlugin(e){e.cssPatch.pickContent_disabled={opacity:".65"}}function DisabledOptionPlugin(e){return e.css.pickContent_disabled="disabled",{plug:plug$d}}function plug$d(e){return t=>({layout:()=>{let{isChoiceSelectableAspect:i,createWrapAspect:n,produceChoiceAspect:o,filterPredicateAspect:l,wrapsCollection:c,producePickAspect:s,pickDomFactory:a}=t,{getIsOptionDisabled:r,options:u,css:p}=e;u?r||(r=e=>void 0!==e.disabled&&e.disabled):r||(r=e=>e.disabled);let d=n.createWrap;n.createWrap=e=>{let t=d(e);return t.isOptionDisabled=r(e),t.updateDisabled=null,t};let g=i.isSelectable;i.isSelectable=e=>g(e)&&!e.isOptionDisabled;let h=l.filterPredicate;return l.filterPredicate=(e,t)=>!e.isOptionDisabled&&h(e,t),ExtendProduceChoiceAspectProduceChoice(o),ExtendProducePickAspectProducePick(s),ExtendPickDomFactoryCreate(a,p),{buildApi(e){e.updateOptionsDisabled=()=>c.forLoop((e=>updateChoiceDisabled(e,r))),e.updateOptionDisabled=e=>updateChoiceDisabled(c.get(e),r)}}}})}function ExtendProduceChoiceAspectProduceChoice(e){let t=e.produceChoice;e.produceChoice=e=>{let i=t(e);e.choice.choiceDomManagerHandlers.updateDisabled(),e.updateDisabled=e.choice.choiceDomManagerHandlers.updateDisabled,e.choice.dispose=composeSync((()=>{e.updateDisabled=null}),e.choice.dispose);let n=e.choice.tryToggleChoice;return e.choice.tryToggleChoice=()=>{let t=!1;return void 0!==e.isOptionSelected?!e.isOptionSelected&&e.isOptionDisabled||(t=n(e)):e.isOptionDisabled||(t=n(e)),t},i}}function ExtendProducePickAspectProducePick(e){let t=e.producePick;e.producePick=e=>{let i=t(e),n=e.pick,o=e.updateDisabled;return e.updateDisabled=composeSync(o,(()=>n.pickDomManagerHandlers.updateDisabled())),n.dispose=composeSync(n.dispose,(()=>{e.updateDisabled=o,e.updateDisabled()})),i}}function ExtendPickDomFactoryCreate(e,t){let i=e.create;e.create=e=>{i(e);let{pickDom:n,pickDomManagerHandlers:o}=e,l=toggleStyling(n.pickContentElement,t.pickContent_disabled);o.updateDisabled=()=>{l(e.wrap.isOptionDisabled)},o.updateDisabled()}}function updateChoiceDisabled(e,t){let i=t(e.option);i!=e.isOptionDisabled&&(e.isOptionDisabled=i,null==e.updateDisabled||e.updateDisabled())}function PicksApiPlugin(){return{plug:plug$c}}function plug$c(){return e=>({buildApi(t){let{picksList:i,createWrapAspect:n}=e;t.forEachPeak=e=>i.forEach((t=>e(t.option))),t.getTailPeak=()=>{var e;return null==(e=i.getTail())?void 0:e.option},t.countPeaks=()=>i.getCount(),t.isEmptyPeaks=()=>i.isEmpty(),t.addPick=e=>{let t=n.createWrap(e);t.updateDisabled=()=>{},t.updateHidden=()=>{},t.choice.addPickForChoice()}}})}function PicksPlugin(){return{plug:plug$b}}function plug$b(e){return t=>({plugStaticDom:()=>{let{picksList:i}=t,{picks:n}=e;if(n){let{add:e,reset:t}=i;i.add=t=>{let{remove:i,index:o}=e(t);return n.push(t),{remove:composeSync(i,(()=>{n.splice(o(),1)})),index:o}},i.reset=()=>{t(),n.length=0}}},layout:()=>{}})}function CreatePopperPlugin(){return{plug:plug$a}}function plug$a(){var e=PopperRtlAspect();return t=>{t.popperRtlAspect=e;let{environment:i}=t,{createPopper:n,Popper:o,globalPopper:l}=i,c=null,s=null;if(o)a=o,s=n=function(e,t,i){return new a(e,t,i)},c=CreateModifiersV1;else if(n)s=n,c=CreateModifiersV2;else{if(!l)throw new Error("BsMultiSelect: Popper component (https://popper.js.org) is required");l.createPopper?(s=l.createPopper,c=CreateModifiersV2):(s=n=function(e){return function(t,i,n){return new e(t,i,n)}}(l),c=CreateModifiersV1)}var a,r=CreatePopperConfigurationAspect(c),u=CreatePopperAspect(s,e,r);return t.createPopperAspect=u,{append(){let{filterDom:e,choicesDom:i,disposeAspect:n,staticManager:o,choicesVisibilityAspect:l,specialPicksEventsAspect:c}=t,s=e.filterInputElement,a=i.choicesElement,r=u.createPopper(a,s,!0);o.appendToContainer=composeSync(o.appendToContainer,r.init);var p=c.backSpace;c.backSpace=e=>{p(e),r.update()},n.dispose=composeSync(n.dispose,r.dispose),l.updatePopupLocation=composeSync(l.updatePopupLocation,(function(){r.update()}))}}}}function PopperRtlAspect(){return{getIsRtl:()=>!1}}function CreateModifiersV1(e){return{preventOverflow:{enabled:e},hide:{enabled:!1},flip:{enabled:!1}}}function CreateModifiersV2(e){var t=[{name:"flip",options:{fallbackPlacements:["bottom"]}}];return e&&t.push({name:"preventOverflow"}),t}function CreatePopperAspect(e,t,i){return{createPopper(n,o,l){let c=null;return{init(){var s=t.getIsRtl(),a=i.createConfiguration(l,s);c=e(o,n,a)},update(){c.update()},dispose(){c.destroy()}}}}}function CreatePopperConfigurationAspect(e){return{createConfiguration(t,i){let n={placement:"bottom-start",modifiers:e(t)};return i&&(n.placement="bottom-end"),n}}}function ChoicesDynamicStylingPlugin(e,t){return preset$3(e),{plug:plug$9}}function preset$3(e){e.useChoicesDynamicStyling=!1,e.choicesDynamicStyling=e=>choicesDynamicStyling(e,window),e.minimalChoicesDynamicStylingMaxHeight=20}function plug$9(e){let{choicesDynamicStyling:t,useChoicesDynamicStyling:i}=e;return e=>({layout:()=>{if(i){let{choicesVisibilityAspect:i,specialPicksEventsAspect:l}=e;var n=i.setChoicesVisible;i.setChoicesVisible=function(i){i&&t(e),n(i)};var o=l.backSpace;l.backSpace=i=>{o(i),t(e)}}}})}function choicesDynamicStyling(e,t){let{choicesDom:i,navigateAspect:n,configuration:o}=e,l=i.choicesElement,c=o.minimalChoicesDynamicStylingMaxHeight;var s=t.document.getElementsByTagName("body")[0],a=t.document.documentElement,r=(t.innerHeight||a.clientHeight||s.clientHeight)-l.parentNode.getBoundingClientRect().top,u=Math.max(c,Math.round(.85*r));if(l.style.setProperty("max-height",u+"px"),l.style.setProperty("overflow-y","auto"),!i.ChoicesDynamicStylingPlugin_scrollHandle){i.ChoicesDynamicStylingPlugin_scrollHandle=!0;var p=n.navigate;n.navigate=function(e){var t=p(e);return null!=t&&null!=t.choice&&null!=t.choice.choiceDom.choiceElement&&t.choice.choiceDom.choiceElement.scrollIntoView(!1),t}}}function HighlightPlugin(e){return e.useHighlighting=!1,{plug:plug$8}}function ExtendChoiceDomFactory$1(e,t){var i=e.create;e.create=e=>{i(e);let n=e.choiceDom.choiceElement;e.choiceDomManagerHandlers.updateHighlighted=()=>{var i=t.getText(e.wrap.option),o=aspects.highlightAspect.getHighlighter();o?o(n,e.choiceDom,i):n.textContent=i}}}function plug$8(e){return t=>(e.useHighlighting&&(t.highlightAspect=HighlightAspect()),{plugStaticDom(){var{choiceDomFactory:e,dataWrap:i}=t;ExtendChoiceDomFactory$1(e,i)},layout(){let{highlightAspect:e,filterManagerAspect:i,produceChoiceAspect:n}=t;if(e){let t=i.processEmptyInput;i.processEmptyInput=function(){e.reset(),t()};let o=i.setFilter;i.setFilter=function(t){e.set(t),o(t)};let l=n.produceChoice;n.produceChoice=function(e){l(e);let t=e.choice.choiceDomManagerHandlers.setVisible;e.choice.choiceDomManagerHandlers.setVisible=function(i){t(i),e.choice.choiceDomManagerHandlers.updateHighlighted()}}}}})}function HighlightAspect(){let e=null;return{getHighlighter:()=>e,set(t){var i=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp("("+i+")","gi");e=function(e,t,i){e.innerHTML=i.replace(n,"<u>$1</u>")}},reset(){e=null}}}function CustomChoiceStylingsPlugin(e){return e.customChoiceStylings=null,{plug:plug$7}}function plug$7(e){return t=>({plugStaticDom:()=>{let{choiceDomFactory:i}=t,n=e.customChoiceStylings;if(n){ExtendChoiceDomFactory(i,CustomChoiceStylingsAspect(n))}}})}function ExtendChoiceDomFactory(e,t){let i=e.create;e.create=function(e){i(e),t.customize(e.wrap,e.choiceDom,e.choiceDomManagerHandlers)}}function CustomChoiceStylingsAspect(e){return{customize(t){var i=e(t.choiceDom,t.wrap.option);if(i){function n(e){return function(){e({isOptionSelected:t.wrap.isOptionSelected,isOptionDisabled:t.wrap.isOptionDisabled,isHoverIn:t.isHoverIn})}}let e=t.choiceDomManagerHandlers;e.updateHoverIn&&i.updateHoverIn&&(e.updateHoverIn=composeSync(e.updateHoverIn,n(i.updateHoverIn))),e.updateSelected&&i.updateSelected&&(e.updateSelected=composeSync(e.updateSelected,n(i.updateSelected))),e.updateDisabled&&i.updateDisabled&&(e.updateDisabled=composeSync(e.updateDisabled,n(i.updateDisabled))),e.updateHighlighted&&i.updateHighlighted&&(e.updateHighlighted=composeSync(e.updateHighlighted,n(i.updateHighlighted)))}}}}function CustomPickStylingsPlugin(e){return e.customPickStylings=null,{plug:plug$6}}function plug$6(e){return t=>({plugStaticDom:()=>{let{disabledComponentAspect:i,pickDomFactory:n}=t;ExtendPickDomFactory$2(n,CustomPickStylingsAspect(i,e.customPickStylings))}})}function ExtendPickDomFactory$2(e,t){let i=e.create;e.create=function(e){i(e),t.customize(e)}}function CustomPickStylingsAspect(e,t){return{customize(i){if(t){var n=t(i.pickDom,i.wrap.option);if(n){function o(t){return function(){t({isOptionDisabled:i.wrap.isOptionDisabled,isComponentDisabled:e.getDisabled()})}}let t=i.pickDomManagerHandlers;t.updateDisabled&&n.updateDisabled&&(t.updateDisabled=composeSync(t.updateDisabled,o(n.updateDisabled))),t.updateComponentDisabled&&n.updateComponentDisabled&&(t.updateComponentDisabled=composeSync(t.updateComponentDisabled,o(n.updateComponentDisabled)))}}}}}function UpdateAppearancePlugin(){return{plug:plug$5}}function plug$5(){var e=UpdateAppearanceAspect();return t=>(t.updateAppearanceAspect=e,{layout:()=>{var{updateAspect:i,loadAspect:n}=t;return i.update=composeSync(i.update,(()=>e.updateAppearance())),n.load=composeSync(n.load,(()=>e.updateAppearance())),{buildApi(t){t.updateAppearance=()=>e.updateAppearance()}}}})}function UpdateAppearanceAspect(){return{updateAppearance(){}}}function DisableComponentPlugin(e){return preset$2(e),{plug:plug$4}}function preset$2(e){e.getDisabled=()=>null}function plug$4(e){let t=DisabledComponentAspect(e.getDisabled);return e=>(e.disabledComponentAspect=t,{plugStaticDom:()=>{var{pickDomFactory:i}=e;ExtendPickDomFactory$1(i,t)},layout:()=>{var{updateAppearanceAspect:i,picksList:n,picksDom:o,picksElementAspect:l}=e,c=e=>{n.forEach((e=>e.pickDomManagerHandlers.updateComponentDisabled())),o.disable(e)},s=l.onClick;let a;function r(){var e;let i=null!=(e=t.getDisabled())&&e;a!==i&&(a=i,c(i))}return l.onClick=e=>{c=t=>{n.forEach((e=>e.pickDomManagerHandlers.updateComponentDisabled())),o.disable(t),t?l.onClickUnbind():s(e)}},i.updateAppearance=composeSync(i.updateAppearance,r),{buildApi(e){e.updateDisabled=r}}}})}function DisabledComponentAspect(e){return{getDisabled:e}}function ExtendPickDomFactory$1(e,t){var i=e.create;e.create=e=>{i(e);let n=e.pickDomManagerHandlers;n.updateComponentDisabled=()=>{var e;n.disableButton&&n.disableButton(null!=(e=t.getDisabled())&&e)},n.updateComponentDisabled()}}function PlaceholderPlugin(){return{plug:plug$3}}function plug$3(e){return t=>({layout:()=>{let{staticManager:i,picksList:n,picksDom:o,filterDom:l,updateDataAspect:c,resetFilterListAspect:s,filterManagerAspect:a,environment:r,staticDom:u}=t,p=r.isIE11,{placeholder:d,css:g}=e,{picksElement:h}=o,m=l.filterInputElement;function f(e){m.placeholder=e}if(p){var y=ResetableFlag();let e=PlaceholderStopInputAspect(y);var C=f;f=function(e){y.set(),C(e)};var b=l.onInput;l.onInput=t=>{b((()=>{e.get()?e.reset():t()}))}}function v(e){m.style.width=e?"100%":"2ch"}d||(d=getDataGuardedWithPrefix(u.initialElement,"bsmultiselect","placeholder"));var P=toggleStyling(m,g.filterInput_empty);function A(e){e?(f(d||""),h.style.display="block"):(f(""),h.style.display="flex"),P(e),v(e)}A(!0);let D=()=>n.isEmpty()&&l.isEmpty();function S(){A(D())}function k(){v(D())}let E=o.disable;o.disable=e=>{!function(e){m.disabled=e}(e),E(e)},i.appendToContainer=composeSync(i.appendToContainer,k),a.processEmptyInput=composeSync(k,a.processEmptyInput),s.forceResetFilter=composeSync(s.forceResetFilter,S);let F=n.add;n.add=e=>{let t=F(e);return 1==n.getCount()&&(l.isEmpty()?(f(""),h.style.display="flex",P(!1),m.style.width="2ch"):h.style.display="flex"),e.dispose=composeSync(e.dispose,(function(){D()&&A(!0)})),t},c.updateData=composeSync(c.updateData,S)}})}function PlaceholderStopInputAspect(e){return{get:()=>e.get(),reset:()=>e.reset()}}function PlaceholderCssPatchPlugin(e){e.cssPatch.filterInput_empty="form-control"}function FloatingLabelPlugin(e){return e.css.label_floating_lifted="floating-lifted",e.css.picks_floating_lifted="floating-lifted",{plug:plug$2}}function plug$2(e){return t=>({plugStaticDom:()=>{t.floatingLabelAspect=FloatingLabelAspect()},layout:()=>{let{picksList:i,picksDom:n,filterDom:o,updateDataAspect:l,resetFilterListAspect:c,floatingLabelAspect:s,getLabelAspect:a}=t,{css:r}=e;if(s.isFloatingLabel()){let e=a.getLabel(),t=n.picksElement;var u=toggleStyling(e,r.label_floating_lifted),p=toggleStyling(t,r.picks_floating_lifted);let s=()=>i.isEmpty()&&o.isEmpty()&&!n.getIsFocusIn();function d(){!function(e){u(e),p(e)}(!s())}d(),c.forceResetFilter=composeSync(c.forceResetFilter,d);let h=i.add;i.add=e=>{let t=h(e);return 1==i.getCount()&&d(),e.dispose=composeSync(e.dispose,(()=>{0==i.getCount()&&d()})),t};var g=n.toggleFocusStyling;n.toggleFocusStyling=()=>{var e=n.getIsFocusIn();g(e),d()},l.updateData=composeSync(l.updateData,d)}}})}function FloatingLabelAspect(){return{isFloatingLabel(){}}}function WarningCssPatchPlugin(e){e.cssPatch.warning={paddingLeft:".25rem",paddingRight:".25rem",zIndex:4,fontSize:"small",backgroundColor:"var(--bs-warning)"}}const defNoResultsWarningMessage="No results found";function preset$1(e){e.noResultsWarning="No results found",e.isNoResultsWarningEnabled=!1}function plug$1(e){return t=>({layout:()=>{let{choicesDom:i,staticManager:n,afterInputAspect:o,filterManagerAspect:l,resetLayoutAspect:c,staticDom:s}=t,{createElementAspect:a}=s,{css:r,noResultsWarning:u}=e;if(e.isNoResultsWarningEnabled){let e=WarningAspect(i,a,n,r);t.warningAspect=e,ExtendAfterInputAspect(o,e,l,u),c.resetLayout=composeSync((()=>e.hide()),c.resetLayout)}},append:()=>{let{createPopperAspect:e,filterDom:i,warningAspect:n,staticManager:o,disposeAspect:l}=t;if(n){let t=i.filterInputElement,s=e.createPopper(n.warningElement,t,!1);o.appendToContainer=composeSync(o.appendToContainer,s.init);var c=n.show;n.show=e=>{s.update(),c(e)},l.dispose=composeSync(l.dispose,s.dispose)}}})}function ExtendAfterInputAspect(e,t,i,n){var o=e.visible;e.visible=(e,i)=>{t.hide(),o(e,i)};var l=e.notVisible;e.notVisible=e=>{l(e),i.getFilter()?t.show(n):t.hide()}}function WarningAspect(e,t,i,n){let o=e.choicesElement;var l=t.createElement("DIV");return i.appendToContainer=composeSync(i.appendToContainer,(()=>o.parentNode.insertBefore(l,o.nextSibling))),l.style.display="none",addStyling(l,n.warning),{warningElement:l,show(e){l.style.display="block",l.innerHTML=e},hide(){l.style.display="none",l.innerHTML=""}}}function WarningBs4Plugin(e){return preset(e),{plug:plug$1}}function preset(e){e.css.warning="alert-warning bg-warning",preset$1(e)}function PickButtonPlugCssPatchBs4(e){e.cssPatch.pickButton={float:"none",verticalAlign:"text-top",fontSize:"1.8em",lineHeight:"0.5em",fontWeight:"400"}}function PickButtonBs4Plugin(e){return e.pickButtonHTML='<button aria-label="Remove" tabIndex="-1" type="button"><span aria-hidden="true">&times;</span></button>',e.css.pickButton="close",PickButtonPlugin()}function PickButtonPlugin(){return{plug:plug}}function plug(e){return t=>({plugStaticDom:()=>{var{pickDomFactory:i,staticDom:n}=t;ExtendPickDomFactory(i,n.createElementAspect,e.pickButtonHTML,e.css)},layout:()=>{var{producePickAspect:e}=t;ExtendProducePickAspect(e)}})}function ExtendProducePickAspect(e){let t=e.producePick;e.producePick=e=>{let i=t(e);return i.removeOnButton=e=>{i.setSelectedFalse()},i.dispose=composeSync(i.dispose,(()=>{i.removeOnButton=null})),i}}function ExtendPickDomFactory(e,t,i,n){var o=e.create;e.create=e=>{o(e);let{pickDom:l,pickDomManagerHandlers:c}=e;t.createElementFromHtmlPutAfter(l.pickContentElement,i);let s=l.pickElement.querySelector("BUTTON");l.pickButtonElement=s,c.disableButton=e=>{s.disabled=e};let a=EventBinder();a.bind(s,"click",(t=>e.removeOnButton(t))),addStyling(s,n.pickButton),e.dispose=composeSync(e.dispose,(()=>{a.unbind(),l.pickButtonElement=null,c.disableButton=null}))}}let Bs4PluginSet={BsAppearanceBs4Plugin:BsAppearanceBs4Plugin,PickButtonBs4Plugin:PickButtonBs4Plugin,WarningBs4Plugin:WarningBs4Plugin,CssPatchBs4Plugin:CssPatchBs4Plugin,BsAppearanceBs4CssPatchPlugin:BsAppearanceBs4CssPatchPlugin,PickButtonPlugCssPatchBs4:PickButtonPlugCssPatchBs4},multiSelectPlugins={SelectElementPlugin:SelectElementPlugin,LabelForAttributePlugin:LabelForAttributePlugin,HiddenOptionPlugin:HiddenOptionPlugin,ValidationApiPlugin:ValidationApiPlugin,UpdateAppearancePlugin:UpdateAppearancePlugin,DisableComponentPlugin:DisableComponentPlugin,FormResetPlugin:FormResetPlugin,CreatePopperPlugin:CreatePopperPlugin,WarningCssPatchPlugin:WarningCssPatchPlugin,RtlPlugin:RtlPlugin,PlaceholderPlugin:PlaceholderPlugin,PlaceholderCssPatchPlugin:PlaceholderCssPatchPlugin,FloatingLabelPlugin:FloatingLabelPlugin,OptionsApiPlugin:OptionsApiPlugin,JQueryMethodsPlugin:JQueryMethodsPlugin,SelectedOptionPlugin:SelectedOptionPlugin,FormRestoreOnBackwardPlugin:FormRestoreOnBackwardPlugin,DisabledOptionPlugin:DisabledOptionPlugin,DisabledOptionCssPatchPlugin:DisabledOptionCssPatchPlugin,PicksApiPlugin:PicksApiPlugin,HighlightPlugin:HighlightPlugin,ChoicesDynamicStylingPlugin:ChoicesDynamicStylingPlugin,CustomPickStylingsPlugin:CustomPickStylingsPlugin,CustomChoiceStylingsPlugin:CustomChoiceStylingsPlugin},picksPlugins={PicksPlugin:PicksPlugin,LabelForAttributePlugin:LabelForAttributePlugin,ValidationApiPlugin:ValidationApiPlugin,UpdateAppearancePlugin:UpdateAppearancePlugin,DisableComponentPlugin:DisableComponentPlugin,CreatePopperPlugin:CreatePopperPlugin,WarningCssPatchPlugin:WarningCssPatchPlugin,RtlPlugin:RtlPlugin,PlaceholderPlugin:PlaceholderPlugin,PlaceholderCssPatchPlugin:PlaceholderCssPatchPlugin,FloatingLabelPlugin:FloatingLabelPlugin,OptionsApiPlugin:OptionsApiPlugin,JQueryMethodsPlugin:JQueryMethodsPlugin,PicksApiPlugin:PicksApiPlugin,HighlightPlugin:HighlightPlugin,ChoicesDynamicStylingPlugin:ChoicesDynamicStylingPlugin,CustomPickStylingsPlugin:CustomPickStylingsPlugin,CustomChoiceStylingsPlugin:CustomChoiceStylingsPlugin},allPlugins=shallowClearClone(multiSelectPlugins,{PicksPlugin:PicksPlugin}),utilities={composeSync:composeSync,EventBinder:EventBinder,addStyling:addStyling,toggleStyling:toggleStyling};function StaticDomFactory(e){return{createStaticDom(){let t,i,{createElementAspect:n,initialElement:o,containerClass:l}=e,c=!1;if("DIV"==o.tagName)t=o,t.classList.contains(l)||(t.classList.add(l),c=!0),i=findDirectChildByTagName(t,"UL");else if("UL"==o.tagName){if(i=o,t=closestByClassName(o,l),!t)throw new Error("BsMultiSelect: defined on UL but precedentant DIV for container not found; class="+l)}else if("INPUT"==o.tagName)throw new Error("BsMultiSelect: INPUT element is not supported");let s=!1;return i||(i=n.createElement("UL"),s=!0),e.containerElement=t,e.isDisposablePicksElementFlag=s,e.picksElement=i,{staticManager:{appendToContainer(){let{containerElement:t,isDisposablePicksElementFlag:i,choicesDom:n,picksDom:o,filterDom:l}=e;o.pickFilterElement.appendChild(l.filterInputElement),o.picksElement.appendChild(o.pickFilterElement),t.appendChild(n.choicesElement),i&&t.appendChild(o.picksElement)},dispose(){let{containerElement:t,containerClass:i,isDisposablePicksElementFlag:n,choicesDom:o,picksDom:l,filterDom:s}=e;t.removeChild(o.choicesElement),c&&t.classList.remove(i),n&&t.removeChild(l.picksElement),l.dispose(),s.dispose()}}}}}}function CreateElementAspect(e,t,i){return{createElement:e,createElementFromHtml:t,createElementFromHtmlPutAfter:i}}function ChoicesVisibilityAspect(e){return{isChoicesVisible:()=>"none"!=e.style.display,setChoicesVisible(t){e.style.display=t?"block":"none"},updatePopupLocation(){}}}function SpecialPicksEventsAspect(){return{backSpace(e){e.setSelectedFalse()}}}function OnChangeAspect(e,t){return{onChange(){e.trigger(t)}}}function ChoicesEnumerableAspect(e,t){return{forEach(i){let n=e.getHead();for(;n;)i(n),n=t(n)}}}function NavigateManager(e,t,i){return{navigate:(n,o)=>n?o?i(o):e.getHead():o?t(o):e.getTail(),getCount:()=>e.getCount(),getHead:()=>e.getHead()}}function FilterPredicateAspect(){return{filterPredicate:(e,t)=>e.choice.searchText.indexOf(t)>=0}}function FilterManagerAspect(e,t,i,n,o){let l=!0,c="";return{getNavigateManager:()=>l?e:t,processEmptyInput(){l=!0,c="",n.forEach((e=>{e.choice.choiceDomManagerHandlers.setVisible(!0)}))},getFilter:()=>c,setFilter(e){l=!1,c=e,i.reset(),n.forEach((t=>{t.choice.filteredPrev=t.choice.filteredNext=null;var n=o.filterPredicate(t,e);n&&i.add(t),t.choice.choiceDomManagerHandlers.setVisible(n)}))}}}function BuildAndAttachChoiceAspect(e){return{buildAndAttachChoice(t,i){e.produceChoice(t),t.choice.choiceDomManagerHandlers.attach(null==i?void 0:i())}}}function ProduceChoiceAspect(e,t){return{produceChoice(i){var{choiceElement:n,attach:o,detach:l,setVisible:c}=e.createChoiceElement();let s=i.choice;s.wrap=i,s.choiceDom={choiceElement:n};let a={attach:o,detach:l,setVisible:c};return s.choiceDomManagerHandlers=a,t.create(s),s.isHoverIn=!1,s.setHoverIn=e=>{s.isHoverIn=e,a.updateHoverIn()},s.dispose=composeSync((()=>{s.choiceDom.choiceElement=null,s.choiceDom=null,a.attach=null,a.detach=null,a.setVisible=null,s.choiceDomManagerHandlers=null,s.choiсeClick=null,s.setHoverIn=null,s.wrap=null,s.dispose=null}),s.dispose),i.dispose=()=>{s.dispose(),i.dispose=null},s}}}function OptionAttachAspect(e,t,i,n){return{attach(o){let l=e.createWrap(o);l.choice=t.createChoiceBase(o),n.push(l),i.buildAndAttachChoice(l)}}}function OptionsLoopAspect(e,t){return{loop(){let i=e.getOptions();for(let e=0;e<i.length;e++){let n=i[e];t.attach(n)}}}}function UpdateDataAspect(e,t,i,n,o){return{updateData(){o.resetLayout(),e.choicesListElement.innerHTML="",t.clear(),i.forEach((e=>e.dispose())),i.reset(),n.loop()}}}function UpdateAspect(e){return{update(){e.updateData()}}}function CreateChoiceBaseAspect(e){return{createChoiceBase:t=>({filteredPrev:null,filteredNext:null,searchText:e.getText(t).toLowerCase().trim(),isHoverIn:!1,setHoverIn:null,choiceDom:null,itemPrev:null,itemNext:null,dispose:null})}}function CreateWrapAspect(){return{createWrap:e=>({option:e})}}function ProducePickAspect(e,t){return{producePick(i){let{pickElement:n,attach:o,detach:l}=e.createPickElement(),c={pickElement:n},s={attach:o,detach:l},a={wrap:i,pickDom:c,pickDomManagerHandlers:s,dispose:()=>{l(),c.pickElement=null,s.attach=null,a.wrap=null,a.pickDom=null,a.pickDomManagerHandlers=null}};return i.pick=a,t.create(a),a.pickDomManagerHandlers.attach(),a}}}function HoveredChoiceAspect(){let e=null;return{getHoveredChoice:()=>e,setHoveredChoice:t=>{e=t},resetHoveredChoice(){e&&(e.choice.setHoverIn(!1),e=null)}}}function NavigateAspect(e,t){return{hoverIn(t){e.resetHoveredChoice(),e.setHoveredChoice(t),t.choice.setHoverIn(!0)},navigate:i=>t(i,e.getHoveredChoice())}}function Wraps(e,t,i,n){return{push:t=>push(t,e,n),insert:(t,i)=>insert(t,i,e,n),remove:t=>{var n=e.remove(t);return i(n),n},clear:()=>{e.reset(),t()},dispose:()=>e.forLoop((e=>e.dispose()))}}function push(e,t,i){t.push(e),i(e)}function insert(e,t,i,n){e>=i.getCount()?push(t,i,n):(i.add(t,e),n(t,e))}function InputAspect(e,t){return{processInput(){let i=e.getValue(),n=i.trim();var o=!1;if(""==n?o=!0:t.setFilter(n.toLowerCase()),!o&&1==t.getNavigateManager().getCount()){let i=t.getNavigateManager().getHead(),n=t.getFilter();if(i.choice.searchText==n){i.choice.fullMatch()&&(e.setEmpty(),o=!0)}}return{filterInputValue:i,isEmpty:o}}}}function ResetFilterListAspect(e,t){return{forceResetFilter(){e.setEmpty(),t.processEmptyInput()}}}function ResetFilterAspect(e,t){return{resetFilter(){e.isEmpty()||t.forceResetFilter()}}}function FocusInAspect(e){return{setFocusIn(t){e.setIsFocusIn(t),e.toggleFocusStyling()}}}function MultiSelectInlineLayoutAspect(e,t,i,n,o,l,c,s,a,r,u,p,d,g,h,m,f){let y=i.choicesElement;var C=e.window,b=C.document,v=EventLoopProlongableFlag(C),P=!1;function A(){P=!1}var D=function(){P=!0},S=EventTumbler(y,"mousedown",D),k=EventTumbler(b,"mouseup",E),E=function(e){y==e.target?t.setFocus():containsAndSelf(y,e.target)||g.containsAndSelf(e.target)||(d.resetLayout(),s.setFocusIn(!1))};function F(){n.isChoicesVisible()||(n.updatePopupLocation(),v.set(),n.setChoicesVisible(!0),y.scrollTop=0,S.on(),k.on())}function L(){x(),o.resetHoveredChoice(),n.isChoicesVisible()&&(n.setChoicesVisible(!1),S.off(),k.off())}var I=null;function B(){D(),C.setTimeout((()=>A()))}function M(e){return t=>{C.setTimeout((()=>e(t))),function(e){I=e}(t),d.resetLayout()}}let H=EventBinder();var x=()=>{H.unbind()},w=e=>{e.choice.isHoverIn||l.hoverIn(e),x()};function O(e){let t=l.navigate(e);t&&(v.set(400),l.hoverIn(t),F())}var V=e=>{let i=e.which;var o=t.isEmpty();if(([13,27].indexOf(i)>=0||9==i&&!o)&&e.preventDefault(),[38,40].indexOf(i)>=0&&e.preventDefault(),8==i){if(o){let e=a.getTail();e&&u.backSpace(e)}}else 9==i?o&&L():27==i?o&&!n.isChoicesVisible()||e.stopPropagation():38==i?O(!1):40==i&&O(!0)},N=e=>{let t=e.which;9==t?n.isChoicesVisible()?O(!0):c.getNavigateManager().getCount()>0&&F():13==t?n.isChoicesVisible()?function(){let e=o.getHoveredChoice();e&&e.choice.tryToggleChoice()&&d.resetLayout()}():c.getNavigateManager().getCount()>0&&F():27==t&&d.resetLayout()};function $(e){t.setFocusIfNotTarget(e.target),I!=e&&(n.isChoicesVisible()?L():c.getNavigateManager().getCount()>0&&F()),I=null}return{layout(){t.onFocusIn((()=>s.setFocusIn(!0))),t.onFocusOut((()=>{P||(d.resetLayout(),s.setFocusIn(!1)),A()})),t.onInput((()=>{let{filterInputValue:e,isEmpty:i}=r.processInput();i?c.processEmptyInput():t.setWidth(e),v.set(),function(){let e=c.getNavigateManager().getCount();e>0?h.visible(F,e):h.notVisible(L)}()})),t.onKeyDown(V),t.onKeyUp(N),g.onClick($),g.onMousedown(B),d.resetLayout=composeSync(L,d.resetLayout);var e=f.create;f.create=t=>{if(e(t),t.removeOnButton){var i=t.removeOnButton;t.removeOnButton=M(i)}};let i=p.produceChoice;p.produceChoice=e=>{i(e);var n=e.choice.addPickForChoice();e.choice.choiceDomManagerHandlers.detach=composeSync(e.choice.choiceDomManagerHandlers.detach,(()=>{n.removeAndDispose&&(n.removeAndDispose(),n.removeAndDispose=null)})),e.choice.choiсeClick=composeSync(e.choice.choiсeClick,(()=>t.setFocus()));let c=function(e){let t=e.choice.choiceDom.choiceElement;var i=EventBinder();return i.bind(t,"mouseover",(()=>{v.get()?(x(),H.bind(t,"mousemove",(()=>w(e))),H.bind(t,"mousedown",(()=>w(e)))):e.choice.isHoverIn||l.hoverIn(e)})),i.bind(t,"mouseleave",(()=>{v.get()||o.resetHoveredChoice()})),i.unbind}(e);e.choice.dispose=composeSync(c,e.choice.dispose)},m.dispose=composeSync(m.dispose,x,(()=>g.unbind()))}}}function ResetLayoutAspect(e){return{resetLayout(){e.resetFilter()}}}function LoadAspect(e){return{load(){e.loop()}}}function CountableChoicesListInsertAspect(e,t){return{countableChoicesListInsert(i,n){let o=e.getNext(n);t.add(i,o)}}}function PicksElementAspect(e){var t=EventBinder(),i=EventBinder();return{containsAndSelf:t=>containsAndSelf(e,t),onClickUnbind(){t.unbind()},onClick(i){t.bind(e,"click",i)},onMousedown(t){i.bind(e,"mousedown",t)},unbind(){i.unbind(),t.unbind()}}}function AfterInputAspect(e,t,i,n){return{visible(o,l){let c=i.isChoicesVisible();c||o(),1==l?t.hoverIn(e.getNavigateManager().getHead()):c&&n.resetHoveredChoice()},notVisible(e){i.isChoicesVisible()&&e()}}}function ShowErrorAspect(e){return{showError(t){let{createElementAspect:i,initialElement:n}=e,o=i.createElement("SPAN");o.style.backgroundColor="red",o.style.color="white",o.style.block="inline-block",o.style.padding="0.2rem 0.5rem",o.textContent="BsMultiSelect "+t.toString(),n.parentNode.insertBefore(o,n.nextSibling)}}}function BsMultiSelect(e,t,i,n){let{css:o,getText:l,containerClass:c,options:s}=n,{trigger:a}=t,r=CreateElementAspect((e=>t.window.document.createElement(e)),((e,t)=>e.innerHTML=t),((e,i)=>{var n=(new t.window.DOMParser).parseFromString(i,"text/html").body.children[0];e.parentNode.insertBefore(n,e.nextSibling)})),u={},p={initialElement:e,css:o,createElementAspect:r,containerClass:c},d=StaticDomFactory(p),g=PicksDomFactory(p),h=FilterDomFactory(p),m=ChoicesDomFactory(p);u.getText=null!=l?l:e=>e.text,u.getOptions=()=>s,p.trigger=t=>a(e,t);let f=PickDomFactory(o,p.createElementAspect,u),y=ChoiceDomFactory(o,p.createElementAspect,u);p.environment=t,p.showErrorAspect=ShowErrorAspect(p);try{return BsMultiSelectImpl(u,p,d,g,h,m,f,y,i.createHandlers())}catch(e){throw p.showErrorAspect.showError(e),e}}function BsMultiSelectImpl(e,t,i,n,o,l,c,s,a){let r=OnChangeAspect(t,"dashboardcode.multiselect:change"),u={dispose(){}};a.dom({showErrorAspect:t.showErrorAspect,environment:t.environment,onChangeAspect:r,disposeAspect:u,staticDomFactory:i,choicesDomFactory:l,filterDomFactory:o,picksDomFactory:n,staticDom:t,dataWrap:e});let{staticManager:p}=i.createStaticDom(),d=l.create(),g=n.create(),h=o.create();t.choicesDom=d,t.picksDom=g,t.filterDom=h;let m=ProducePickAspect(g,c),f=List(),y=ProduceChoiceAspect(d,s),C=ArrayFacade(),b=DoublyLinkedList((e=>e.choice.itemPrev),((e,t)=>e.choice.itemPrev=t),(e=>e.choice.itemNext),((e,t)=>e.choice.itemNext=t)),v=CountableChoicesListInsertAspect(C,b),P=Wraps(C,(()=>b.reset()),(e=>b.remove(e)),((e,t)=>v.countableChoicesListInsert(e,t))),A=CreateWrapAspect(),D=CreateChoiceBaseAspect(e),S=ChoicesEnumerableAspect(b,(e=>e.choice.itemNext)),k=DoublyLinkedList((e=>e.choice.filteredPrev),((e,t)=>e.choice.filteredPrev=t),(e=>e.choice.filteredNext),((e,t)=>e.choice.filteredNext=t)),E=NavigateManager(b,(e=>e.choice.itemPrev),(e=>e.choice.itemNext)),F=NavigateManager(k,(e=>e.choice.filteredPrev),(e=>e.choice.filteredNext)),L=FilterPredicateAspect(),I=FilterManagerAspect(E,F,k,S,L),B=HoveredChoiceAspect(),M=NavigateAspect(B,((e,t)=>I.getNavigateManager().navigate(e,t)));a.plugStaticDom({pickDomFactory:c,choiceDomFactory:s,countableChoicesList:b,countableChoicesListInsertAspect:v,wrapsCollection:C,choicesEnumerableAspect:S,filteredChoicesList:k,filterPredicateAspect:L,hoveredChoiceAspect:B,navigateAspect:M,filterManagerAspect:I,createWrapAspect:A,createChoiceBaseAspect:D,picksList:f,wraps:P,producePickAspect:m,produceChoiceAspect:y});let H=SpecialPicksEventsAspect(),x=ResetFilterListAspect(h,I),w=ResetFilterAspect(h,x),O=FocusInAspect(g),V=InputAspect(h,I),N=BuildAndAttachChoiceAspect(y),$=ResetLayoutAspect(w),T=OptionAttachAspect(A,D,N,P),_=OptionsLoopAspect(e,T),R=UpdateDataAspect(d,P,f,_,$),W=LoadAspect(_),U=UpdateAspect(R),z=PicksElementAspect(g.picksElement),q=ChoicesVisibilityAspect(d.choicesElement),G=AfterInputAspect(I,M,q,B),j=MultiSelectInlineLayoutAspect(t.environment,h,d,q,B,M,I,O,f,V,H,y,$,z,G,u,c);a.layout({picksDom:g,choicesDom:d,filterDom:h,resetLayoutAspect:$,choicesVisibilityAspect:q,staticManager:p,buildAndAttachChoiceAspect:N,optionsLoopAspect:_,optionAttachAspect:T,inputAspect:V,resetFilterListAspect:x,resetFilterAspect:w,specialPicksEventsAspect:H,resetLayoutAspect:$,focusInAspect:O,loadAspect:W,updateDataAspect:R,updateAspect:U,picksElementAspect:z,afterInputAspect:G}),j.layout(),a.append();let J={component:"BsMultiSelect.api",updateData:()=>{R.updateData()},update:()=>{U.update()}};return a.buildApi(J),J.dispose=composeSync($.resetLayout,(()=>{u.dispose()}),a.dispose,(()=>{f.forEach((e=>e.dispose()))}),P.dispose,p.dispose,(()=>{t.choicesDom=null,t.picksDom=null,t.filterDom=null})),p.appendToContainer(),W.load(),J}function parseEventHandler(e,t,i,n,o,l,c,s,a){t&&(t.dom&&i.push({key:e,value:t.dom}),t.plugStaticDom&&n.push({key:e,value:t.plugStaticDom}),t.preLayout&&o.push({key:e,value:t.preLayout}),t.layout&&l.push({key:e,value:t.layout}),t.append&&c.push({key:e,value:t.append}),t.buildApi&&s.push({key:e,value:t.buildApi}),t.dispose&&a.push({key:e,value:t.dispose}))}function ComposePluginManagerFactory(e,t,i){let n=[],o=[];for(let l=0;l<e.length;l++){let c=e[l].value(t,i);c&&(c.plug&&n.push({key:e[l].key,value:c.plug}),c.merge&&o.push({key:e[l].key,value:c.merge}))}return(e,t,l)=>{let c=[];for(let i=0;i<o.length;i++){let n=o[i].value;n&&n(e,t)}for(let t=0;t<n.length;t++){let i=n[t].value(e);i&&c.push({key:n[t].key,value:i})}return l&&c.push({key:"",value:l}),PluginManager(i,c)}}function PluginManager(e,t){let i={environment:e};return{aspects:i,createHandlers:e=>{extendIfUndefined(i,e);var n=[],o=[],l=[],c=[],s=[],a=[];let r=[];for(let e=0;e<t.length;e++){let u=t[e].value(i);parseEventHandler(t[e].key,u,n,o,l,c,s,a,r)}return{dom(e){extendIfUndefined(i,e);for(let e=0;e<n.length;e++){var t,u,p=null==(t=(u=n[e]).value)?void 0:t.call(u);parseEventHandler(n[e].key,p,n,o,l,c,s,a,r)}},plugStaticDom(e){extendIfUndefined(i,e);for(let e=0;e<o.length;e++){var t,u,p=null==(t=(u=o[e]).value)?void 0:t.call(u);parseEventHandler(o[e].key,p,n,o,l,c,s,a,r)}},layout(e){extendIfUndefined(i,e);for(let e=0;e<l.length;e++){var t,u;let i=null==(t=(u=l[e]).value)?void 0:t.call(u);parseEventHandler(l[e].key,i,n,o,l,c,s,a,r)}for(let e=0;e<c.length;e++){var p,d;let t=null==(p=(d=c[e]).value)?void 0:p.call(d);parseEventHandler(c[e].key,t,n,o,l,c,s,a,r)}},append(){for(let u=0;u<s.length;u++){var e,t,i=null==(e=(t=s[u]).value)?void 0:e.call(t);parseEventHandler(s[u].key,i,n,o,l,c,s,a,r)}},buildApi(e){for(let p=0;p<a.length;p++){var t,i,u=null==(t=(i=a[p]).value)?void 0:t.call(i,e);parseEventHandler(a[p].key,u,n,o,l,c,s,a,r)}},dispose(){for(let i=0;i<r.length;i++){var e,t;null==(e=(t=r[i]).value)||e.call(t)}}}}}}const transformStyles=[{old:"selectedPanelDisabledBackgroundColor",opt:"picks_disabled",style:"backgroundColor"},{old:"selectedPanelFocusValidBoxShadow",opt:"picks_focus_valid",style:"boxShadow"},{old:"selectedPanelFocusInvalidBoxShadow",opt:"picks_focus_invalid",style:"boxShadow"},{old:"selectedPanelDefMinHeight",opt:"picks_def",style:"minHeight"},{old:"selectedPanelLgMinHeight",opt:"picks_lg",style:"minHeight"},{old:"selectedPanelSmMinHeight",opt:"picks_sm",style:"minHeight"},{old:"selectedItemContentDisabledOpacity",opt:"choiceLabel_disabled",style:"opacity"}],transformClasses=[{old:"dropDownMenuClass",opt:"choices"},{old:"dropDownItemClass",opt:"choice"},{old:"dropDownItemHoverClass",opt:"choice_hover"},{old:"selectedPanelClass",opt:"picks"},{old:"selectedItemClass",opt:"pick"},{old:"removeSelectedItemButtonClass",opt:"pickButton"},{old:"filterInputItemClass",opt:"pickFilter"},{old:"filterInputClass",opt:"filterInput"},{old:"selectedPanelFocusClass",opt:"picks_focus"},{old:"selectedPanelDisabledClass",opt:"picks_disabled"},{old:"selectedItemContentDisabledClass",opt:"pick_disabled"}];function adjustLegacySettings(e){e.css||(e.css={});var t=e.css;e.cssPatch||(e.cssPatch={});var i=e.cssPatch;if((e.selectedPanelFocusBorderColor||e.selectedPanelFocusBoxShadow)&&(console.log("DashboarCode.BsMultiSelect: selectedPanelFocusBorderColor and selectedPanelFocusBoxShadow are depricated, use - cssPatch:{picks_focus:{borderColor:'myValue', boxShadow:'myValue'}}"),i.picks_focus||(i.picks_focus={boxShadow:e.selectedPanelFocusBoxShadow,borderColor:e.selectedPanelFocusBorderColor}),delete e.selectedPanelFocusBorderColor,delete e.selectedPanelFocusBoxShadow),transformStyles.forEach((t=>{if(e[t.old]){if(console.log(`DashboarCode.BsMultiSelect: ${t.old} is depricated, use - cssPatch:{${t.opt}:{${t.style}:'myValue'}}`),!e[t.opt]){let i={};i[t.style]=e[t.old],e.cssPatch[t.opt]=i}delete e[t.old]}})),transformClasses.forEach((i=>{e[i.old]&&(console.log(`DashboarCode.BsMultiSelect: ${i.old} is depricated, use - css:{${i.opt}:'myValue'}`),t[i.opt]||(t[i.opt]=e[i.old]),delete e[i.old])})),e.inputColor&&(console.log("DashboarCode.BsMultiSelect: inputColor is depricated, remove parameter"),delete e.inputColor),e.useCss&&(console.log("DashboarCode.BsMultiSelect: 'useCss: true' is depricated, use - 'useCssPatch: false'"),t.pick_disabled||(e.useCssPatch=!e.useCss),delete e.useCss),e.getIsValid||e.getIsInValid)throw"DashboarCode.BsMultiSelect: parameters getIsValid and getIsInValid are depricated and removed, use - getValidity that should return (true|false|null) "}function MultiSelectBuilder(e,t,i){const n={containerClass:"dashboardcode-bsmultiselect",css:i};var o=ComposePluginManagerFactory(t,n,e);return{create:(t,i)=>{var l;let c,s;i&&i.plugins&&console.log("DashboarCode.BsMultiSelect: 'options.plugins' is depricated, use - MultiSelectBuilder(environment, plugins) instead"),i instanceof Function?(c=i,s=null):(c=null==i?void 0:i.buildConfiguration,s=i),s&&adjustLegacySettings(s);let a={};a.css=createCss(n.css,null==(l=s)?void 0:l.css),extendIfUndefined(a,s),extendIfUndefined(a,n);let r=null==c?void 0:c(t,a);var u=o(a,s,r);return Object.freeze(a),BsMultiSelect(t,e,u,a)},defaultSettings:n}}function ModuleFactory$1(e,t,i){e.trigger||(e.trigger=(t,i)=>t.dispatchEvent(new e.window.Event(i))),e.isIE11||(e.isIE11=!!e.window.MSInputMethodContext&&!!e.window.document.documentMode);let n=ObjectValuesEx(shallowClearClone(t,multiSelectPlugins)),{create:o,BsMultiSelectDefault:l}=MultiSelectBuilder(e,n,i);o.Default=l;let c=ObjectValuesEx(shallowClearClone(t,picksPlugins)),{create:s,BsPicksDefault:a}=MultiSelectBuilder(e,c,i);return s.Default=a,{BsMultiSelect:o,BsPicks:s,MultiSelectTools:{MultiSelectBuilder:MultiSelectBuilder,plugins:shallowClearClone(t,allPlugins),defaultCss:i,utilities:utilities}}}const defaultCss=createDefaultCssBs4();function ModuleFactory(e){return ModuleFactory$1(e,Bs4PluginSet,defaultCss)}function legacyConstructor(e,t,i){console.log("DashboarCode.BsMultiSelect: 'BsMultiSelect' is depricated, use - ModuleFactory(environment).BsMultiSelect(element, settings)");var{BsMultiSelect:n}=ModuleFactory(t);return n(e,i)}export{legacyConstructor as BsMultiSelect,ModuleFactory};
//# sourceMappingURL=BsMultiSelect.bs4.esm.min.js.map