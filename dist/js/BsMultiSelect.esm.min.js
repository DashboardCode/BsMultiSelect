/*!
  * BsMultiSelect v1.2.0-beta.18 (https://dashboardcode.github.io/BsMultiSelect/)
  * Copyright 2017-2021 Roman Pokrovskij (github user rpokrovskij)
  * Licensed under Apache 2 (https://github.com/DashboardCode/BsMultiSelect/blob/master/LICENSE)
  */
function findDirectChildByTagName(e,t){let i=null;for(let n=0;n<e.children.length;n++){let o=e.children[n];if(o.tagName==t){i=o;break}}return i}function closestByTagName(e,t){return closest(e,(e=>e.tagName===t))}function closestByClassName(e,t){return closest(e,(e=>e.classList.contains(t)))}function closestByAttribute(e,t,i){return closest(e,(e=>e.getAttribute(t)===i))}function containsAndSelf(e,t){return e===t||e.contains(t)}function getDataGuardedWithPrefix(e,t,i){var n=e.getAttribute("data-"+t+"-"+i);if(n)return n;var o=e.getAttribute("data-"+i);return o||null}function closest(e,t){return e&&e instanceof Element?t(e)?e:closest(e.parentNode,t):null}function siblingsAsArray(e){var t=[];if(e.parentNode){var i=e.parentNode.children,n=e.parentNode.children.length;if(i.length>1)for(var o=0;o<n;++o){var l=i[o];l!=e&&t.push(l)}}return t}function getIsRtl(e){var t=!1;return closestByAttribute(e,"dir","rtl")&&(t=!0),t}function EventBinder(){var e=[];return{bind(t,i,n){t.addEventListener(i,n),e.push({element:t,eventName:i,handler:n})},unbind(){e.forEach((e=>{let{element:t,eventName:i,handler:n}=e;t.removeEventListener(i,n)}))}}}function EventTumbler(e,t,i){return{on(){e.addEventListener(t,i)},off(){e.removeEventListener(t,i)}}}function AttributeBackup(){var e=[];return{set(t,i,n){var o=t.getAttribute(i);e.push({element:t,currentAtribute:o,attribute:n}),t.setAttribute(i,n)},restore(){e.forEach((e=>{let{element:t,attributeName:i,attribute:n}=e;i?t.setAttribute(i,n):t.removeAttribute(i)}))}}}function EventLoopProlongableFlag(e){var t=!1,i=null;return{get:()=>t,set(n){t&&i&&e.clearTimeout(i),t=!0,i=e.setTimeout((()=>{t=!1,i=null}),n||0)}}}function ResetableFlag(){var e=!1;return{get:()=>e,set(){e=!0},reset(){e=!1}}}function isBoolean(e){return!0===e||!1===e}function isString(e){return e instanceof String||"string"==typeof e}function extendIfUndefined(e,t){for(let i in t)void 0===e[i]&&(e[i]=t[i])}function shallowClearClone(e,...t){var i={};for(let t in e){let n=e[t];null!=n&&(i[t]=n)}return t&&t.forEach((e=>{for(let t in e){let n=e[t];null!=n?i[t]=n:i.hasOwnProperty(t)&&delete i[t]}})),i}function forEachRecursion(e,t){if(!t)return;!1!==e(t.value)&&forEachRecursion(e,t.prev)}function indexRecursion(e,t){if(!t.prev)return e;indexRecursion(++e,t.prev)}function List(){var e=null,t=0;return{add(i){e?(e.next={value:i,prev:e,next:null},e=e.next):e={value:i,prev:null,next:null},t++;let n=e;return{remove:function(){n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),e==n&&(e=n.prev),t--},index:function(){return indexRecursion(0,n)}}},forEach(t){forEachRecursion(t,e)},getTail:()=>e?e.value:null,getCount:()=>t,isEmpty:()=>0==t,reset(){e=null,t=0}}}function DoublyLinkedList(e,t,i,n){var o=null,l=null,s=0;return{add(i,c){if(l)if(c){c===o&&(o=i);let l=e(c);n(i,c),t(c,i),l?(t(i,l),n(l,i)):t(i,null)}else t(i,l),n(i,null),n(l,i),l=i;else o=l=i,t(i,null),n(i,null);s++},remove(c){let a=i(c),r=e(c);r&&n(r,a),a&&t(a,r),l==c&&(l=r),o==c&&(o=a),s--},getHead:()=>o,getTail:()=>l,getCount:()=>s,isEmpty:()=>0==s,reset(){l=o=null,s=0}}}function ArrayFacade(){var e=[];return{push(t){e.push(t)},add(t,i){e.splice(i,0,t)},get:t=>e[t],getNext:(t,i)=>{let n=e.length,o=t+1;if(t<n){if(!i)return e[o];for(let t=o;t<n;t++){let n=e[t];if(i(n))return n}}},remove(t){var i=e[t];return e.splice(t,1),i},forLoop(t){for(let i=0;i<e.length;i++){t(e[i],i)}},getHead:()=>e[0],getCount:()=>e.length,isEmpty:()=>0==e.length,reset(){e=[]}}}function composeSync(...e){return()=>e.forEach((e=>{e&&e()}))}function defCall(...e){for(let t of e)if(t){if(!(t instanceof Function))return t;{let e=t();if(e)return e}}}function ObservableValue(e){var t=List();return{getValue:()=>e,setValue(i){e=i,t.forEach((e=>e(i)))},attach:e=>t.add(e),detachAll(){t.reset()}}}function ObservableLambda(e){var t=List(),i=e();return{getValue:()=>i,call(){i=e(),t.forEach((e=>e(i)))},attach:e=>t.add(e),detachAll(){t.reset()}}}function ObjectValuesEx(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t}function addStyling(e,t){var i={classes:[],styles:{}};if(t){var{classes:n,styles:o}=t;n.forEach((t=>e.classList.add(t))),i.classes=n.slice();for(let t in o)i.styles[t]=e.style[t],e.style[t]=o[t]}return i}function removeStyling(e,t){if(t){var{classes:i,styles:n}=t;i.forEach((t=>e.classList.remove(t)));for(let t in n)e.style[t]=n[t]}}function toggleStyling(e,t){var i={classes:[],styles:{}},n=!1,o=t instanceof Function;return(l,s)=>{l?!1===n?(i=addStyling(e,o?t():t),n=!0):s&&(removeStyling(e,i),i=addStyling(e,o?t():t)):!0!==n&&!0!==s||(removeStyling(e,i),n=!1)}}function extendClasses(e,t,i,n,o){if(isString(t)){if(""===t)o&&(e.classes=[]);else{let n=t.split(" ");e.classes=i(n)}return!0}return t instanceof Array&&(0==t.length?o&&(e.classes=[]):e.classes=n(t),!0)}function extend(e,t,i,n,o,l){if(!1===extendClasses(e,t,i,n,l)&&t instanceof Object){var{classes:s,styles:c}=t;extendClasses(e,s,i,n,l),c?e.styles=o(c):s||(e.styles=o(t))}}function Styling(e){var t={classes:[],styles:{}};return e&&extend(t,e,(e=>e),(e=>e.slice()),(e=>shallowClearClone(e)),!0),Object.freeze(t)}function createStyling(e,t,...i){var n={classes:[],styles:{}};if(t&&(extend(n,t,(e=>e),(e=>e.slice()),(e=>shallowClearClone(e)),!0),i)){var{classes:o,styles:l}=n,s=e?e=>extend(n,e,(e=>e),(e=>e.slice()),(e=>shallowClearClone(l,e)),!0):e=>extend(n,e,(e=>o.concat(e)),(e=>o.concat(e)),(e=>shallowClearClone(l,e)),!1);i.forEach((e=>s(e)))}return Styling(n)}function createCss(e,t){var i={};for(let n in e){let o=e[n],l=t?t[n]:void 0;i[n]=void 0===l?Styling(o):createStyling(!0,o,l)}if(t)for(let n in t)e[n]||(i[n]=Styling(t[n]));return i}function extendCss(e,t){for(let i in t){let n=t[i],o=e[i];e[i]=void 0===o?Styling(n):createStyling(!1,o,n)}}function PickDomFactoryPlugCss(e){e.pickContent="",e.pickContent_disabled="disabled",e.pickButton="close"}function PickDomFactoryPlugCssBs5(e){e.pickButton="btn-close"}function PickDomFactoryPlugCssPatch(e){e.pickContent_disabled={opacity:".65"}}function PickDomFactoryPlugCssPatchBs4(e){e.pickButton={float:"none",fontSize:"1.5em",lineHeight:".9em"}}function PickDomFactory(e,t,i,n){return{create(o,l,s){let c=n.getButtonHTML();t.createElementFromHtml(o,"<span></span>"+c);let a=o.querySelector("SPAN"),r=o.querySelector("BUTTON"),u=EventBinder();u.bind(r,"click",s),addStyling(a,e.pickContent),addStyling(r,e.pickButton);let p=toggleStyling(a,e.pickContent_disabled);return{pickDom:{pickContentElement:a,pickButtonElement:r},pickDomManagerHandlers:{updateData:function(){a.textContent=i.getText(l.option)},updateDisabled:function(){p(l.isOptionDisabled)}},dispose(){u.unbind()}}}}}function PicksDomFactory(e,t){return{create(i,n){var o=t.createElement("LI");addStyling(i,e.picks),addStyling(o,e.pickFilter);let l=toggleStyling(i,e.picks_disabled),s=toggleStyling(i,e.picks_focus),c=!1;return{picksElement:i,pickFilterElement:o,createPickElement(){var n=t.createElement("LI");return addStyling(n,e.pick),{pickElement:n,attach:e=>i.insertBefore(n,null!=e?e:o),detach:()=>i.removeChild(n)}},disable(e){l(e)},toggleFocusStyling(){s(c)},getIsFocusIn:()=>c,setIsFocusIn(e){c=e},dispose(){n||(l(!1),s(!1),o.parentNode&&o.parentNode.removeChild(o))}}}}}function PicksDomFactoryPlugCss(e){e.picks="form-control",e.pickFilter="",e.picks_disabled="disabled",e.picks_focus="focus",e.pick="badge"}function PicksDomFactoryPlugCssPatch(e){e.picks={listStyleType:"none",display:"flex",flexWrap:"wrap",height:"auto",marginBottom:"0",cursor:"text"},e.picks_disabled={backgroundColor:"#e9ecef"},e.picks_focus={borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)"}}function PicksDomFactoryPlugCssPatchBs4(e){e.pick={paddingLeft:"0",paddingRight:".5rem",paddingInlineStart:"0",paddingInlineEnd:"0.5rem",lineHeight:"1.5em"}}function ChoiceDomFactory(e,t,i){var n=function(e,t){t.textContent=i.getText(e.option)};return{create(i,o,l){let s=null,c=null,a=EventBinder();if(a.bind(i,"click",l),o.hasOwnProperty("isOptionSelected")){t.createElementFromHtml(i,'<div><input formnovalidate type="checkbox"><label></label></div>');let l=i.querySelector("DIV"),a=l.querySelector("INPUT"),r=l.querySelector("LABEL");addStyling(l,e.choiceContent),addStyling(a,e.choiceCheckBox),addStyling(r,e.choiceLabel),s={choiceElement:i,choiceContentElement:l,choiceCheckBoxElement:a,choiceLabelElement:r};let u=toggleStyling(i,e.choice_selected),p=function(){u(o.isOptionSelected),a.checked=o.isOptionSelected,(o.isOptionDisabled||o.choice.isHoverIn)&&b(o.choice.isHoverIn,!0)},d=toggleStyling(i,e.choice_disabled),g=toggleStyling(a,e.choiceCheckBox_disabled),h=toggleStyling(r,e.choiceLabel_disabled),m=toggleStyling(i,{classes:[],styles:{cursor:"default"}}),f=function(){d(o.isOptionDisabled),g(o.isOptionDisabled),h(o.isOptionDisabled);let e=o.isOptionDisabled&&!o.isOptionSelected;a.disabled=e,m(e)},b=toggleStyling(i,(()=>e.choice_disabled_hover&&!0===o.isOptionDisabled&&!1===o.isOptionSelected?e.choice_disabled_hover:e.choice_hover));c={updateData:()=>n(o,r),updateHoverIn:function(){b(o.choice.isHoverIn)},updateDisabled:f,updateSelected:p}}else{let t=toggleStyling(i,(()=>o.isOptionDisabled&&e.choice_disabled_hover?e.choice_disabled_hover:e.choice_hover)),l=function(){t(o.choice.isHoverIn)};i.innerHTML="<span></span>";let a=i.querySelector("SPAN");s={choiceElement:i,choiceContentElement:a},c={updateData:()=>n(o,a),updateHoverIn:l}}return{choiceDom:s,choiceDomManagerHandlers:c,dispose(){a.unbind()}}}}}function ChoiceDomFactoryPlugCss(e){e.choiceCheckBox_disabled="disabled",e.choiceLabel_disabled="",e.choice_disabled_hover="",e.choice_hover="hover"}function ChoiceDomFactoryPlugCssBs5(e){e.choiceCheckBox="form-check-input",e.choiceContent="form-check",e.choiceLabel="form-check-label",e.choice_selected="selected",e.choice_disabled="disabled"}function ChoiceDomFactoryPlugCssPatch(e){e.choiceCheckBox={color:"inherit",cursor:"inherit"},e.choiceContent={justifyContent:"flex-start",cursor:"inherit"},e.choiceLabel={color:"inherit",cursor:"inherit"},e.choiceLabel_disabled={opacity:".65"},e.choice_disabled_hover="bg-light",e.choice_hover="text-primary bg-light"}function ChoicesDomFactory(e,t){return{create(){var i=t.createElement("DIV"),n=t.createElement("UL");return i.appendChild(n),i.style.display="none",addStyling(i,e.choices),addStyling(n,e.choicesList),{choicesElement:i,choicesListElement:n,createChoiceElement(){var i=t.createElement("LI");return addStyling(i,e.choice),{choiceElement:i,setVisible:e=>i.style.display=e?"block":"none",attach:e=>n.insertBefore(i,e),detach:()=>n.removeChild(i)}}}}}}function ChoicesDomFactoryPlugCss(e){e.choices="dropdown-menu",e.choicesList="",e.choice=""}function ChoicesDomFactoryPlugCssPatch(e){e.choicesList={listStyleType:"none",paddingLeft:"0",paddingRight:"0",marginBottom:"0"},e.choice={classes:"px-md-2 px-1",styles:{cursor:"pointer"}}}function FilterDomFactory(e,t){return{create(i){var n=t.createElement("INPUT");addStyling(n,e.filterInput),n.setAttribute("type","search"),n.setAttribute("autocomplete","off");var o=EventBinder();return{filterInputElement:n,isEmpty:()=>!n.value,setEmpty(){n.value=""},getValue:()=>n.value,setFocus(){n.focus()},setWidth(e){n.style.width=1.3*e.length+2+"ch"},setFocusIfNotTarget(e){e!=n&&n.focus()},onInput(e){o.bind(n,"input",e)},onFocusIn(e){o.bind(n,"focusin",e)},onFocusOut(e){o.bind(n,"focusout",e)},onKeyDown(e){o.bind(n,"keydown",e)},onKeyUp(e){o.bind(n,"keyup",e)},dispose(){o.unbind(),i||n.parentNode&&n.parentNode.removeChild(n)}}}}}function FilterDomFactoryPlugCss(e){e.filterInput=""}function FilterDomFactoryPlugCssPatch(e){e.filterInput={border:"0px",height:"auto",boxShadow:"none",padding:"0",margin:"0",outline:"none",backgroundColor:"transparent",backgroundImage:"none"}}function createDefaultCssBs5(){var e={};return PickDomFactoryPlugCss(e),PickDomFactoryPlugCssBs5(e),PicksDomFactoryPlugCss(e),ChoiceDomFactoryPlugCss(e),ChoiceDomFactoryPlugCssBs5(e),ChoicesDomFactoryPlugCss(e),FilterDomFactoryPlugCss(e),e}function BsAppearancePlugin(){return{buildAspects:(e,t)=>({plugStaticDomBus:{after:"LabelForAttributePlugin",plugStaticDom:()=>{console.log("TODOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO");var{labelAspect:t,staticDom:i,configuration:n}=e,{selectElement:o}=i,{getDefaultLabel:l}=n;let s=t.getLabel;console.log("BsAppearancePlugin - new labelAspect.getLabel  "),t.getLabel=()=>{var e=s();if(e)return e;if(console.log("BsAppearancePlugin - new labelAspect.getLabel  - selectElement"),o){console.log("BsAppearancePlugin - new labelAspect.getLabel  - selectElement +");let e=l(o);return console.log({name:"BsAppearancePlugin - new labelAspect.getLabel  - selectElement +",labelElement:e}),e}}}},layout:()=>{let{validationApiAspect:i,picksDom:n,staticDom:o,updateAppearanceAspect:l,componentPropertiesAspect:s,floatingLabelAspect:c}=e,{getValidity:a,getSize:r,useCssPatch:u,css:p,composeGetSize:d}=t,g=o.selectElement,h=o.initialElement,m=!1;var f;if(c&&(m=closestByClassName(h,"form-floating"),c.isFloatingLabel=()=>m),o.selectElement?(a||(a=composeGetValidity(g)),r||(r=d(g))):(a||(a=()=>null),r||(r=()=>null)),s.getSize=r,s.getValidity=a,u){let{picks_lg:e,picks_sm:t,picks_def:i,picks_floating_def:o}=p;m&&(e=t=i=o),f=()=>updateSizeJsForAdapter(n.picksElement,e,t,i,r)}else f=()=>updateSizeForAdapter(n.picksElement,r);if(u){var b=n.toggleFocusStyling;n.toggleFocusStyling=()=>{var e=P.getValue(),t=n.getIsFocusIn();b(t),t&&(!1===e?(n.setIsFocusIn(t),addStyling(n.picksElement,p.picks_focus_invalid)):!0===e&&(n.setIsFocusIn(t),addStyling(n.picksElement,p.picks_focus_valid)))}}var A=ObservableLambda((()=>!!closestByClassName(o.initialElement,"was-validated"))),y=ObservableLambda((()=>a()));let C=null==i?void 0:i.validationApiObservable;var P=ObservableLambda((()=>A.getValue()?C.getValue():y.getValue()));return P.attach((e=>{var{validMessages:t,invalidMessages:i}=getMessagesElements(o.containerElement);updateValidity(n.picksElement,t,i,e),n.toggleFocusStyling()})),A.attach((()=>P.call())),C&&C.attach((()=>P.call())),y.attach((()=>P.call())),l.updateAppearance=composeSync(l.updateAppearance,f,P.call,y.call),{buildApi(e){e.updateSize=f,e.updateValidity=()=>y.call(),e.updateWasValidated=()=>A.call()},dispose(){A.detachAll(),P.detachAll(),y.detachAll()}}}})}}function updateValidity(e,t,i,n){!1===n?(e.classList.add("is-invalid"),e.classList.remove("is-valid"),i.map((e=>e.style.display="block")),t.map((e=>e.style.display="none"))):!0===n?(e.classList.remove("is-invalid"),e.classList.add("is-valid"),i.map((e=>e.style.display="none")),t.map((e=>e.style.display="block"))):(e.classList.remove("is-invalid"),e.classList.remove("is-valid"),i.map((e=>e.style.display="")),t.map((e=>e.style.display="")))}function updateSizeClasses(e,t){"lg"==t?(e.classList.add("form-control-lg"),e.classList.remove("form-control-sm")):"sm"==t?(e.classList.remove("form-control-lg"),e.classList.add("form-control-sm")):(e.classList.remove("form-control-lg"),e.classList.remove("form-control-sm"))}function updateSizeJsPicks(e,t,i,n,o){addStyling(e,"lg"==o?t:"sm"==o?i:n)}function updateSizeJs(e,t,i,n,o){updateSizeClasses(e,o),updateSizeJsPicks(e,t,i,n,o)}function updateSizeForAdapter(e,t){updateSizeClasses(e,t())}function updateSizeJsForAdapter(e,t,i,n,o){updateSizeJs(e,t,i,n,o())}function getMessagesElements(e){var t=siblingsAsArray(e),i=t.filter((e=>e.classList.contains("invalid-feedback")||e.classList.contains("invalid-tooltip")));return{validMessages:t.filter((e=>e.classList.contains("valid-feedback")||e.classList.contains("valid-tooltip"))),invalidMessages:i}}function composeGetValidity(e){return()=>!e.classList.contains("is-invalid")&&(!!e.classList.contains("is-valid")||null)}function BsAppearanceBs4Plugin(e){return e.pickButtonHTML='<button aria-label="Remove" tabIndex="-1" type="button"><span aria-hidden="true">&times;</span></button>',e.composeGetSize=composeGetSize,e.getDefaultLabel=getDefaultLabel,BsAppearancePlugin()}function composeGetSize(e){let t=closestByClassName(e,"input-group"),i=null;return i=t?function(){var e=null;return t.classList.contains("input-group-lg")?e="lg":t.classList.contains("input-group-sm")&&(e="sm"),e}:function(){var t=null;return e.classList.contains("custom-select-lg")||e.classList.contains("form-control-lg")?t="lg":(e.classList.contains("custom-select-sm")||e.classList.contains("form-control-sm"))&&(t="sm"),t},i}function getDefaultLabel(e){let t=null,i=closestByClassName(e,"form-group");return i&&(t=i.querySelector(`label[for="${e.id}"]`)),t}function BsAppearanceBs4CssPatchPlugin(e){let t=e.cssPatch;t.picks_def={minHeight:"calc(2.25rem + 2px)"},t.picks_lg={minHeight:"calc(2.875rem + 2px)"},t.picks_sm={minHeight:"calc(1.8125rem + 2px)"},t.picks_focus_valid={borderColor:"",boxShadow:"0 0 0 0.2rem rgba(40, 167, 69, 0.25)"},t.picks_focus_invalid={borderColor:"",boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)"}}function LabelForAttributePlugin(e){return e.label=null,{buildAspects:(e,t)=>({plugStaticDom:()=>{e.labelAspect=LabelAspect(t),e.labelNewIdAspect=LabelNewIdAspect(e)},layout:()=>{var{filterDom:t,labelAspect:i,loadAspect:n,labelNewIdAspect:o,disposeAspect:l}=e;console.log("LabelForAttributePlugin, labelNewIdAspect");var s=LabelForAttributeAspect(t,i,o,l);e.labelForAttributeAspect=s,n.load=composeSync(n.load,(()=>s.update()))}})}}function LabelAspect(e){return{getLabel:()=>defCall(e.label)}}function LabelNewIdAspect(e){return{createInputId(){let{configuration:t,staticDom:i}=e,{containerClass:n}=t,{containerElement:o}=i,l=`${n}-generated-filter-${o.id}`;return console.log("LabelNewIdAspect - "+l),l}}}function LabelForAttributeAspect(e,t,i,n){return{update(){let{filterInputElement:o}=e,l=t.getLabel();if(console.log("LabelForAttributeAspect - "),l){console.log("LabelForAttributeAspect + ");let e=l.getAttribute("for");var s=i.createInputId();o.setAttribute("id",s),l.setAttribute("for",s),e&&(n.dispose=composeSync(n.dispose,(()=>l.setAttribute("for",e))))}}}}function RtlPlugin(){return{buildAspects:(e,t)=>({layout:()=>{let{popperRtlAspect:i,staticDom:n}=e,{isRtl:o}=t,l=!1;isBoolean(o)?l=!0:o=getIsRtl(n.initialElement);var s=AttributeBackup();if(l)s.set(n.containerElement,"dir","rtl");else if(n.selectElement){var c=n.selectElement.getAttribute("dir");c&&s.set(n.containerElement,"dir",c)}return i&&(i.getIsRtl=()=>o),{dispose(){s.restore()}}}})}}function FormResetPlugin(){return{buildAspects:e=>({layout:()=>{var{staticDom:t,updateDataAspect:i,environment:n}=e,o=EventBinder();if(t.selectElement){var l=closestByTagName(t.selectElement,"FORM");l&&o.bind(l,"reset",(()=>n.window.setTimeout((()=>i.updateData()))))}return{dispose(){o.unbind()}}}})}}const defValueMissingMessage="Please select an item in the list";function ValidationApiPlugin(e){return e.getValueRequired=function(){return!1},e.valueMissingMessage="",{buildAspects:(e,t)=>({layout:()=>{var{triggerAspect:i,onChangeAspect:n,optionsAspect:o,staticDom:l,filterDom:s,updateDataAspect:c}=e;let{getIsValueMissing:a,valueMissingMessage:r,required:u,getValueRequired:p}=t;isBoolean(u)||(u=p()),r=defCall(r,(()=>getDataGuardedWithPrefix(l.initialElement,"bsmultiselect","value-missing-message")),defValueMissingMessage),a||(a=()=>{let e=0,t=o.getOptions();for(var i=0;i<t.length;i++)t[i].selected&&e++;return 0===e});var d=ObservableLambda((()=>u&&a())),g=ObservableValue(!d.getValue());return n.onChange=composeSync(d.call,n.onChange),c.updateData=composeSync(d.call,c.updateData),e.validationApiAspect=ValidationApiAspect(g),{buildApi(e){e.validationApi=ValidityApi(s.filterInputElement,d,r,(e=>g.setValue(e)),i.trigger)},dispose(){d.detachAll(),g.detachAll()}}},layoutInit:e=>{}})}}function ValidationApiAspect(e){return{validationApiObservable:e}}function ValidityApi(e,t,i,n,o){var l="",s="",c=null;function a(t,o){c=Object.freeze({valueMissing:t,customError:o,valid:!(t||o)}),s=o?l:t?i:"",e.setCustomValidity(s),n(c.valid)}a(t.getValue(),!1),t.attach((e=>{a(e,c.customError)}));var r=()=>(c.valid||o("dashboardcode.multiselect:invalid"),c.valid);return{validationMessage:s,willValidate:!0,validity:c,setCustomValidity(e){l=e,a(c.valueMissing,!!l)},checkValidity:r,reportValidity:()=>(e.reportValidity(),r())}}function HiddenOptionPlugin(){return{buildAspects:(e,t)=>({layout:()=>{let{createWrapAspect:i,isChoiceSelectableAspect:n,wrapsCollection:o,buildChoiceAspect:l,buildAndAttachChoiceAspect:s,countableChoicesListInsertAspect:c,countableChoicesList:a}=e;c.countableChoicesListInsert=(e,t)=>{if(!e.isOptionHidden){let i=o.getNext(t,(e=>!e.isOptionHidden));a.add(e,i)}};let r=s.buildAndAttachChoice;s.buildAndAttachChoice=(e,t)=>{e.isOptionHidden?buildHiddenChoice(e):r(e,t)};var u=n.isSelectable;n.isSelectable=e=>u(e)&&!e.isOptionHidden;let{getIsOptionHidden:p,options:d}=t;d?p||(p=e=>void 0!==e.hidden&&e.hidden):p||(p=e=>e.hidden);var g=i.createWrap;return i.createWrap=e=>{let t=g(e);return t.isOptionHidden=p(e),t},{buildApi(e){let t=e=>o.getNext(e,(e=>!e.isOptionHidden));e.updateOptionsHidden=()=>o.forLoop(((e,i)=>updateChoiceHidden(e,i,t,a,p,l))),e.updateOptionHidden=e=>updateChoiceHidden(o.get(e),e,t,a,p,l)}}}})}}function buildHiddenChoice(e){e.updateSelected=()=>{},e.choice.isChoiceElementAttached=!1,e.choice.choiceElement=null,e.choice.choiceElementAttach=null,e.choice.setVisible=null,e.choice.setHoverIn=null,e.choice.remove=null,e.choice.dispose=()=>{e.choice.dispose=null},e.dispose=()=>{e.choice.dispose(),e.dispose=null}}function updateChoiceHidden(e,t,i,n,o,l){let s=o(e.option);if(s!=e.isOptionHidden)if(e.isOptionHidden=s,e.isOptionHidden)n.remove(e),e.choice.remove(),buildHiddenChoice(e);else{let o=i(t);n.add(e,o),l.buildChoice(e),e.choice.choiceElementAttach(null==o?void 0:o.choice.choiceElement)}}function CssPatchPlugin(e){return e.useCssPatch=!0,{buildAspects:(t,i,n)=>{let o=null==n?void 0:n.cssPatch;if(isBoolean(o))throw new Error("BsMultiSelect: 'cssPatch' was used instead of 'useCssPatch'");return i.cssPatch=createCss(e.cssPatch,o),{plugStaticDom:()=>{i.useCssPatch&&extendCss(i.css,i.cssPatch)}}}}}function CssPatchBs4Plugin(e){var t={};return PickDomFactoryPlugCssPatch(t),PickDomFactoryPlugCssPatchBs4(t),PicksDomFactoryPlugCssPatch(t),PicksDomFactoryPlugCssPatchBs4(t),ChoiceDomFactoryPlugCssPatch(t),ChoicesDomFactoryPlugCssPatch(t),FilterDomFactoryPlugCssPatch(t),e.cssPatch=t,CssPatchPlugin(e)}function JQueryMethodsPlugin(){return{buildAspects:()=>({layout:e=>{let{staticDom:t,choicesDom:i,filterDom:n,picksList:o,picksDom:l}=e;return{buildApi(e){e.getContainer=()=>t.containerElement,e.getChoices=()=>i.choicesElement,e.getChoicesList=()=>i.choicesListElement,e.getFilterInput=()=>n.filterInputElement,e.getPicks=()=>l.picksElement,e.picksCount=()=>o.getCount()}}}})}}function OptionsApiPlugin(){return{buildAspects:e=>({layout:()=>{let{buildAndAttachChoiceAspect:t,wraps:i,wrapsCollection:n,createWrapAspect:o,createChoiceBaseAspect:l,optionsAspect:s,resetLayoutAspect:c}=e;return{buildApi(e){e.updateOptionAdded=e=>{let c=s.getOptions()[e],a=o.createWrap(c);a.choice=l.createChoiceBase(c),i.insert(e,a);t.buildAndAttachChoice(a,(()=>{var t;return null==(t=n.getNext(e,(e=>e.choice.choiceElement)))?void 0:t.choice.choiceElement}))},e.updateOptionRemoved=e=>{c.resetLayout();var t=i.remove(e);null==t.choice.remove||t.choice.remove(),null==t.dispose||t.dispose()}}}}})}}function FormRestoreOnBackwardPlugin(){return{buildAspects:e=>({layout:()=>{let{staticDom:t,environment:i,loadAspect:n,updateOptionsSelectedAspect:o}=e,l=i.window;t.selectElement&&o&&(n.load=composeSync(n.load,(function(){"complete"!=l.document.readyState&&l.setTimeout((function(){o.updateOptionsSelected()}))})))}})}}function SelectElementPlugin(){return{buildAspects:e=>({plugStaticDom:()=>{let{configuration:t,staticDomFactory:i,createElementAspect:n,componentPropertiesAspect:o,onChangeAspect:l,triggerAspect:s,optionsAspect:c,optGroupAspect:a,disposeAspect:r}=e,u=i.create;i.create=(i,p,d)=>{let{createStaticDom:g}=u(i,p,d);return{createStaticDom(u,h){console.log("createStaticDom");let m=null,f=null,b=null;if("SELECT"==u.tagName)m=u,h&&(f=closestByClassName(m,h),f&&(b=findDirectChildByTagName(f,"UL")));else if("DIV"==u.tagName){if(m=findDirectChildByTagName(u,"SELECT"),!m)return g(u,h);h&&(f=closestByClassName(u,h),f&&(b=findDirectChildByTagName(f,"UL")))}let A=!1;f||(f=n.createElement("DIV"),f.classList.add(h),A=!0);let y=!1;if(b||(b=n.createElement("UL"),y=!0),m){var C=m.style.display;m.style.display="none";var P=m.required;t.getValueRequired=function(){return P},!0===m.required&&(m.required=!1);let{getDisabled:i}=t;if(!i){var v=closestByTagName(m,"FIELDSET");o.getDisabled=v?()=>m.disabled||v.disabled:()=>m.disabled}l.onChange=composeSync((()=>s.trigger("change")),l.onChange),c.getOptions=()=>m.options,a&&(a.getOptionOptGroup=e=>e.parentNode,a.getOptGroupText=e=>e.label,a.getOptGroupId=e=>e.id),e.labelNewIdAspect?(console.log("new aspects.labelNewIdAspect"),e.labelNewIdAspect.createInputId=()=>`${h}-generated-input-${(m.id?m.id:m.name).toLowerCase()}-id`):console.log("no new aspects.labelNewIdAspect"),r.dispose=composeSync(r.dispose,(()=>{m.required=P,m.style.display=C}))}let S=i.create(),D=p.create(y),k=d.create(b,y),{choicesElement:E}=S;return{choicesDom:S,filterDom:D,picksDom:k,staticDom:{initialElement:u,containerElement:f,picksElement:b,isDisposablePicksElement:y,selectElement:m},staticManager:{appendToContainer(){A?(m.parentNode.insertBefore(f,m.nextSibling),f.appendChild(E)):m.parentNode.insertBefore(E,m.nextSibling),y&&f.appendChild(b)},dispose(){E.parentNode.removeChild(E),A&&m.parentNode.removeChild(f),y&&f.removeChild(b)}}}}}}},layout:()=>{var{loadAspect:t,environment:i}=e,n=i.window.document,o=t.loop;t.loop=function(){if("loading"!=n.readyState)o();else{n.addEventListener("DOMContentLoaded",(function e(){o(),n.removeEventListener("DOMContentLoaded",e)}))}}}})}}function SelectedOptionPlugin(){return{buildAspects:(e,t)=>({plugStaticDom:()=>{let{wrapsCollection:i}=e,{getSelected:n,setSelected:o,options:l}=t;l?(o||(o=(e,t)=>{e.selected=t}),n||(n=e=>e.selected)):(n||(n=e=>e.selected),o||(o=(e,t)=>{e.selected=t})),t.getSelected=n,t.setSelected=o,e.updateOptionsSelectedAspect=UpdateOptionsSelectedAspect(i,n)},layout:()=>{let{wrapsCollection:i,updateOptionsSelectedAspect:n,createWrapAspect:o,buildChoiceAspect:l,removePickAspect:s,resetLayoutAspect:c,picksList:a,isChoiceSelectableAspect:r,optionToggleAspect:u,createPickHandlersAspect:p,addPickAspect:d,fullMatchAspect:g,onChangeAspect:h,filterPredicateAspect:m}=e,{getSelected:f,setSelected:b}=t,A=m.filterPredicate;m.filterPredicate=(e,t)=>!e.isOptionSelected&&A(e,t);let y=l.buildChoice;function C(e,t){return()=>{e.isOptionSelected=t,e.updateSelected()}}function P(e,t,i){let n=!1;return!1!==b(e,i)&&(t(),n=!0),n}l.buildChoice=e=>{y(e),e.updateSelected=()=>{e.choice.choiceDomManagerHandlers.updateSelected(),h.onChange()},e.dispose=composeSync((()=>{e.updateSelected=null}),e.dispose)};let v=o.createWrap;o.createWrap=e=>{let t=v(e);return t.isOptionSelected=f(e),t.updateSelected=null,t},u.toggle,u.toggle=e=>P(e.option,C(e,!e.isOptionSelected),!e.isOptionSelected),g.fullMatch,g.fullMatch=e=>P(e.option,C(e,!0),!0),s.removePick,s.removePick=(e,t)=>P(e.option,C(e,!1),!1);let S=p.createPickHandlers;p.createPickHandlers=e=>{let t=S(e);return e.updateSelected=composeSync((()=>{if(e.isOptionSelected){let i=t.producePick();e.pick=i,i.dispose=composeSync(i.dispose,(()=>{e.pick=null}))}else t.removeAndDispose(),t.removeAndDispose=null}),e.updateSelected),d.addPick(e,t),t};let D=d.addPick;return d.addPick=(e,t)=>{if(e.isOptionSelected){let i=D(e,t);return e.pick=i,i.dispose=composeSync(i.dispose,(()=>{e.pick=null})),i}},{buildApi(e){e.selectAll=()=>{c.resetLayout(),i.forLoop((e=>{r.isSelectable(e)&&!e.isOptionSelected&&P(e.option,C(e,!0),!0)}))},e.deselectAll=()=>{c.resetLayout(),a.forEach((e=>e.setSelectedFalse()))},e.setOptionSelected=(e,t)=>{let n=i.get(e);return P(n.option,C(n,t),t)},e.updateOptionsSelected=()=>n.updateOptionsSelected(),e.updateOptionSelected=e=>updateChoiceSelected(i.get(e),f)}}}})}}function UpdateOptionsSelectedAspect(e,t){return{updateOptionsSelected(){e.forLoop((e=>updateChoiceSelected(e,t)))}}}function updateChoiceSelected(e,t){let i=t(e.option);i!=e.isOptionSelected&&(e.isOptionSelected=i,null==e.updateSelected||e.updateSelected())}function DisabledOptionPlugin(){return{buildAspects:(e,t)=>({layout:()=>{let{isChoiceSelectableAspect:i,createWrapAspect:n,buildChoiceAspect:o,filterPredicateAspect:l,wrapsCollection:s,optionToggleAspect:c,buildPickAspect:a}=e,{getIsOptionDisabled:r,options:u}=t;u?r||(r=e=>void 0!==e.disabled&&e.disabled):r||(r=e=>e.disabled);let p=n.createWrap;n.createWrap=e=>{let t=p(e);return t.isOptionDisabled=r(e),t.updateDisabled=null,t};let d=c.toggle;c.toggle=e=>{let t=!1;return void 0!==e.isOptionSelected?!e.isOptionSelected&&e.isOptionDisabled||(t=d(e)):e.isOptionDisabled||(t=d(e)),t};let g=i.isSelectable;i.isSelectable=e=>g(e)&&!e.isOptionDisabled;let h=l.filterPredicate;l.filterPredicate=(e,t)=>!e.isOptionDisabled&&h(e,t);let m=o.buildChoice;o.buildChoice=e=>{m(e),e.updateDisabled=e.choice.choiceDomManagerHandlers.updateDisabled,e.choice.dispose=composeSync((()=>{e.updateDisabled=null}),e.choice.dispose)};let f=a.buildPick;return a.buildPick=(e,t)=>{let i=f(e,t);i.updateDisabled=()=>i.pickDomManagerHandlers.updateDisabled(),i.dispose=composeSync(i.dispose,(()=>{i.updateDisabled=null}));let n=e.updateDisabled;return e.updateDisabled=composeSync(n,i.updateDisabled),i.dispose=composeSync(i.dispose,(()=>{e.updateDisabled=n,e.updateDisabled()})),i},{buildApi(e){e.updateOptionsDisabled=()=>s.forLoop((e=>updateChoiceDisabled(e,r))),e.updateOptionDisabled=e=>updateChoiceDisabled(s.get(e),r)}}}})}}function updateChoiceDisabled(e,t){let i=t(e.option);i!=e.isOptionDisabled&&(e.isOptionDisabled=i,null==e.updateDisabled||e.updateDisabled())}function PicksApiPlugin(){return{buildAspects:e=>({layout:()=>{let{picksList:t,createWrapAspect:i,createPickHandlersAspect:n,addPickAspect:o}=e;return{buildApi(e){e.forEachPeak=e=>t.forEach((t=>e(t.option))),e.getTailPeak=()=>{var e;return null==(e=t.getTail())?void 0:e.option},e.countPeaks=()=>t.getCount(),e.isEmptyPeaks=()=>t.isEmpty(),e.addPick=e=>{let t=i.createWrap(e);t.updateDisabled=()=>{},t.updateHidden=()=>{};let l=n.createPickHandlers(t);o.addPick(t,l)}}}}})}}function PicksPlugin(){return{buildAspects:(e,t)=>({plugStaticDom:()=>{let{configuration:t,picksList:i}=e,{picks:n}=t;if(n){let{add:e,reset:t}=i;i.add=t=>{let{remove:i,index:o}=e(t);return n.push(t),{remove:composeSync(i,(()=>{n.splice(o(),1)})),index:o}},i.reset=()=>{t(),n.length=0}}},layout:()=>{}})}}function CreatePopperPlugin(){return{buildAspects:e=>({plugStaticDom(){let{environment:t}=e;var i=PopperRtlAspect();e.popperRtlAspect=i;let{createPopper:n,Popper:o,globalPopper:l}=t,s=null,c=null;if(o)a=o,c=n=function(e,t,i){return new a(e,t,i)},s=CreateModifiersV1;else if(n)c=n,s=CreateModifiersV2;else{if(!l)throw new Error("BsMultiSelect: Popper component (https://popper.js.org) is required");l.createPopper?(c=l.createPopper,s=CreateModifiersV2):(c=n=function(e){return function(t,i,n){return new e(t,i,n)}}(l),s=CreateModifiersV1)}var a,r=CreatePopperConfigurationAspect(s);e.createPopperAspect=CreatePopperAspect(c,i,r)},attach(){let{createPopperAspect:t,filterDom:i,choicesDom:n,disposeAspect:o,staticManager:l,choicesVisibilityAspect:s,specialPicksEventsAspect:c}=e;CreatePopper_ConstrunctorAspect(t,i,n,o,l,s,c)}})}}function CreatePopper_ConstrunctorAspect(e,t,i,n,o,l,s){let c=t.filterInputElement,a=i.choicesElement,r=e.createPopper(a,c,!0);o.appendToContainer=composeSync(o.appendToContainer,r.init);var u=s.backSpace;s.backSpace=e=>{u(e),r.update()},n.dispose=composeSync(n.dispose,r.dispose),l.updatePopupLocation=composeSync(l.updatePopupLocation,(function(){r.update()}))}function PopperRtlAspect(){return{getIsRtl:()=>!1}}function CreateModifiersV1(e){return{preventOverflow:{enabled:e},hide:{enabled:!1},flip:{enabled:!1}}}function CreateModifiersV2(e){var t=[{name:"flip",options:{fallbackPlacements:["bottom"]}}];return e&&t.push({name:"preventOverflow"}),t}function CreatePopperAspect(e,t,i){return{createPopper(n,o,l){let s=null;return{init(){var c=t.getIsRtl(),a=i.createConfiguration(l,c);s=e(o,n,a)},update(){s.update()},dispose(){s.destroy()}}}}}function CreatePopperConfigurationAspect(e){return{createConfiguration(t,i){let n={placement:"bottom-start",modifiers:e(t)};return i&&(n.placement="bottom-end"),n}}}function ChoicesDynamicStylingPlugin(e){return e.useChoicesDynamicStyling=!1,e.choicesDynamicStyling=choicesDynamicStyling,e.minimalChoicesDynamicStylingMaxHeight=20,{buildAspects:(e,t)=>({layout:()=>{let{choicesDynamicStyling:i,useChoicesDynamicStyling:n}=t;if(n){let{choicesVisibilityAspect:t,specialPicksEventsAspect:n}=e;var o=t.setChoicesVisible;t.setChoicesVisible=function(t){t&&i(e),o(t)};var l=n.backSpace;n.backSpace=t=>{l(t),i(e)}}}})}}function choicesDynamicStyling(e){let{configuration:t,environment:i,choicesDom:n,navigateAspect:o}=e,l=i.window,s=n.choicesElement,c=t.minimalChoicesDynamicStylingMaxHeight;var a=l.document.getElementsByTagName("body")[0],r=l.document.documentElement,u=(l.innerHeight||r.clientHeight||a.clientHeight)-s.parentNode.getBoundingClientRect().top,p=Math.max(c,Math.round(.85*u));if(s.style.setProperty("max-height",p+"px"),s.style.setProperty("overflow-y","auto"),!n.ChoicesDynamicStylingPlugin_scrollHandle){n.ChoicesDynamicStylingPlugin_scrollHandle=!0;var d=o.navigate;o.navigate=function(e){var t=d(e);return null!=t&&null!=t.choice&&null!=t.choice.choiceElement&&t.choice.choiceElement.scrollIntoView(!1),t}}}function HighlightPlugin(e){return e.useHighlighting=!1,{buildAspects:(e,t)=>({plugStaticDom:()=>{t.useHighlighting&&(e.highlightAspect=HighlightAspect())},plugStaticDomFactories:()=>{var{choiceDomFactory:t,optionPropertiesAspect:i}=e,n=t.create;t.create=(t,o,l)=>{var s=n(t,o,l);return s.choiceDomManagerHandlers.updateHighlighted=()=>{var n=i.getText(o.option),l=e.highlightAspect.getHighlighter();l?l(t,s.choiceDom,n):t.textContent=n},s}},layout:()=>{let{highlightAspect:t,filterManagerAspect:i,buildChoiceAspect:n}=e;if(t){let e=i.processEmptyInput;i.processEmptyInput=function(){t.reset(),e()};let o=i.setFilter;i.setFilter=function(e){t.set(e),o(e)};let l=n.buildChoice;n.buildChoice=function(e){l(e);let t=e.choice.setVisible;e.choice.setVisible=function(i){t(i),e.choice.choiceDomManagerHandlers.updateHighlighted()}}}}})}}function CustomChoiceStylingsPlugin(e){return e.customChoiceStylings=null,{buildAspects:(e,t)=>({plugStaticDom:()=>{let{choiceDomFactory:i}=e;ExtendChoiceDomFactory(i,CustomChoiceStylingsAspect(t.customChoiceStylings))}})}}function ExtendChoiceDomFactory(e,t){let i=e.create;e.create=function(e,n,o){var l=i(e,n,o);return t.customize(n,l.choiceDom,l.choiceDomManagerHandlers),l}}function CustomChoiceStylingsAspect(e){return{customize(t,i,n){if(e){var o=e(i,t.option);if(o){function l(e){return function(){e({isOptionSelected:t.isOptionSelected,isOptionDisabled:t.isOptionDisabled,isHoverIn:t.choice.isHoverIn})}}n.updateHoverIn&&o.updateHoverIn&&(n.updateHoverIn=composeSync(n.updateHoverIn,l(o.updateHoverIn))),n.updateSelected&&o.updateSelected&&(n.updateSelected=composeSync(n.updateSelected,l(o.updateSelected))),n.updateDisabled&&o.updateDisabled&&(n.updateDisabled=composeSync(n.updateDisabled,l(o.updateDisabled))),n.updateHighlighted&&o.updateHighlighted&&(n.updateHighlighted=composeSync(n.updateHighlighted,l(o.updateHighlighted)))}}}}}function CustomPickStylingsPlugin(e){return e.customPickStylings=null,{buildAspects:(e,t)=>({plugStaticDom:()=>{let{componentPropertiesAspect:i,pickDomFactory:n}=e;ExtendPickDomFactory(n,CustomPickStylingsAspect(i,t.customPickStylings))}})}}function ExtendPickDomFactory(e,t){let i=e.create;e.create=function(e,n,o){var l=i(e,n,o);return t.customize(n,l.pickDom,l.pickDomManagerHandlers),l}}function CustomPickStylingsAspect(e,t){return{customize(i,n,o){if(t){var l=t(n,i.option);if(l){function s(t){return function(){t({isOptionDisabled:i.isOptionDisabled,isComponentDisabled:e.getDisabled()})}}o.updateDisabled&&l.updateDisabled&&(o.updateDisabled=composeSync(o.updateDisabled,s(l.updateDisabled))),o.updateComponentDisabled&&l.updateComponentDisabled&&(o.updateComponentDisabled=composeSync(o.updateComponentDisabled,s(l.updateComponentDisabled)))}}}}}function UpdateAppearancePlugin(){return{buildAspects:e=>({layout:()=>{var{updateAppearanceAspect:t,updateAspect:i,loadAspect:n}=e;return i.update=composeSync(i.update,(()=>t.updateAppearance())),n.load=composeSync(n.load,(()=>t.updateAppearance())),{buildApi(e){e.updateAppearance=()=>t.updateAppearance()}}},plugStaticDom:()=>{e.updateAppearanceAspect=UpdateAppearanceAspect()}})}}function UpdateAppearanceAspect(){return{updateAppearance(){}}}function DisableComponentPlugin(){return{buildAspects:e=>({plugStaticDomFactories:()=>{var{pickDomFactory:t,componentPropertiesAspect:i}=e,n=t.create;t.create=(e,t,o)=>{var l=n(e,t,o);return l.pickDomManagerHandlers.updateComponentDisabled=()=>{l.pickDom.pickButtonElement.disabled=i.getDisabled()},l}},layout:()=>{var{updateAppearanceAspect:t,picksList:i,picksDom:n,componentPropertiesAspect:o,picksElementAspect:l}=e,s=l.onClick,c=e=>{i.forEach((e=>e.pickDomManagerHandlers.updateComponentDisabled())),n.disable(e)};let a;function r(){let e=o.getDisabled();a!==e&&(a=e,c(e))}return l.onClick=e=>{c=t=>{i.forEach((e=>e.pickDomManagerHandlers.updateComponentDisabled())),n.disable(t),t?l.onClickUnbind():s(e)}},t.updateAppearance=composeSync(t.updateAppearance,r),{buildApi(e){e.updateDisabled=r}}}})}}function PlaceholderPlugin(){return{buildAspects:(e,t)=>({layout:()=>{let{staticManager:i,picksList:n,picksDom:o,filterDom:l,staticDom:s,updateDataAspect:c,resetFilterListAspect:a,filterManagerAspect:r,environment:u}=e,p=u.isIE11,{placeholder:d,css:g}=t,{picksElement:h}=o,m=l.filterInputElement;function f(e){m.placeholder=e}if(p){var b=ResetableFlag();let e=PlaceholderStopInputAspect(b);var A=f;f=function(e){b.set(),A(e)};var y=l.onInput;l.onInput=t=>{y((()=>{e.get()?e.reset():t()}))}}function C(e){m.style.width=e?"100%":"2ch"}d||(d=getDataGuardedWithPrefix(s.initialElement,"bsmultiselect","placeholder"));var P=toggleStyling(m,g.filterInput_empty);function v(e){e?(f(d||""),h.style.display="block"):(f(""),h.style.display="flex"),P(e),C(e)}v(!0);let S=()=>n.isEmpty()&&l.isEmpty();function D(){v(S())}function k(){C(S())}let E=o.disable;o.disable=e=>{!function(e){m.disabled=e}(e),E(e)},i.appendToContainer=composeSync(i.appendToContainer,k),r.processEmptyInput=composeSync(k,r.processEmptyInput),a.forceResetFilter=composeSync(a.forceResetFilter,D);let L=n.add;n.add=e=>{let t=L(e);return 1==n.getCount()&&(l.isEmpty()?(f(""),h.style.display="flex",P(!1),m.style.width="2ch"):h.style.display="flex"),e.dispose=composeSync(e.dispose,(function(){S()&&v(!0)})),t},c.updateData=composeSync(c.updateData,D)}})}}function PlaceholderStopInputAspect(e){return{get:()=>e.get(),reset:()=>e.reset()}}function PlaceholderCssPatchPlugin(e){e.cssPatch.filterInput_empty="form-control"}function FloatingLabelPlugin(e){return e.css.label_floating_lifted="floating-lifted",e.css.picks_floating_lifted="floating-lifted",{buildAspects:(e,t)=>({plugStaticDom:e=>{e.floatingLabelAspect=FloatingLabelAspect()},layout:()=>{let{picksList:i,picksDom:n,filterDom:o,updateDataAspect:l,resetFilterListAspect:s,floatingLabelAspect:c,labelAspect:a}=e,{css:r}=t;if(c.isFloatingLabel()){let e=a.getLabel(),t=n.picksElement;var u=toggleStyling(e,r.label_floating_lifted),p=toggleStyling(t,r.picks_floating_lifted);let c=()=>i.isEmpty()&&o.isEmpty()&&!n.getIsFocusIn();function d(){!function(e){u(e),p(e)}(!c())}d(),s.forceResetFilter=composeSync(s.forceResetFilter,d);let h=i.add;i.add=e=>{let t=h(e);return 1==i.getCount()&&d(),e.dispose=composeSync(e.dispose,(()=>{0==i.getCount()&&d()})),t};var g=n.toggleFocusStyling;n.toggleFocusStyling=()=>{var e=n.getIsFocusIn();g(e),d()},l.updateData=composeSync(l.updateData,d)}}})}}function FloatingLabelAspect(){return{isFloatingLabel(){}}}function WarningCssPatchPlugin(e){e.cssPatch.warning={paddingLeft:".25rem",paddingRight:".25rem",zIndex:4,fontSize:"small",backgroundColor:"var(--bs-warning)"}}const defNoResultsWarningMessage="No results found";function WarningPlugin(e){return e.noResultsWarning="No results found",e.isNoResultsWarningEnabled=!1,{buildAspects:(e,t)=>({layout:()=>{let{choicesDom:i,createElementAspect:n,staticManager:o,afterInputAspect:l,filterManagerAspect:s,resetLayoutAspect:c}=e,{css:a,noResultsWarning:r}=t;if(t.isNoResultsWarningEnabled){let t=WarningAspect(i,n,o,a);e.warningAspect=t,ExtendAfterInputAspect(l,t,s,r),c.resetLayout=composeSync((()=>t.hide()),c.resetLayout)}},attach:()=>{let{createPopperAspect:t,filterDom:i,warningAspect:n,staticManager:o,disposeAspect:l}=e;if(n){let e=i.filterInputElement,c=t.createPopper(n.warningElement,e,!1);o.appendToContainer=composeSync(o.appendToContainer,c.init);var s=n.show;n.show=e=>{c.update(),s(e)},l.dispose=composeSync(l.dispose,c.dispose)}}})}}function ExtendAfterInputAspect(e,t,i,n){var o=e.visible;e.visible=(e,i)=>{t.hide(),o(e,i)};var l=e.notVisible;e.notVisible=e=>{l(e),i.getFilter()?t.show(n):t.hide()}}function WarningAspect(e,t,i,n){let o=e.choicesElement;var l=t.createElement("DIV"),s=i.appendToContainer;return i.appendToContainer=function(){s(),o.parentNode.insertBefore(l,o.nextSibling)},l.style.display="none",addStyling(l,n.warning),{warningElement:l,show(e){l.style.display="block",l.innerHTML=e},hide(){l.style.display="none",l.innerHTML=""}}}function WarningBs4Plugin(e){return e.css.warning="alert-warning bg-warning",WarningPlugin(e)}let Bs4PluginSet={BsAppearanceBs4Plugin:BsAppearanceBs4Plugin,WarningBs4Plugin:WarningBs4Plugin,CssPatchBs4Plugin:CssPatchBs4Plugin,BsAppearanceBs4CssPatchPlugin:BsAppearanceBs4CssPatchPlugin},multiSelectPlugins={SelectElementPlugin:SelectElementPlugin,LabelForAttributePlugin:LabelForAttributePlugin,HiddenOptionPlugin:HiddenOptionPlugin,ValidationApiPlugin:ValidationApiPlugin,UpdateAppearancePlugin:UpdateAppearancePlugin,DisableComponentPlugin:DisableComponentPlugin,FormResetPlugin:FormResetPlugin,CreatePopperPlugin:CreatePopperPlugin,WarningCssPatchPlugin:WarningCssPatchPlugin,RtlPlugin:RtlPlugin,PlaceholderPlugin:PlaceholderPlugin,PlaceholderCssPatchPlugin:PlaceholderCssPatchPlugin,FloatingLabelPlugin:FloatingLabelPlugin,OptionsApiPlugin:OptionsApiPlugin,JQueryMethodsPlugin:JQueryMethodsPlugin,SelectedOptionPlugin:SelectedOptionPlugin,FormRestoreOnBackwardPlugin:FormRestoreOnBackwardPlugin,DisabledOptionPlugin:DisabledOptionPlugin,PicksApiPlugin:PicksApiPlugin,HighlightPlugin:HighlightPlugin,ChoicesDynamicStylingPlugin:ChoicesDynamicStylingPlugin,CustomPickStylingsPlugin:CustomPickStylingsPlugin,CustomChoiceStylingsPlugin:CustomChoiceStylingsPlugin},picksPlugins={PicksPlugin:PicksPlugin,LabelForAttributePlugin:LabelForAttributePlugin,ValidationApiPlugin:ValidationApiPlugin,UpdateAppearancePlugin:UpdateAppearancePlugin,DisableComponentPlugin:DisableComponentPlugin,CreatePopperPlugin:CreatePopperPlugin,WarningCssPatchPlugin:WarningCssPatchPlugin,RtlPlugin:RtlPlugin,PlaceholderPlugin:PlaceholderPlugin,PlaceholderCssPatchPlugin:PlaceholderCssPatchPlugin,FloatingLabelPlugin:FloatingLabelPlugin,OptionsApiPlugin:OptionsApiPlugin,JQueryMethodsPlugin:JQueryMethodsPlugin,PicksApiPlugin:PicksApiPlugin,HighlightPlugin:HighlightPlugin,ChoicesDynamicStylingPlugin:ChoicesDynamicStylingPlugin,CustomPickStylingsPlugin:CustomPickStylingsPlugin,CustomChoiceStylingsPlugin:CustomChoiceStylingsPlugin},allPlugins=shallowClearClone(multiSelectPlugins,{PicksPlugin:PicksPlugin}),utilities={composeSync:composeSync,EventBinder:EventBinder,addStyling:addStyling,toggleStyling:toggleStyling};function StaticDomFactory(e){return{create(t,i,n){let o=t.create();return{createStaticDom(t,l){function s(e){throw t.style.backgroundColor="red",t.style.color="white",new Error(e)}let c,a,r=!1;"DIV"==t.tagName?(c=t,c.classList.contains(l)||(c.classList.add(l),r=!0),a=findDirectChildByTagName(c,"UL")):"UL"==t.tagName?(a=t,c=closestByClassName(t,l),c||s("BsMultiSelect: defined on UL but precedentant DIV for container not found; class="+l)):"INPUT"==t.tagName&&s("BsMultiSelect: INPUT element is not supported");let u=!1;a||(a=e.createElement("UL"),u=!0);let p=i.create(u),d=n.create(a,u);return{choicesDom:o,filterDom:p,picksDom:d,staticDom:{initialElement:t,containerElement:c,picksElement:a,isDisposablePicksElement:u},staticManager:{appendToContainer(){c.appendChild(o.choicesElement),u&&c.appendChild(a)},dispose(){c.removeChild(o.choicesElement),r&&c.classList.remove(l),u&&c.removeChild(a)}}}}}}}}function CreateElementAspect(e,t){return{createElement:e,createElementFromHtml:t}}function ChoicesVisibilityAspect(e){return{isChoicesVisible:()=>"none"!=e.style.display,setChoicesVisible(t){e.style.display=t?"block":"none"},updatePopupLocation(){}}}function SpecialPicksEventsAspect(){return{backSpace(e){e.setSelectedFalse()}}}function TriggerAspect(e,t){return{trigger:i=>{t(e,i)}}}function OnChangeAspect(e,t){return{onChange(){e.trigger(t)}}}function ComponentPropertiesAspect(e){return{getDisabled:e}}function OptionsAspect(e){return{getOptions:()=>e}}function OptionPropertiesAspect(e){return e||(e=e=>e.text),{getText:e}}function ChoicesEnumerableAspect(e,t){return{forEach(i){let n=e.getHead();for(;n;)i(n),n=t(n)}}}function NavigateManager(e,t,i){return{navigate:(n,o)=>n?o?i(o):e.getHead():o?t(o):e.getTail(),getCount:()=>e.getCount(),getHead:()=>e.getHead()}}function FilterPredicateAspect(){return{filterPredicate:(e,t)=>e.choice.searchText.indexOf(t)>=0}}function FilterManagerAspect(e,t,i,n,o){let l=!0,s="";return{getNavigateManager:()=>l?e:t,processEmptyInput(){l=!0,s="",n.forEach((e=>{e.choice.setVisible(!0)}))},getFilter:()=>s,setFilter(e){l=!1,s=e,i.reset(),n.forEach((t=>{t.choice.filteredPrev=t.choice.filteredNext=null;var n=o.filterPredicate(t,e);n&&i.add(t),t.choice.setVisible(n)}))}}}function BuildAndAttachChoiceAspect(e){return{buildAndAttachChoice(t,i){e.buildChoice(t),t.choice.choiceElementAttach(null==i?void 0:i())}}}function BuildChoiceAspect(e,t,i){return{buildChoice(n){var{choiceElement:o,setVisible:l,attach:s,detach:c}=e.createChoiceElement();n.choice.choiceElement=o,n.choice.choiceElementAttach=s,n.choice.isChoiceElementAttached=!0;let{dispose:a,choiceDom:r,choiceDomManagerHandlers:u}=t.create(o,n,(()=>i.choiceClick(n)));n.choice.choiceDom=r,u.updateData(),u.updateSelected&&u.updateSelected(),u.updateDisabled&&u.updateDisabled(),n.choice.choiceDomManagerHandlers=u,n.choice.remove=()=>{c()},n.choice.isFilteredIn=!0,n.choice.setHoverIn=e=>{n.choice.isHoverIn=e,u.updateHoverIn()},n.choice.setVisible=e=>{n.choice.isFilteredIn=e,l(n.choice.isFilteredIn)},n.choice.dispose=()=>{n.choice.choiceDomManagerHandlers=null,a(),n.choice.choiceElement=null,n.choice.choiceDom=null,n.choice.choiceElementAttach=null,n.choice.isChoiceElementAttached=!1,n.choice.remove=null,n.choice.setVisible=null,n.choice.setHoverIn=null,n.choice.dispose=null},n.dispose=()=>{n.choice.dispose(),n.dispose=null}}}}function OptionAttachAspect(e,t,i,n){return{attach(o){let l=e.createWrap(o);l.choice=t.createChoiceBase(o),n.push(l),i.buildAndAttachChoice(l)}}}function OptionsLoopAspect(e,t){return{loop(){let i=e.getOptions();for(let e=0;e<i.length;e++){let n=i[e];t.attach(n)}}}}function UpdateDataAspect(e,t,i,n,o){return{updateData(){o.resetLayout(),e.choicesListElement.innerHTML="",t.clear(),i.forEach((e=>e.dispose())),i.reset(),n.loop()}}}function UpdateAspect(e){return{update(){e.updateData()}}}function IsChoiceSelectableAspect(){return{isSelectable:e=>!0}}function ChoiceClickAspect(e,t){return{choiceClick:i=>{e.toggle(i),t.setFocus()}}}function OptionToggleAspect(e,t){return{toggle:i=>{let n=e.createPickHandlers(i);return t.addPick(i,n),!0}}}function AddPickAspect(){return{addPick:(e,t)=>t.producePick()}}function FullMatchAspect(e,t){return{fullMatch(i){let n=e.createPickHandlers(i);return t.addPick(i,n),!0}}}function RemovePickAspect(){return{removePick(e,t){t.dispose()}}}function ProducePickAspect(e,t,i){return{producePick(n,o){let l=i.buildPick(n,(e=>o.removeOnButton(e))),s=()=>t.removePick(n,l);o.removeOnButton=s,l.pickElementAttach();let{remove:c}=e.add(l);return l.setSelectedFalse=s,l.wrap=n,l.dispose=composeSync(c,(()=>{l.setSelectedFalse=null,l.wrap=null}),l.dispose),o.removeAndDispose=()=>l.dispose(),l}}}function CreatePickHandlersAspect(e){return{createPickHandlers(t){let i={producePick:(null,()=>e.producePick(t,i)),removeAndDispose:null,removeOnButton:null};return i}}}function CreateChoiceBaseAspect(e){return{createChoiceBase:t=>({filteredPrev:null,filteredNext:null,searchText:e.getText(t).toLowerCase().trim(),isHoverIn:!1,isFilteredIn:!1,setVisible:null,setHoverIn:null,isChoiceElementAttached:!1,choiceElement:null,choiceDom:null,choiceElementAttach:null,itemPrev:null,itemNext:null,remove:null,dispose:null})}}function CreateWrapAspect(){return{createWrap:e=>({option:e})}}function HoveredChoiceAspect(){let e=null;return{getHoveredChoice:()=>e,setHoveredChoice:t=>{e=t},resetHoveredChoice(){e&&(e.choice.setHoverIn(!1),e=null)}}}function NavigateAspect(e,t){return{hoverIn(t){e.resetHoveredChoice(),e.setHoveredChoice(t),t.choice.setHoverIn(!0)},navigate:i=>t(i,e.getHoveredChoice())}}function Wraps(e,t,i,n){return{push:t=>push(t,e,n),insert:(t,i)=>insert(t,i,e,n),remove:t=>{var n=e.remove(t);return i(n),n},clear:()=>{e.reset(),t()},dispose:()=>e.forLoop((e=>e.dispose()))}}function push(e,t,i){t.push(e),i(e)}function insert(e,t,i,n){e>=i.getCount()?push(t,i,n):(i.add(t,e),n(t,e))}function PickButtonAspect(e){return{getButtonHTML:()=>e}}function BuildPickAspect(e,t){return{buildPick(i,n){let{pickElement:o,attach:l,detach:s}=e.createPickElement(),{dispose:c,pickDom:a,pickDomManagerHandlers:r}=t.create(o,i,n);r.updateData(),r.updateDisabled&&r.updateDisabled(),r.updateComponentDisabled&&r.updateComponentDisabled();let u={pickDom:a,pickDomManagerHandlers:r,pickElementAttach:l,dispose:()=>{s(),c(),u.pickDomManagerHandlers=null,u.pickDom=a,u.pickElementAttach=null,u.dispose=null}};return u}}}function InputAspect(e,t,i){return{processInput(){let n=e.getValue(),o=n.trim();var l=!1;if(""==o?l=!0:t.setFilter(o.toLowerCase()),!l&&1==t.getNavigateManager().getCount()){let n=t.getNavigateManager().getHead(),o=t.getFilter();if(n.choice.searchText==o){i.fullMatch(n)&&(e.setEmpty(),l=!0)}}return{filterInputValue:n,isEmpty:l}}}}function ResetFilterListAspect(e,t){return{forceResetFilter(){e.setEmpty(),t.processEmptyInput()}}}function ResetFilterAspect(e,t){return{resetFilter(){e.isEmpty()||t.forceResetFilter()}}}function FocusInAspect(e){return{setFocusIn(t){e.setIsFocusIn(t),e.toggleFocusStyling()}}}function MultiSelectInlineLayoutAspect(e,t,i,n,o,l,s,c,a,r,u,p,d,g,h,m,f,b){let A=i.choicesElement;var y=e.window,C=y.document,P=EventLoopProlongableFlag(y),v=!1;function S(){v=!1}var D=function(){v=!0},k=EventTumbler(A,"mousedown",D),E=EventTumbler(C,"mouseup",L),L=function(e){A==e.target?t.setFocus():containsAndSelf(A,e.target)||m.containsAndSelf(e.target)||(h.resetLayout(),c.setFocusIn(!1))};function F(){n.isChoicesVisible()||(n.updatePopupLocation(),P.set(),n.setChoicesVisible(!0),A.scrollTop=0,k.on(),E.on())}function I(){w(),o.resetHoveredChoice(),n.isChoicesVisible()&&(n.setChoicesVisible(!1),k.off(),E.off())}var O=null;function B(){D(),y.setTimeout((()=>S()))}function M(e){return t=>{!function(e,t){y.setTimeout((()=>e())),O=t}(e,t),h.resetLayout()}}let H=EventBinder();var w=()=>{H.unbind()},x=e=>{e.choice.isHoverIn||l.hoverIn(e),w()};function V(e){let t=l.navigate(e);t&&(P.set(400),l.hoverIn(t),F())}var N=e=>{let i=e.which;var o=t.isEmpty();if(([13,27].indexOf(i)>=0||9==i&&!o)&&e.preventDefault(),[38,40].indexOf(i)>=0&&e.preventDefault(),8==i){if(o){let e=u.getTail();e&&d.backSpace(e)}}else 9==i?o&&I():27==i?o&&!n.isChoicesVisible()||e.stopPropagation():38==i?V(!1):40==i&&V(!0)},_=e=>{let t=e.which;9==t?n.isChoicesVisible()?V(!0):s.getNavigateManager().getCount()>0&&F():13==t?n.isChoicesVisible()?function(){let e=o.getHoveredChoice();e&&a.toggle(e)&&h.resetLayout()}():s.getNavigateManager().getCount()>0&&F():27==t&&h.resetLayout()};function T(e){t.setFocusIfNotTarget(e.target),O!=e&&(n.isChoicesVisible()?I():s.getNavigateManager().getCount()>0&&F()),O=null}return{init(){t.onFocusIn((()=>c.setFocusIn(!0))),t.onFocusOut((()=>{v||(h.resetLayout(),c.setFocusIn(!1)),S()})),t.onInput((()=>{let{filterInputValue:e,isEmpty:i}=p.processInput();i?s.processEmptyInput():t.setWidth(e),P.set(),function(){let e=s.getNavigateManager().getCount();e>0?f.visible(F,e):f.notVisible(I)}()})),t.onKeyDown(N),t.onKeyUp(_),m.onClick(T),m.onMousedown(B),h.resetLayout=composeSync(I,h.resetLayout);let e=r.createPickHandlers;r.createPickHandlers=t=>{let i=e(t);return i.removeOnButton=M(i.removeOnButton),i};let i=g.buildChoice;g.buildChoice=e=>{i(e);let t=r.createPickHandlers(e);e.choice.remove=composeSync(e.choice.remove,(()=>{t.removeAndDispose&&(t.removeAndDispose(),t.removeAndDispose=null)}));let n=function(e){let t=e.choice.choiceElement;var i=EventBinder();return i.bind(t,"mouseover",(()=>{P.get()?(w(),H.bind(t,"mousemove",(()=>x(e))),H.bind(t,"mousedown",(()=>x(e)))):e.choice.isHoverIn||l.hoverIn(e)})),i.bind(t,"mouseleave",(()=>{P.get()||o.resetHoveredChoice()})),i.unbind}(e);e.choice.dispose=composeSync(n,e.choice.dispose)},b.dispose=composeSync(b.dispose,w,(()=>m.unbind()))}}}function ResetLayoutAspect(e){return{resetLayout:e}}function LoadAspect(e){return{load(){e.loop()}}}function CountableChoicesListInsertAspect(e,t){return{countableChoicesListInsert(i,n){let o=t.getNext(n);e.add(i,o)}}}function PicksElementAspect(e){var t=EventBinder(),i=EventBinder();return{containsAndSelf:t=>containsAndSelf(e,t),onClickUnbind(){t.unbind()},onClick(i){t.bind(e,"click",i)},onMousedown(t){i.bind(e,"mousedown",t)},unbind(){i.unbind(),t.unbind()}}}function AfterInputAspect(e,t,i,n){return{visible(o,l){let s=i.isChoicesVisible();s||o(),1==l?t.hoverIn(e.getNavigateManager().getHead()):s&&n.resetHoveredChoice()},notVisible(e){i.isChoicesVisible()&&e()}}}function BsMultiSelect(e,t,i,n,o){var{window:l}=t;t.isIE11=!!l.MSInputMethodContext&&!!document.documentMode;let{containerClass:s,css:c,getDisabled:a,options:r,getText:u}=n,p={dispose(){}},d=TriggerAspect(e,t.trigger),g=OnChangeAspect(d,"dashboardcode.multiselect:change"),h=ComponentPropertiesAspect(null!=a?a:()=>!1),m=OptionsAspect(r),f=OptionPropertiesAspect(u),b=IsChoiceSelectableAspect(),A=CreateWrapAspect(),y=CreateChoiceBaseAspect(f),C=AddPickAspect(),P=RemovePickAspect(),v=CreateElementAspect((e=>l.document.createElement(e)),((e,t)=>e.innerHTML=t)),S=ArrayFacade(),D=DoublyLinkedList((e=>e.choice.itemPrev),((e,t)=>e.choice.itemPrev=t),(e=>e.choice.itemNext),((e,t)=>e.choice.itemNext=t)),k=CountableChoicesListInsertAspect(D,S),E=ChoicesEnumerableAspect(D,(e=>e.choice.itemNext)),L=DoublyLinkedList((e=>e.choice.filteredPrev),((e,t)=>e.choice.filteredPrev=t),(e=>e.choice.filteredNext),((e,t)=>e.choice.filteredNext=t)),F=NavigateManager(D,(e=>e.choice.itemPrev),(e=>e.choice.itemNext)),I=NavigateManager(L,(e=>e.choice.filteredPrev),(e=>e.choice.filteredNext)),O=FilterPredicateAspect(),B=FilterManagerAspect(F,I,L,E,O),M=HoveredChoiceAspect(),H=NavigateAspect(M,((e,t)=>B.getNavigateManager().navigate(e,t))),w=List(),x=Wraps(S,(()=>D.reset()),(e=>D.remove(e)),((e,t)=>k.countableChoicesListInsert(e,t))),V=PicksDomFactory(c,v),N=FilterDomFactory(c,v),_=ChoicesDomFactory(c,v),T=PickDomFactory(c,v,f,PickButtonAspect(n.pickButtonHTML)),R=ChoiceDomFactory(c,v,f);i.plugStaticDomFactories({environment:t,configuration:n,disposeAspect:p,triggerAspect:d,onChangeAspect:g,componentPropertiesAspect:h,countableChoicesList:D,countableChoicesListInsertAspect:k,optionPropertiesAspect:f,createElementAspect:v,wrapsCollection:S,choicesEnumerableAspect:E,filteredChoicesList:L,filterPredicateAspect:O,isChoiceSelectableAspect:b,hoveredChoiceAspect:M,navigateAspect:H,choicesDomFactory:_,filterDomFactory:N,picksDomFactory:V,pickDomFactory:T,choiceDomFactory:R,filterManagerAspect:B,optionsAspect:m,createWrapAspect:A,createChoiceBaseAspect:y,picksList:w,wraps:x,addPickAspect:C,removePickAspect:P});let W=StaticDomFactory(v);i.plugStaticDom({staticDomFactory:W});let{createStaticDom:U}=W.create(_,N,V),{staticDom:z,filterDom:q,picksDom:G,staticManager:$,choicesDom:J}=U(e,s),j=SpecialPicksEventsAspect(),Q=ChoicesVisibilityAspect(J.choicesElement),K=ResetFilterListAspect(q,B),X=ResetFilterAspect(q,K),Y=FocusInAspect(G),Z=BuildPickAspect(G,T),ee=ProducePickAspect(w,P,Z),te=CreatePickHandlersAspect(ee),ie=OptionToggleAspect(te,C),ne=FullMatchAspect(te,C),oe=InputAspect(q,B,ne),le=ChoiceClickAspect(ie,q),se=BuildChoiceAspect(J,R,le),ce=BuildAndAttachChoiceAspect(se),ae=ResetLayoutAspect((()=>X.resetFilter())),re=OptionAttachAspect(A,y,ce,x),ue=OptionsLoopAspect(m,re),pe=UpdateDataAspect(J,x,w,ue,ae),de=UpdateAspect(pe),ge=LoadAspect(ue),he=PicksElementAspect(G.picksElement),me=AfterInputAspect(B,H,Q,M),fe=MultiSelectInlineLayoutAspect(t,q,J,Q,M,H,B,Y,ie,te,w,oe,j,se,ae,he,me,p);i.layout({staticDom:z,picksDom:G,choicesDom:J,filterDom:q,resetLayoutAspect:ae,choicesVisibilityAspect:Q,staticManager:$,buildChoiceAspect:se,optionToggleAspect:ie,choiceClickAspect:le,buildAndAttachChoiceAspect:ce,optionsLoopAspect:ue,optionAttachAspect:re,buildPickAspect:Z,producePickAspect:ee,createPickHandlersAspect:te,inputAspect:oe,resetFilterListAspect:K,resetFilterAspect:X,specialPicksEventsAspect:j,resetLayoutAspect:ae,focusInAspect:Y,loadAspect:ge,updateDataAspect:pe,updateAspect:de,fullMatchAspect:ne,picksElementAspect:he,afterInputAspect:me,multiSelectInlineLayoutAspect:fe}),fe.init(),i.attach();let be={component:"BsMultiSelect.api"};return i.buildApi(be),be.dispose=composeSync(ae.resetLayout,(()=>{p.dispose()}),i.dispose,(()=>{w.forEach((e=>e.dispose()))}),x.dispose,$.dispose,G.dispose,q.dispose),be.updateData=()=>{pe.updateData()},be.update=()=>{de.update()},null==o||o(be,i.aspects),G.pickFilterElement.appendChild(q.filterInputElement),G.picksElement.appendChild(G.pickFilterElement),$.appendToContainer(),ge.load(),be}function ComposePluginManagerFactory(e,t){let i=[];for(let n=0;n<e.length;n++){let o=e[n].value(t);o&&i.push({key:e[n].key,value:o})}return(e,t)=>{let n=[],o={};for(let l=0;l<i.length;l++){let s=i[l].value.buildAspects(o,e,t);s&&n.push({key:i[l].key,value:s})}return PluginManager(o,n)}}function PluginManager(e,t){let i=[],n=[];return{aspects:e,buildApi(e){for(let l=0;l<i.length;l++){var t,o;let s=null==(t=(o=i[l]).buildApi)?void 0:t.call(o,e);s&&n.push(s)}},dispose(){for(let e=0;e<n.length;e++)n[e]();n=null;for(let n=0;n<i.length;n++){var e,t;null==(e=(t=i[n]).dispose)||e.call(t)}i=null},plugStaticDomFactories(i){extendIfUndefined(e,i);for(let i=0;i<t.length;i++){var n,o;null==(n=(o=t[i].value).plugStaticDomFactories)||n.call(o,e)}},plugStaticDom(i){extendIfUndefined(e,i);for(let i=0;i<t.length;i++){var n,o;null==(n=(o=t[i].value).plugStaticDom)||n.call(o,e)}},layout(n){if(extendIfUndefined(e,n),t){for(let i=0;i<t.length;i++){let n=t[i].value;n.plugStaticDomBus&&t.some((e=>e.key===n.plugStaticDomBus.after))&&(null==n.plugStaticDomBus.plugStaticDom||n.plugStaticDomBus.plugStaticDom(e))}for(let n=0;n<t.length;n++){var o,l;let s=null==(o=(l=t[n].value).layout)?void 0:o.call(l,e);s&&i.push(s)}}},attach(){if(t)for(let o=0;o<t.length;o++){var i,n;null==(i=(n=t[o].value).attach)||i.call(n,e)}}}}const transformStyles=[{old:"selectedPanelDisabledBackgroundColor",opt:"picks_disabled",style:"backgroundColor"},{old:"selectedPanelFocusValidBoxShadow",opt:"picks_focus_valid",style:"boxShadow"},{old:"selectedPanelFocusInvalidBoxShadow",opt:"picks_focus_invalid",style:"boxShadow"},{old:"selectedPanelDefMinHeight",opt:"picks_def",style:"minHeight"},{old:"selectedPanelLgMinHeight",opt:"picks_lg",style:"minHeight"},{old:"selectedPanelSmMinHeight",opt:"picks_sm",style:"minHeight"},{old:"selectedItemContentDisabledOpacity",opt:"choiceLabel_disabled",style:"opacity"}],transformClasses=[{old:"dropDownMenuClass",opt:"choices"},{old:"dropDownItemClass",opt:"choice"},{old:"dropDownItemHoverClass",opt:"choice_hover"},{old:"selectedPanelClass",opt:"picks"},{old:"selectedItemClass",opt:"pick"},{old:"removeSelectedItemButtonClass",opt:"pickButton"},{old:"filterInputItemClass",opt:"pickFilter"},{old:"filterInputClass",opt:"filterInput"},{old:"selectedPanelFocusClass",opt:"picks_focus"},{old:"selectedPanelDisabledClass",opt:"picks_disabled"},{old:"selectedItemContentDisabledClass",opt:"pick_disabled"}];function adjustLegacySettings(e){e.css||(e.css={});var t=e.css;e.cssPatch||(e.cssPatch={});var i=e.cssPatch;if((e.selectedPanelFocusBorderColor||e.selectedPanelFocusBoxShadow)&&(console.log("DashboarCode.BsMultiSelect: selectedPanelFocusBorderColor and selectedPanelFocusBoxShadow are depricated, use - cssPatch:{picks_focus:{borderColor:'myValue', boxShadow:'myValue'}}"),i.picks_focus||(i.picks_focus={boxShadow:e.selectedPanelFocusBoxShadow,borderColor:e.selectedPanelFocusBorderColor}),delete e.selectedPanelFocusBorderColor,delete e.selectedPanelFocusBoxShadow),transformStyles.forEach((t=>{if(e[t.old]){if(console.log(`DashboarCode.BsMultiSelect: ${t.old} is depricated, use - cssPatch:{${t.opt}:{${t.style}:'myValue'}}`),!e[t.opt]){let i={};i[t.style]=e[t.old],e.cssPatch[t.opt]=i}delete e[t.old]}})),transformClasses.forEach((i=>{e[i.old]&&(console.log(`DashboarCode.BsMultiSelect: ${i.old} is depricated, use - css:{${i.opt}:'myValue'}`),t[i.opt]||(t[i.opt]=e[i.old]),delete e[i.old])})),e.inputColor&&(console.log("DashboarCode.BsMultiSelect: inputColor is depricated, remove parameter"),delete e.inputColor),e.useCss&&(console.log("DashboarCode.BsMultiSelect: 'useCss: true' is depricated, use - 'useCssPatch: false'"),t.pick_disabled||(e.useCssPatch=!e.useCss),delete e.useCss),e.getIsValid||e.getIsInValid)throw"DashboarCode.BsMultiSelect: parameters getIsValid and getIsInValid are depricated and removed, use - getValidity that should return (true|false|null) "}function MultiSelectBuilder(e,t,i){const n={containerClass:"dashboardcode-bsmultiselect",css:i};var o=ComposePluginManagerFactory(t,n);return{create:(t,i)=>{var l;let s;var c;(i&&i.plugins&&console.log("DashboarCode.BsMultiSelect: 'options.plugins' is depricated, use - MultiSelectBuilder(environment, plugins) instead"),i instanceof Function)?(s=i,i=null):s=null==(c=i)?void 0:c.buildConfiguration;i&&adjustLegacySettings(i);let a={};a.css=createCss(n.css,null==(l=i)?void 0:l.css);var r=o(a,i);extendIfUndefined(a,i),extendIfUndefined(a,n);let u=null==s?void 0:s(t,a);return BsMultiSelect(t,e,r,a,u)},defaultSettings:n}}function ModuleFactory$1(e,t,i){e.trigger||(e.trigger=(t,i)=>t.dispatchEvent(new e.window.Event(i)));let n=ObjectValuesEx(shallowClearClone(t,multiSelectPlugins)),{create:o,BsMultiSelectDefault:l}=MultiSelectBuilder(e,n,i);o.Default=l;let s=ObjectValuesEx(shallowClearClone(t,picksPlugins)),{create:c,BsPicksDefault:a}=MultiSelectBuilder(e,s,i);return c.Default=a,{BsMultiSelect:o,BsPicks:c,MultiSelectTools:{MultiSelectBuilder:MultiSelectBuilder,plugins:shallowClearClone(t,allPlugins),defaultCss:i,utilities:utilities}}}const defaultCss=createDefaultCssBs5();function ModuleFactory(e){return ModuleFactory$1(e,Bs4PluginSet,defaultCss)}function legacyConstructor(e,t,i){console.log("DashboarCode.BsMultiSelect: 'BsMultiSelect' is depricated, use - ModuleFactory(environment).BsMultiSelect(element, settings)");var{BsMultiSelect:n}=ModuleFactory(t);return n(e,i)}export{legacyConstructor as BsMultiSelect,ModuleFactory};
//# sourceMappingURL=BsMultiSelect.esm.min.js.map