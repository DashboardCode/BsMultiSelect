{"version":3,"sources":["../../js/src/ToolsJs.js","../../js/src/plugins/LabelPlugin.js","../../js/src/ToolsDom.js","../../js/src/plugins/RtlPlugin.js","../../js/src/plugins/FormResetPlugin.js","../../js/src/ValidityApi.js","../../js/src/plugins/BsAppearancePlugin.js","../../js/src/plugins/OptionsApiPlugin.js","../../js/src/plugins/SelectElementPlugin.js","../../js/src/plugins/SelectedOptionPlugin.js","../../js/src/plugins/DisabledOptionPlugin.js","../../js/src/plugins/PicksApiPlugin.js","../../js/src/plugins/JQueryMethodsPlugin.js","../../js/src/PluginSet.js","../../js/src/plugins/Bs5Plugin.js","../../js/src/plugins/HiddenOptionPlugin.js","../../js/src/plugins/PlaceholderPlugin.js","../../js/src/plugins/CssPatchPlugin.js","../../js/src/ToolsStyling.js","../../js/src/plugins/ValidationApiPlugin.js","../../js/src/plugins/FormRestoreOnBackwardPlugin.js","../../js/src/PluginManager.js","../../js/src/PickDomFactory.js","../../js/src/ChoiceDomFactory.js","../../js/src/StaticDomFactory.js","../../js/src/PicksDom.js","../../js/src/FilterDom.js","../../js/src/ChoicesDomFactory.js","../../js/src/ComponentPropertiesAspect.js","../../js/src/AddToJQueryPrototype.js","../../js/src/PopupAspect.js"],"names":["plugDefaultConfig","constructors","defaults","goOn","i","e","value","length","forEachRecursion","indexRecursion","configuration","settings","_constructors$i$plugM","_constructors$i2","plugMergeSettings","call","next","destination","source","property","prev","v","node","_len","arguments","sources","Array","_key","tail","remove","count","forEach","s","_property","_v","hasOwnProperty","f","index","getCount","List","reset","DoublyLinkedList","head","setNext","setPrev","getTail","isEmpty","getPrev","getNext","ArrayFacade","splice","key","predicate","list","getHead","composeSync","functions","_len2","_key2","detachAll","closestByClassName","element","className","pluginData","labelPluginData","containerElement","staticDom","filterInputElement","filterDom","contains","createInputId","containerClass","Element","buildApi","parentNode","EventBinder","backupedForAttribute","labelElement","getAttribute","newId","handler","eventName","unbind","findDirectChildByTagName","tagName","closest","styling","backupStyling","classes","styles","tmp1","containsAndSelf","otherNode","slice","style","children","isOn","addStyling","getIsRtl","isRtl","siblingsAsArray","removeStyling","out","param","actionStr","actionArr","isRemoveEmptyClasses","String","c","split","push","extend","actionObj","extendClasses","Object","attributeName","attribute","EventLoopFlag","flag","window","setTimeout","RtlPlugin","popupAspect","o","shallowClearClone","forceRtlOnContainer","createStyling","selectElement","dirAttributeValue","a","dispose","FormResetPlugin","params","eventBuilder","p","form","closestByTagName","environment","concat","createValidity","valueMissing","extendInt","Styling","customValidationMessage","stylings2","validationMessage","willValidate","stylings1","param2","setMessage","customError","undefined","validity","param1","isValueMissingObservable","getValue","NavigateManager","navigate","down","wrap","picksElement","classList","invalidMessages","map","validMessages","wrapsCollection","listFacade_remove","listFacade_add","createWrapAspect","createChoiceBaseAspect","optionsAspect","insert","resetLayoutAspect","resetLayout","_push","add","_insert","api","options","getOptions","wraps","listFacade_reset","forLoop","componentPropertiesAspect","aspects","picksDom","hoveredChoiceAspect","navigateAspect","filterManagerAspect","onChangeAspect","onChange","optionToggleAspect","createPickHandlersAspect","trigger","inputAspect","buildChoiceAspect","setDisabledComponentAspect","choicesElement","choicesDom","document","eventLoopFlag","get","resetSkipFocusout","documentMouseup","disposableContainerElement","event","target","appendChild","focusInAspect","setFocusIn","disposablePicksElement","setChoicesVisible","addEventListener","skipoutMousedown","resetMouseCandidateChoice","resetHoveredChoice","isChoicesVisible","SelectedOptionPlugin","removePickAspect","picksList","setIsOptionSelected","setFocusIfNotTarget","getNavigateManager","showChoices","preventDefaultClickEvent","choice","choiceDomManagerHandlers","uncheckOption","selected","processUncheck","setSelectedFalse","filterPredicateAspect","mouseCandidateEventBinder","mouseOverToHoveredAndReset","isHoverIn","hoverIn","selectAll","hoveredWrap","toggle","setOptionSelected","fullMatchAspect","fullMatch","pick","_inputAspect$processI","filterInputValue","processEmptyInput","setWidth","updateSelected","visibleCount","pickHandlers","panelIsVisble","addPickAspect","addPick","afterInput","onKeyDown","updateOptionsSelected","keyCode","empty","updateChoiceSelected","preventDefault","indexOf","DisabledOptionPlugin","isChoiceSelectableAspect","getIsOptionDisabled","stopPropagation","keyDownArrow","onKeyUp","createWrap","origÐ¡reateWrap","hoveredToSelected","updateDisabled","origToggle","success","setDisabledComponent","isComponentDisabled","origIsSelectable","isSelectable","componentDisabledEventBinder","bind","clickToShowChoices","isOptionDisabled","origCreatePickHandlers","handleOnRemoveButton","origFilterPredicate","removeOnButton","origBuildChoice","createPickHandlers","removeAndDispose","buildPickAspect","choiceElement","booleanValue","confirmed","isOptionSelected","adoptChoiceElement","origBuildPick","skipoutAndResetMousedown","BsMultiSelect","onInit","_extendIfUndefined","isEmptyPeaks","createPopper","plugins","option","css","getDisabled","getText","defaultPlugins","_trigger","getWasValidated","CssPatchPlugin","SelectElementPlugin","wasUpdatedObservable","triggerAspect","name","validationApiPluginData","validationObservable","ComponentPropertiesAspect","updateValidity","OptionsAspect","setDefaults","validationApiObservable","attach","appearanceAspect","OptionPropertiesAspect","choiceElementAttach","disable","setDisabled","staticManager","appendToContainer","resetFilterListAspect","returnValue","origAdd","setHoverIn","isChoiceElementAttached","itemPrev","itemNext","CreateChoiceBaseAspect","optionPropertiesAspect","countableChoicesList","buildChoice","removePick","configurationPluginData","getDefaultLabel","createElement","useCssPatch","create","composeGetSize","origGetLabelElementAspect","getLabelElementAspect","isVisible","beforeElement","insertBefore","detach","staticDomFactory","choicesDomFactory","createElementAspect","createStaticDom","backgroundColor","color","Error","message","removableContainerClass","LabelPlugin","label","showError","removeChild","inputGroupElement","Function","start","ObservableValue","setValue","getSize","warp","choiceNext","CountableChoicesListInsertAspect","choicesEnumerableAspect","getManualValidationObservable","updateWasValidated","ChoicesEnumerableAspect","filteredChoicesList","filteredPrev","filteredNext","filterPredicate","display","text","searchText","emptyNavigateManager","filteredNavigateManager","showEmptyFilter","filterText","size","picksLgStyling","updateSize","id","querySelector","getHoveredChoice","setHoveredChoice","hoveredChoice","choices","toggleStyling","_navigate","NavigateAspect","choice_selected","choice_disabled","picks","w","picks_focus","countableChoicesListInsertAspect","countableChoicesListInsert","pick_disabled","pickFilter","filterInput","disposeAspect","pickContent","pickContent_disabled","pickButton","choiceCheckBox_disabled","choiceContent","choiceCheckBox","choiceLabel","choiceLabel_disabled","cssPatch","listStyleType","_constructors$i3","plugStaticDom","_constructors$i$plugS","height","marginBottom","_staticDomFactory$cre","choice_hover","_createStaticDom","border","padding","eventBinder","setEmpty","setFocus","createCss","focus","onFilterInputInput","onFocusIn","_onFocusIn","onFocusOut","extendCss","_onFocusOut","onFilterInputKeyUp","BsAppearancePlugin","FilterDom","margin","popper","popperConfiguration","hide","flip","enabled","updateSizeJsForAdapter","picks_lg","picks_sm","toggleFocusStyling","origToggleFocusStyling","visible","updatePopupLocation","destroy","PopupAspect","outline","forceResetFilter","ResetFilterListAspect","ResetFilterAspect","disableToggleStyling","picks_disabled","focusToggleStyling","isFocusIn","pickFilterElement","pickElement","getIsFocusIn","newIsFocusIn","backupedRequired","required","FocusInAspect","pickDomFactory","pickButtonAspect","innerHTML","buttonHTML","pickButtonElement","pickContentElement","checkValidity","visibleElement","reportValidity","init","disableToggle","defValueMissingMessage","ValidationApiPlugin","updateDataAspect","valueMissingMessage","isBoolean","getDataGuardedWithPrefix","optionsArray","PickDomFactory","pickButtonHTML","FormRestoreOnBackwardPlugin","getButtonHTML","buildPick","setSelected","_picksDom$createPickE","createPickElement","loadAspect","load","pickDomManager","pickDomManagerHandlers","pickElementAttach","BuildPickAspect","producePick","placeholder","setEmptyInputWidth","emptyToggleStyling","showPlacehodler","ProducePickAspect","producePickAspect","disabled","updatePlacehodlerVisibility","CreatePickHandlersAspect","choiceDomFactory","ObservableLambda","getIsValueMissing","choiceContentElement","updateData","validationApi","choiceCheckBoxElement","choiceLabelElement","choiceSelectedToggle","choiceDisabledToggle","choiceHoverToggle","checked","updateHoverIn","ChoiceDomFactory","getNextNonHidden","newIsOptionHidden","isOptionHidden","OptionToggleAspect","borderColor","FullMatchAspect","boxShadow","processInput","trim","origCreateStaticDom","setFilter","getFilter","_text","InputAspect","choiceClickAspect","ChoiceClickAspect","picks_focus_valid","getMessagesElements","siblings","setVisible","_choicesDom$createCho","composeGetValidity","choiceClick","choiceDomManager","getValidity","origBuildAndAttachChoice","buildAndAttachChoiceAspect","buildAndAttachChoice","buildHiddenChoice","BuildChoiceAspect","updateSizeForAdapter","getNextElement","BuildAndAttachChoiceAspect","newIsDisabled","resetFilterAspect","resetFilter","updateRemoveDisabled","SetDisabledComponentAspect","updateDisabledComponent","newIsComponentDisabled","updateOptionDisabled","updateChoiceDisabled","UpdateDisabledComponentAspect","updateDisabledComponentAspect","updateAppearance","AppearanceAspect","fillChoicesAspect","getIsOptionHidden","hidden","createChoiceBase","readyState","domContentLoadedHandler","FillChoicesAspect","picks_def","fillChoices","LoadAspect","minHeight","updateOptionHidden","clear","UpdateDataAspect","extendIfUndefined","paddingLeft","fontSize","float","verticalAlign","opacity","pluginManager","instances","instance","disposes","_i","_instances$_i$buildAp","_instances$_i","_i2","_i3","_instances$_i3$dispos","_instances$_i2","PluginManager","multiSelectInlineLayout","MultiSelectInlineLayout","floating_choices","floating_choices_empty_unfocus","paddingTop","paddingBottom","transformStyles","old","opt","transformClasses","adjustLegacySettings","pickDom","selectedPanelFocusBorderColor","selectedPanelFocusBoxShadow","console","log","MultiSelectBuilder","choiceCheckBoxDisabledToggle","choiceLabelDisabledToggle","constructor","removeInstanceData","_settings2","buildConfiguration","_settings","StaticDomFactory","multiSelect","defaultOptions","PicksDom","backgroundImage","filterInput_empty","setIsFocusIn","picks_focus_invalid","lineHeight","formGroup","TriggerAspect","prototypable","pluginName","createPlugin","$","firstChar","charAt","firstCharLower","toLowerCase","prototypableName","noConflictPrototypable","fn","noConflictPrototypableForInstance","dataKey","createInstance","$e","removeData","data","output","this","each","isMethodName","test","methodName","lMethodName","result","prototypableForInstance","noConflict","addToJQueryPrototype","preventOverflow","modifiers","Bs4Plugin","tools","OnChangeAspect","$__default","Popper__default"],"mappings":"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","sourcesContent":["export function isBoolean(value){\r\n    return value === true || value === false;\r\n}\r\n\r\nexport function isString(value){\r\n    return value instanceof String || typeof(value) === 'string';\r\n}\r\n\r\nexport function extendIfUndefined(destination, source) {\r\n    for (let property in source)\r\n        if (destination[property] === undefined)\r\n            destination[property] = source[property];\r\n}\r\n\r\nexport function shallowClearClone(source, ...sources) { // override previous, no null and undefined\r\n    var destination = {};\r\n    for (let property in source){ // TODO:  Object.assign (need polyfill for IE11)\r\n        let v = source[property];\r\n        if (!(v === null || v===undefined))\r\n            destination[property] = v;\r\n    }\r\n    if(sources)\r\n        sources.forEach(\r\n            s=>{\r\n                for(let property in s){\r\n                    let v = s[property];\r\n                    if (!(v === null || v===undefined))\r\n                        destination[property] = v;\r\n                    else\r\n                        if (destination.hasOwnProperty(property)){\r\n                            delete destination[property];\r\n                        }\r\n                }\r\n            }\r\n        )\r\n    return destination;\r\n}\r\n\r\nfunction forEachRecursion(f, e){\r\n    if (!e)\r\n        return;\r\n    let goOn = f(e.value); \r\n    if (!(goOn===false))\r\n        forEachRecursion(f, e.prev);\r\n}\r\n\r\nfunction indexRecursion(index, e){\r\n    if (!e.prev)\r\n        return index;\r\n    indexRecursion(++index, e.prev);\r\n}\r\n\r\nexport function List(){\r\n    var tail = null;\r\n    var count = 0;\r\n    return {\r\n        add(e){\r\n            if (tail){\r\n                tail.next = {value:e, prev:tail, next:null};\r\n                tail = tail.next;\r\n            } else \r\n                tail = {value:e, prev:null, next:null}\r\n            count++;\r\n            let node = tail;\r\n            function remove(){\r\n                if (node.prev){\r\n                    (node.prev).next = node.next;\r\n                }\r\n                if (node.next){\r\n                    (node.next).prev = node.prev;\r\n                }\r\n                if (tail == node){\r\n                    tail = node.prev;\r\n                }\r\n                count--;\r\n            }\r\n            function index(){\r\n                return indexRecursion(0, node);\r\n            }\r\n            return {remove, index};\r\n        },\r\n        forEach(f){\r\n            forEachRecursion(f, tail);\r\n        },\r\n        getTail(){ return (tail)?tail.value:null },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ tail=null; count = 0 }\r\n    }\r\n}\r\n\r\nexport function DoublyLinkedList(getPrev, setPrev, getNext, setNext){\r\n    var head = null, tail = null;\r\n    var count = 0;\r\n    return {\r\n        add(e, next){\r\n            if (!tail){\r\n                head = tail = e;\r\n                setPrev(e, null);\r\n                setNext(e, null);\r\n            }\r\n            else {\r\n                if (!next){\r\n                    setPrev(e, tail);\r\n                    setNext(e, null);\r\n                    setNext(tail, e);\r\n                    tail = e;\r\n                } \r\n                else{\r\n                    if (next===head)\r\n                        head=e;\r\n                    let prev = getPrev(next);\r\n                    setNext(e, next);\r\n                    setPrev(next, e);\r\n                    if (prev){\r\n                        setPrev(e, prev);\r\n                        setNext(prev, e);\r\n                    } else {\r\n                        setPrev(e, null);\r\n                    }\r\n                } \r\n            }\r\n            count++;\r\n        },\r\n        remove(e){\r\n            let next = getNext(e);\r\n            let prev = getPrev(e);\r\n            if (prev) {\r\n                setNext(prev, next)\r\n            }\r\n            if (next) {\r\n                 setPrev(next, prev)\r\n            }\r\n            if (tail == e) {\r\n                tail = prev;\r\n            }\r\n            if (head == e) {\r\n                head = next; \r\n            }\r\n            count--;\r\n        }, \r\n        getHead(){ return head },\r\n        getTail(){ return tail },\r\n        getCount(){ return count },\r\n        isEmpty(){ return count==0 },\r\n        reset(){ \r\n            tail=head=null; \r\n            count = 0; }\r\n    }\r\n}\r\n\r\nexport function DoublyLinkedCollection(getPrev, setPrev, getNext, setNext){\r\n    var list = [];\r\n    var head = null, tail = null;\r\n    return {\r\n        push(e){\r\n            list.push(e);\r\n            if (!tail){\r\n                head = tail = e;\r\n                setPrev(e, null);\r\n                setNext(e, null);\r\n            }\r\n            else {\r\n                setPrev(e, tail);\r\n                setNext(e, null);\r\n                setNext(tail, e);\r\n                tail = e;\r\n            }\r\n        },\r\n        add(e, key){\r\n            list.splice(key, 0, e);\r\n            if (!tail){\r\n                head = tail = e;\r\n                setPrev(e, null);\r\n                setNext(e, null);\r\n            }\r\n            else {\r\n                let next = list[key];\r\n                if (!next) {\r\n                    setPrev(e, tail);\r\n                    setNext(e, null);\r\n                    setNext(tail, e);\r\n                    tail = e;\r\n                } \r\n                else {\r\n                    if (next===head)\r\n                        head=e;\r\n                    let prev = getPrev(next);\r\n                    setNext(e, next);\r\n                    setPrev(next, e);\r\n                    if (prev){\r\n                        setPrev(e, prev);\r\n                        setNext(prev, e);\r\n                    } else {\r\n                        setPrev(e, null);\r\n                    }\r\n                } \r\n            }\r\n        },\r\n        get: (key) => list[key],\r\n        remove(key){\r\n            var e = list[key];\r\n            list.splice(key, 1);\r\n            let next = getNext(e);\r\n            let prev = getPrev(e);\r\n            if (prev) {\r\n                setNext(prev, next)\r\n            }\r\n            if (next) {\r\n                 setPrev(next, prev)\r\n            }\r\n            if (tail == e) {\r\n                tail = prev;\r\n            }\r\n            if (head == e) {\r\n                head = next; \r\n            }\r\n            return e;\r\n        }, \r\n        forLoop(f){\r\n            for(let i=0; i<list.length; i++)\r\n            {\r\n                let e = list[i];\r\n                f(e);\r\n            }\r\n        },\r\n        getHead(){ return head },\r\n        getTail(){ return tail },\r\n        getCount(){ return list.length },\r\n        isEmpty(){ return list.length==0 },\r\n        reset(){ \r\n            list=[];\r\n            tail=head=null; \r\n            }\r\n    }\r\n}\r\n\r\nexport function ArrayFacade(){\r\n    var list = [];\r\n    return {\r\n        push(e){\r\n            list.push(e);\r\n        },\r\n        add(e, key){\r\n            list.splice(key, 0, e);\r\n        },\r\n        get: (key) => list[key],\r\n        getNext: (key, predicate) => {\r\n            let count = list.length;\r\n            let start = key+1;\r\n            if (key<count) {\r\n                if (!predicate)\r\n                    return list[start];\r\n                for (let i = start; i < count; i++) {\r\n                    let c = list[i];\r\n                    if (predicate(c))\r\n                        return c;\r\n                }\r\n            }\r\n        },\r\n        remove(key){\r\n            var e = list[key];\r\n            list.splice(key, 1);\r\n            return e;\r\n        }, \r\n        forLoop(f){\r\n            for(let i=0; i<list.length; i++)\r\n            {\r\n                let e = list[i];\r\n                f(e, i);\r\n            }\r\n        },\r\n        getHead(){ return list[0] },\r\n        getCount(){ return list.length },\r\n        isEmpty(){ return list.length==0 },\r\n        reset(){ list=[];}\r\n    }\r\n}\r\n\r\nexport function composeSync(...functions){\r\n    return () => functions.forEach(\r\n        (f) => {\r\n            if (f)\r\n                f();\r\n        }\r\n    )\r\n}\r\n\r\nexport function defCall(...functions){\r\n    for (let f of functions) \r\n        if (f) {\r\n            if (f instanceof Function){\r\n                let tmp =  f();\r\n                if (tmp)\r\n                    return tmp;\r\n            }\r\n            else\r\n                return f \r\n        }\r\n}\r\n\r\nexport function ObservableValue(value){\r\n    var list = List();\r\n    return {\r\n        getValue(){\r\n            return value;\r\n        },\r\n        setValue(newValue){\r\n            value = newValue;\r\n            list.forEach(f=>f(newValue));\r\n        },\r\n        attach(f){\r\n            return list.add(f)\r\n        },\r\n        detachAll(){\r\n            list.reset();\r\n        }\r\n    }\r\n}\r\n\r\nexport function ObservableLambda(func){\r\n    var list = List();\r\n    var value = func();\r\n    return {\r\n        getValue(){\r\n            return value;\r\n        },\r\n        call(){\r\n            value = func();\r\n            list.forEach(f=>f(value));\r\n        },\r\n        attach(f){\r\n            return list.add(f)\r\n        },\r\n        detachAll(){\r\n            list.reset();\r\n        }\r\n    }\r\n}","import {defCall} from '../ToolsJs';\r\n\r\nexport function LabelPlugin(pluginData){\r\n    let {configuration, staticDom, filterDom} = pluginData;\r\n    let {containerClass, label} = configuration\r\n    let getLabelElementAspect = () => defCall(label); \r\n    let labelPluginData = {getLabelElementAspect}; // overrided by BS Appearance Plugin\r\n    pluginData.labelPluginData=labelPluginData;\r\n    let createInputId = null;\r\n    let {selectElement, containerElement} = staticDom;\r\n    let {filterInputElement} = filterDom;\r\n    if(selectElement)\r\n        createInputId = () => `${containerClass}-generated-input-${((selectElement.id)?selectElement.id:selectElement.name).toLowerCase()}-id`;\r\n    else\r\n        createInputId = () => `${containerClass}-generated-filter-${containerElement.id}`;\r\n\r\n    return {\r\n        buildApi(){\r\n            let labelElement = labelPluginData.getLabelElementAspect();\r\n            let backupedForAttribute = null; // state saved between init and dispose\r\n            if (labelElement) {\r\n                backupedForAttribute = labelElement.getAttribute('for');\r\n                var newId = createInputId();\r\n                filterInputElement.setAttribute('id', newId);\r\n                labelElement.setAttribute('for',newId);\r\n            }\r\n            if (backupedForAttribute)\r\n                return () => labelElement.setAttribute('for',backupedForAttribute);\r\n        }\r\n    }\r\n}","export function findDirectChildByTagName(element, tagName){\r\n    let value = null;\r\n    for (let i = 0; i<element.children.length; i++)\r\n    {\r\n        let tmp = element.children[i];\r\n        if (tmp.tagName==tagName)\r\n        {\r\n            value = tmp;\r\n            break;\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function closestByTagName(element, tagName){\r\n    return closest(element, e => e.tagName === tagName) // TODO support xhtml?  e.tagName.toUpperCase() ?\r\n}\r\n\r\nexport function closestByClassName(element, className){\r\n    return closest(element, e => e.classList.contains(className))\r\n}\r\n\r\nexport function closestByAttribute(element, attributeName, attribute){\r\n    return closest(element, e => e.getAttribute(attributeName)===attribute )\r\n}\r\n\r\nexport function containsAndSelf(node, otherNode ){\r\n    return node === otherNode || node.contains(otherNode);  \r\n}\r\n\r\nexport function getDataGuardedWithPrefix(element, prefix, name){\r\n    var tmp1 = element.getAttribute('data-' + prefix + '-' + name);\r\n    if (tmp1) {\r\n        return tmp1;\r\n    } else  {\r\n        var tmp2 = element.getAttribute('data-' + name);\r\n        if (tmp2)\r\n            return tmp2;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction closest(element, predicate){\r\n    if (!element || !(element instanceof Element)) return null; // should be element, not document (TODO: check iframe)\r\n     \r\n    if (predicate(element)) return element;\r\n    return closest(element.parentNode, predicate);\r\n}\r\n\r\nexport function siblingsAsArray(element){\r\n    var value = []\r\n    if (element.parentNode){\r\n        var children = element.parentNode.children;\r\n        var l = element.parentNode.children.length;\r\n        if (children.length>1){\r\n            for (var i=0; i < l; ++i){\r\n                var e = children[i];\r\n                if (e!=element)\r\n                    value.push(e);\r\n                \r\n            }\r\n        }\r\n    }\r\n    return value;\r\n}\r\n\r\nexport function getIsRtl(element){\r\n    var isRtl = false;\r\n    var e = closestByAttribute(element,\"dir\",\"rtl\");\r\n    if (e)\r\n        isRtl = true;\r\n    return isRtl;\r\n}\r\n\r\nexport function EventBinder(){\r\n    var list = [];\r\n    return {\r\n        bind(element, eventName, handler) {\r\n            element.addEventListener(eventName, handler)\r\n            list.push( {element, eventName, handler} )\r\n        },\r\n        unbind() {\r\n            list.forEach( e=> {\r\n                let {element, eventName, handler}=e;\r\n                element.removeEventListener(eventName, handler)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function AttributeBackup(){\r\n    var list = [];\r\n    return {\r\n        set(element, attributeName, attribute){\r\n            var currentAtribute =  element.getAttribute(attributeName); \r\n            list.push( {element, currentAtribute, attribute} )\r\n            element.setAttribute(attributeName, attribute)\r\n        },\r\n        restore(){\r\n            list.forEach(e=>{\r\n                let {element, attributeName, attribute} = e;\r\n                if (attributeName)\r\n                    element.setAttribute(attributeName, attribute)\r\n                else\r\n                    element.removeAttribute(attributeName)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function EventLoopFlag(window) {\r\n    var flag = false;\r\n    return {\r\n        get(){\r\n            return flag;\r\n        },\r\n        set(){\r\n            flag = true;\r\n            window.setTimeout( \r\n                () => {  \r\n                    flag = false;\r\n                }, 0)\r\n        }\r\n    }\r\n}\r\n","import {getIsRtl, AttributeBackup} from '../ToolsDom';\r\nimport {isBoolean} from '../ToolsJs';\r\n\r\nexport function RtlPlugin(pluginData){\r\n    \r\n    let {configuration, popupAspect, staticDom} = pluginData;\r\n    let {isRtl} = configuration;\r\n    let forceRtlOnContainer = false; \r\n    if (isBoolean(isRtl))\r\n        forceRtlOnContainer = true;\r\n    else\r\n        isRtl = getIsRtl(staticDom.initialElement);\r\n    \r\n    var attributeBackup = AttributeBackup();\r\n    if (forceRtlOnContainer){\r\n        attributeBackup.set(staticDom.containerElement, \"dir\", \"rtl\");\r\n    }\r\n    else if (staticDom.selectElement){\r\n        var dirAttributeValue = staticDom.selectElement.getAttribute(\"dir\");\r\n        if (dirAttributeValue){\r\n            attributeBackup.set(staticDom.containerElement, \"dir\", dirAttributeValue);\r\n        }\r\n    } \r\n    if (isRtl)\r\n        popupAspect.popperConfiguration.placement = 'bottom-end';\r\n    return {\r\n        dispose(){\r\n            attributeBackup.restore;\r\n        }\r\n    }\r\n}","import {EventBinder, closestByTagName} from '../ToolsDom';\r\n\r\nexport function FormResetPlugin(pluginData){\r\n    var {staticDom, environment} = pluginData;\r\n    return {\r\n        buildApi(api){\r\n            var eventBuilder = EventBinder();\r\n            if (staticDom.selectElement){\r\n                var form = closestByTagName(staticDom.selectElement, 'FORM');\r\n                if (form) {\r\n                    eventBuilder.bind(form, \r\n                        'reset', \r\n                        () => environment.window.setTimeout( ()=>api.updateData() ) );\r\n                }\r\n            }\r\n            return eventBuilder.unbind;\r\n        }\r\n    }\r\n}","function createValidity(valueMissing, customError){\r\n    return Object.freeze({\r\n        valueMissing,\r\n        customError,\r\n        valid: !(valueMissing || customError),\r\n    });\r\n}\r\n\r\nexport function ValidityApi(visibleElement, isValueMissingObservable, valueMissingMessage, onValid, trigger){\r\n    var customValidationMessage = \"\";\r\n    var validationMessage = \"\";\r\n    var validity = null;\r\n    var willValidate = true;\r\n    \r\n    function setMessage(valueMissing, customError){\r\n        validity = createValidity(valueMissing, customError);\r\n        validationMessage = customError?customValidationMessage:(valueMissing?valueMissingMessage:\"\")\r\n        visibleElement.setCustomValidity(validationMessage);\r\n        onValid(validity.valid);\r\n    }\r\n\r\n    setMessage(isValueMissingObservable.getValue(), false);\r\n\r\n    isValueMissingObservable.attach(\r\n        (value) => {\r\n            setMessage(value, validity.customError);\r\n        }\r\n    );\r\n    var checkValidity = () => {\r\n        if (!validity.valid)\r\n            trigger('dashboardcode.multiselect:invalid')\r\n        return validity.valid;\r\n    }\r\n    return {\r\n        validationMessage,\r\n        willValidate,\r\n        validity,\r\n        setCustomValidity(message){\r\n            customValidationMessage = message;\r\n            setMessage(validity.valueMissing, customValidationMessage?true:false);\r\n        },\r\n        checkValidity,\r\n        reportValidity(){\r\n            visibleElement.reportValidity();\r\n            return checkValidity();\r\n        }\r\n    }\r\n}","import {closestByClassName, siblingsAsArray} from '../ToolsDom';\r\nimport {addStyling} from '../ToolsStyling'\r\nimport {ObservableLambda, composeSync} from '../ToolsJs';\r\n\r\nexport function BsAppearancePlugin(pluginData){\r\n    let {configuration, validationApiPluginData, \r\n        picksDom, staticDom, labelPluginData, appearanceAspect, componentPropertiesAspect} = pluginData;\r\n    let {getValidity, getSize, useCssPatch, css, composeGetSize, getDefaultLabel} = configuration;\r\n    let selectElement = staticDom.selectElement;\r\n    \r\n    if (labelPluginData){\r\n        let origGetLabelElementAspect = labelPluginData.getLabelElementAspect;\r\n        labelPluginData.getLabelElementAspect = () => {\r\n            var e = origGetLabelElementAspect();\r\n            if (e)\r\n                return e;\r\n            else{\r\n                if (selectElement){\r\n                    let labelElement = getDefaultLabel(selectElement);\r\n                    return labelElement;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    if (staticDom.selectElement) {\r\n        if(!getValidity)\r\n            getValidity = composeGetValidity(selectElement)\r\n        if(!getSize) \r\n            getSize = composeGetSize(selectElement)\r\n    } else {\r\n        if (!getValidity)\r\n            getValidity = () => null\r\n        if (!getSize)\r\n            getSize = () => null\r\n    }\r\n\r\n    componentPropertiesAspect.getSize=getSize;\r\n    componentPropertiesAspect.getValidity=getValidity;\r\n\r\n    var updateSize;\r\n    if (!useCssPatch){\r\n        updateSize= () => updateSizeForAdapter(picksDom.picksElement, getSize)\r\n    }\r\n    else{\r\n        const {picks_lg, picks_sm, picks_def} = css;\r\n        updateSize = () => updateSizeJsForAdapter(picksDom.picksElement, picks_lg, picks_sm, picks_def, getSize);\r\n    }\r\n\r\n    if (useCssPatch){\r\n        var origToggleFocusStyling = picksDom.toggleFocusStyling;\r\n        picksDom.toggleFocusStyling = () => {\r\n            var validity =  validationObservable.getValue();\r\n            var isFocusIn = picksDom.getIsFocusIn();\r\n            origToggleFocusStyling(isFocusIn)\r\n            if (isFocusIn){\r\n                if (validity===false) { \r\n                    // but not toggle events (I know it will be done in future)\r\n                    picksDom.setIsFocusIn(isFocusIn);\r\n                    \r\n                    addStyling(picksDom.picksElement, css.picks_focus_invalid)\r\n                } else if (validity===true) {\r\n                    // but not toggle events (I know it will be done in future)\r\n                    picksDom.setIsFocusIn(isFocusIn);\r\n                    \r\n                    addStyling(picksDom.picksElement, css.picks_focus_valid)  \r\n                }              \r\n            }\r\n        }\r\n    }\r\n\r\n    var getWasValidated = () => {\r\n        var wasValidatedElement = closestByClassName(staticDom.initialElement, 'was-validated');\r\n        return wasValidatedElement?true:false;\r\n    }\r\n    var wasUpdatedObservable = ObservableLambda(()=>getWasValidated());\r\n    var getManualValidationObservable = ObservableLambda(()=>getValidity());\r\n    let validationApiObservable = validationApiPluginData?.validationApiObservable;\r\n    \r\n    var validationObservable = ObservableLambda(\r\n        () => wasUpdatedObservable.getValue()?validationApiObservable.getValue():getManualValidationObservable.getValue()\r\n    )\r\n  \r\n    validationObservable.attach(\r\n        (value)=>{\r\n            var  {validMessages, invalidMessages} = getMessagesElements(staticDom.containerElement);\r\n            updateValidity( \r\n            picksDom.picksElement,\r\n            validMessages, invalidMessages,\r\n            value);\r\n            picksDom.toggleFocusStyling();\r\n        }\r\n    )\r\n    wasUpdatedObservable.attach(\r\n        ()=>validationObservable.call()\r\n    )\r\n    validationApiObservable.attach(\r\n        ()=>validationObservable.call()\r\n    )\r\n    getManualValidationObservable.attach(\r\n        ()=>validationObservable.call()\r\n    )\r\n\r\n    appearanceAspect.updateAppearance = composeSync(\r\n        appearanceAspect.updateAppearance, \r\n        updateSize, \r\n        validationObservable.call, getManualValidationObservable.call);\r\n\r\n    return {\r\n        buildApi(api){\r\n            api.updateSize = updateSize;\r\n            api.updateValidity = ()=> getManualValidationObservable.call();\r\n            api.updateWasValidated = ()=>wasUpdatedObservable.call();\r\n        },\r\n        dispose(){\r\n            wasUpdatedObservable.detachAll();\r\n            validationObservable.detachAll();\r\n            getManualValidationObservable.detachAll();\r\n        }\r\n    }\r\n}\r\n\r\nfunction updateValidity(picksElement, validMessages, invalidMessages, validity){\r\n    if (validity===false){\r\n        picksElement.classList.add('is-invalid');\r\n        picksElement.classList.remove('is-valid');\r\n        invalidMessages.map(e=>e.style.display='block'); \r\n        validMessages.map(e=>e.style.display='none');      \r\n    }\r\n    else if (validity===true){\r\n        picksElement.classList.remove('is-invalid');\r\n        picksElement.classList.add('is-valid');\r\n        invalidMessages.map(e=>e.style.display='none'); \r\n        validMessages.map(e=>e.style.display='block'); \r\n    }else {\r\n        picksElement.classList.remove('is-invalid');\r\n        picksElement.classList.remove('is-valid');\r\n        invalidMessages.map(e=>e.style.display=''); \r\n        validMessages.map(e=>e.style.display=''); \r\n    }\r\n}\r\n\r\nfunction updateSize(picksElement, size){\r\n    if (size==\"lg\"){\r\n        picksElement.classList.add('form-control-lg');\r\n        picksElement.classList.remove('form-control-sm');\r\n    }\r\n    else if (size==\"sm\"){\r\n        picksElement.classList.remove('form-control-lg');\r\n        picksElement.classList.add('form-control-sm');\r\n    }\r\n    else{\r\n        picksElement.classList.remove('form-control-lg');\r\n        picksElement.classList.remove('form-control-sm');\r\n    }\r\n}\r\n\r\nfunction updateSizeJs(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, size){\r\n    updateSize(picksElement, size);\r\n    if (size==\"lg\"){\r\n        addStyling(picksElement, picksLgStyling);\r\n    } else if (size==\"sm\"){\r\n        addStyling(picksElement, picksSmStyling);\r\n    } else {\r\n        addStyling(picksElement, picksDefStyling);\r\n    }\r\n}\r\n\r\nfunction updateSizeForAdapter(picksElement, getSize){\r\n    updateSize(picksElement, getSize())\r\n}\r\n\r\nfunction updateSizeJsForAdapter(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, getSize){\r\n    updateSizeJs(picksElement, picksLgStyling, picksSmStyling, picksDefStyling, getSize())\r\n}\r\n\r\nfunction getMessagesElements(containerElement){\r\n    var siblings = siblingsAsArray(containerElement);\r\n    var invalidMessages =  siblings.filter(e=>e.classList.contains('invalid-feedback') || \r\n        e.classList.contains('invalid-tooltip'));\r\n    var validMessages =  siblings.filter(e=>e.classList.contains('valid-feedback') || \r\n        e.classList.contains('valid-tooltip'));\r\n    return {validMessages, invalidMessages}    \r\n} \r\n\r\nfunction composeGetValidity(selectElement){\r\n    var getValidity = () => \r\n        selectElement.classList.contains('is-invalid')?false:\r\n        (selectElement.classList.contains('is-valid')?true:null);\r\n    return getValidity;\r\n}\r\n\r\n\r\n\r\n","export function OptionsApiPlugin(pluginData){\r\n    let {buildAndAttachChoiceAspect, wraps, wrapsCollection, createWrapAspect, createChoiceBaseAspect,\r\n        optionsAspect, resetLayoutAspect} = pluginData;\r\n    return {\r\n        buildApi(api){\r\n\r\n            api.updateOptionAdded = (key) => {  // TODO: generalize index as key \r\n                let options = optionsAspect.getOptions();\r\n                let option = options[key];\r\n                \r\n                let wrap = createWrapAspect.createWrap(option);\r\n                wrap.choice= createChoiceBaseAspect.createChoiceBase(option);\r\n                wraps.insert(key, wrap);\r\n                let nextChoice = ()=> wrapsCollection.getNext(key, c => c.choice.choiceElement);\r\n\r\n                buildAndAttachChoiceAspect.buildAndAttachChoice(\r\n                        wrap,\r\n                        () => nextChoice()?.choice.choiceElement\r\n                    )\r\n            }\r\n        \r\n            api.updateOptionRemoved = (key) => { // TODO: generalize index as key \r\n                resetLayoutAspect.resetLayout(); // always hide 1st, then reset filter\r\n                \r\n                var wrap = wraps.remove(key);\r\n                wrap.choice.remove?.();\r\n                wrap.dispose?.();\r\n            }\r\n        }\r\n    }\r\n}","import {closestByTagName, findDirectChildByTagName, closestByClassName} from '../ToolsDom';\r\nimport {composeSync} from '../ToolsJs';\r\n\r\nexport function SelectElementPlugin(){\r\n}\r\n\r\nSelectElementPlugin.plugStaticDom = (aspects)=>{\r\n    let {configuration, staticDomFactory, createElementAspect,\r\n         componentPropertiesAspect, onChangeAspect, triggerAspect, optionsAspect, disposeAspect} = aspects;\r\n    let {create: origCreate} = staticDomFactory;\r\n    staticDomFactory.create = (css) => {\r\n        let {choicesDom, createStaticDom: origCreateStaticDom} = origCreate(css);\r\n        let {choicesElement} = choicesDom;\r\n        return { \r\n            choicesDom,\r\n            createStaticDom(element, containerClass){\r\n                let selectElement = null;\r\n                let containerElement = null;\r\n                let picksElement = null;\r\n                if (element.tagName == 'SELECT') {\r\n                    selectElement = element;\r\n                    if (containerClass){\r\n                        containerElement = closestByClassName(selectElement, containerClass)\r\n                        if (containerElement)\r\n                            picksElement = findDirectChildByTagName(containerElement, 'UL');\r\n                    }\r\n                } else if (element.tagName == 'DIV') {\r\n                    selectElement = findDirectChildByTagName(element, 'SELECT');\r\n                    if (selectElement) {\r\n                        if (containerClass){\r\n                            containerElement = closestByClassName(element, containerClass);\r\n                            if (containerElement)\r\n                                picksElement = findDirectChildByTagName(containerElement, 'UL');\r\n                        }\r\n                    } else {\r\n                        return origCreateStaticDom(element, containerClass);\r\n                    } \r\n                }\r\n\r\n                let disposableContainerElement = false;\r\n                if (!containerElement) {\r\n                    containerElement = createElementAspect.createElement('DIV');\r\n                    containerElement.classList.add(containerClass);\r\n                    disposableContainerElement= true;\r\n                }\r\n            \r\n                let disposablePicksElement = false;\r\n                if (!picksElement) {\r\n                    picksElement = createElementAspect.createElement('UL');\r\n                    disposablePicksElement = true; \r\n                }\r\n            \r\n                if (selectElement){\r\n                    var backupDisplay = selectElement.style.display;\r\n                    selectElement.style.display = 'none';\r\n\r\n                    var backupedRequired = selectElement.required;\r\n                    aspects.selectElementPluginData =  {required: backupedRequired};\r\n                    if(selectElement.required===true)\r\n                        selectElement.required = false;\r\n\r\n                    let {getDisabled} = configuration;\r\n\r\n                    if(!getDisabled) {\r\n                        var fieldsetElement = closestByTagName(selectElement, 'FIELDSET');\r\n                        if (fieldsetElement) {\r\n                            componentPropertiesAspect.getDisabled = () => selectElement.disabled || fieldsetElement.disabled;\r\n                        } else {\r\n                            componentPropertiesAspect.getDisabled = () => selectElement.disabled;\r\n                        }\r\n                    }\r\n                    onChangeAspect.onChange = composeSync(() => triggerAspect.trigger('change'), onChangeAspect.onChange) \r\n                    optionsAspect.getOptions = () => selectElement.options;\r\n                    \r\n                    // if (!setSelected){\r\n                    //     setSelected = (option, value) => {option.selected = value};\r\n                    //     // NOTE: adding this (setAttribute) break Chrome's html form reset functionality:\r\n                    //     // if (value) option.setAttribute('selected','');\r\n                    //     // else option.removeAttribute('selected');\r\n                    // }\r\n                    \r\n                    disposeAspect.dispose = composeSync(disposeAspect.dispose, () => {\r\n                        selectElement.required = backupedRequired;\r\n                        selectElement.style.display = backupDisplay;\r\n                    });\r\n                }\r\n\r\n                return {\r\n                    staticDom: {\r\n                            initialElement:element,\r\n                            containerElement,\r\n                            picksElement,\r\n                            disposablePicksElement,\r\n                            selectElement\r\n                            }, \r\n                    staticManager :{\r\n                        appendToContainer(){ \r\n                            if (disposableContainerElement){\r\n                                selectElement.parentNode.insertBefore(containerElement, selectElement.nextSibling) \r\n                                containerElement.appendChild(choicesElement)\r\n                            } else {\r\n                                selectElement.parentNode.insertBefore(choicesElement, selectElement.nextSibling)\r\n                            }\r\n                            if (disposablePicksElement)\r\n                                containerElement.appendChild(picksElement)\r\n                        },\r\n                    dispose(){ \r\n                        choicesElement.parentNode.removeChild(choicesElement);\r\n                        if (disposableContainerElement)\r\n                            selectElement.parentNode.removeChild(containerElement) \r\n                        if (disposablePicksElement)\r\n                            containerElement.removeChild(picksElement)\r\n                    }\r\n                }};\r\n            }\r\n        }\r\n    }\r\n}","import {composeSync} from '../ToolsJs';\r\n\r\n// TODO: there should be two new \"independent aspects\" AddPickAspect and RemovePickAspect \r\n// plugin should overdrive them : call setWrapSelected and etc\r\n// therefore there should new component API methods\r\n// addOptionPick(key) -> call addPick(pick) which returns removePick() \r\n// SetOptionSelectedAspect, OptionToggleAspect should be moved there \r\n// OptionToggleAspect overrided in DisabledOptionPlugin\r\n\r\n// wrap.isOptionSelected ,  wrap.updateSelected\r\nexport function SelectedOptionPlugin(aspects){\r\n    let {configuration, wrapsCollection, \r\n        createWrapAspect, buildChoiceAspect, removePickAspect,\r\n        resetLayoutAspect, picksList, isChoiceSelectableAspect, optionToggleAspect,\r\n        /*inputAspect, filterDom, filterManagerAspect,*/ createPickHandlersAspect, addPickAspect,  fullMatchAspect, \r\n        onChangeAspect, filterPredicateAspect\r\n        } = aspects;\r\n    let {getSelected : getIsOptionSelected, setSelected : setIsOptionSelected, options} = configuration;\r\n    \r\n    if (options) {\r\n        if (!setIsOptionSelected){\r\n            setIsOptionSelected = (option, value) => {option.selected = value};\r\n        }\r\n        if (!getIsOptionSelected)\r\n            getIsOptionSelected = (option) => option.selected;     \r\n    } else { // selectElement\r\n        if (!getIsOptionSelected){\r\n            getIsOptionSelected = (option) => option.selected;\r\n        }\r\n        if (!setIsOptionSelected){\r\n            setIsOptionSelected = (option, value) => {option.selected = value};\r\n            // NOTE: adding this (setAttribute) break Chrome's html form reset functionality:\r\n            // if (value) option.setAttribute('selected','');\r\n            // else option.removeAttribute('selected');\r\n        }\r\n    }\r\n\r\n    let origFilterPredicate = filterPredicateAspect.filterPredicate;\r\n    filterPredicateAspect.filterPredicate = (wrap, text) =>\r\n        !wrap.isOptionSelected  &&  origFilterPredicate(wrap, text)\r\n\r\n\r\n    let  origBuildChoice = buildChoiceAspect.buildChoice;\r\n    buildChoiceAspect.buildChoice= (wrap) => {\r\n        origBuildChoice(wrap);\r\n        wrap.updateSelected = () => {\r\n            wrap.choice.choiceDomManagerHandlers.updateSelected();\r\n            onChangeAspect.onChange();\r\n        }\r\n        wrap.dispose = composeSync( ()=>{wrap.updateSelected = null}, wrap.dispose)\r\n    }\r\n\r\n    // TODO: test this instead of wrap.updateSelected\r\n    // function updateSelected(wrap){\r\n    //     if (wrap.pick){\r\n    //         if (wrap.isOptionSelected)\r\n    //             pickHandlers.producePick();\r\n    //         else {\r\n    //             pickHandlers.removeAndDispose();\r\n    //             pickHandlers.removeAndDispose=null;\r\n    //         }\r\n    //     }\r\n    //     wrap.choice.choiceDomManagerHandlers.updateSelected();\r\n    //     onChangeAspect.onChange();\r\n    // }\r\n\r\n\r\n    function composeUpdateSelected(wrap, booleanValue){\r\n        return () => {\r\n            wrap.isOptionSelected = booleanValue;\r\n            wrap.updateSelected();\r\n        }\r\n    }\r\n\r\n    function trySetWrapSelected(option, updateSelected, booleanValue){ //  wrap.option\r\n        let success = false;\r\n        var confirmed = setIsOptionSelected(option, booleanValue);\r\n        if (!(confirmed===false)) {\r\n            updateSelected();\r\n            success = true;\r\n        }\r\n        return success;\r\n    }\r\n\r\n    let origCreateWrap = createWrapAspect.createWrap;\r\n    createWrapAspect.createWrap = (option)=>{\r\n        let wrap = origCreateWrap(option);\r\n        wrap.isOptionSelected = getIsOptionSelected(option);\r\n        wrap.updateSelected = null; // can it be combined ?\r\n        return wrap;\r\n    }\r\n    \r\n\r\n    let origToggle = optionToggleAspect.toggle; // TODO: improve design, no replace\r\n    optionToggleAspect.toggle= (wrap) => {\r\n        return trySetWrapSelected(wrap.option, composeUpdateSelected(wrap, !wrap.isOptionSelected), !wrap.isOptionSelected)\r\n    }\r\n \r\n    let origFullMatch = fullMatchAspect.fullMatch;\r\n    fullMatchAspect.fullMatch = (wrap) => {\r\n        return trySetWrapSelected(wrap.option, composeUpdateSelected(wrap, true), true);\r\n    }\r\n\r\n    let removePickOrig = removePickAspect.removePick; // TODO: improve design, no replace\r\n    removePickAspect.removePick = (wrap, pick) => { // TODO: try remove pick\r\n        return trySetWrapSelected(wrap.option, composeUpdateSelected(wrap, false), false);\r\n    }\r\n\r\n    \r\n    let origCreatePickHandlers =  createPickHandlersAspect.createPickHandlers;\r\n    createPickHandlersAspect.createPickHandlers = (wrap)=>{\r\n        let pickHandlers = origCreatePickHandlers(wrap);\r\n        wrap.updateSelected = composeSync(\r\n            ()=>{\r\n                if (wrap.isOptionSelected){\r\n                    let pick = pickHandlers.producePick();\r\n                    wrap.pick = pick;\r\n                    pick.dispose = composeSync(pick.dispose, ()=>{wrap.pick=null;});\r\n                }\r\n                else {\r\n                    pickHandlers.removeAndDispose();\r\n                    pickHandlers.removeAndDispose=null;\r\n                }\r\n            },\r\n            wrap.updateSelected\r\n        )\r\n\r\n        addPickAspect.addPick(wrap, pickHandlers); \r\n        return pickHandlers;\r\n    }\r\n\r\n    let origAddPick =  addPickAspect.addPick;\r\n    addPickAspect.addPick = (wrap, pickHandlers) => {\r\n        if (wrap.isOptionSelected){\r\n            let pick = origAddPick(wrap, pickHandlers);\r\n            wrap.pick = pick;\r\n            pick.dispose = composeSync(pick.dispose, ()=>{wrap.pick=null;});\r\n            return pick;\r\n        }\r\n    }\r\n\r\n    return {\r\n        buildApi(api){\r\n            api.selectAll= ()=>{\r\n                resetLayoutAspect.resetLayout(); // always hide 1st\r\n                wrapsCollection.forLoop(\r\n                    wrap => {\r\n                        if (isChoiceSelectableAspect.isSelectable(wrap) &&  !wrap.isOptionSelected)\r\n                            trySetWrapSelected(wrap.option, composeUpdateSelected(wrap, true), true)\r\n                    }\r\n                ); \r\n            }\r\n        \r\n            api.deselectAll= ()=>{\r\n                resetLayoutAspect.resetLayout(); // always hide 1st\r\n                picksList.forEach(pick=>pick.setSelectedFalse())\r\n            }\r\n\r\n            api.setOptionSelected = (key, value) => {\r\n                let wrap = wrapsCollection.get(key);\r\n                return trySetWrapSelected(wrap.option, composeUpdateSelected(wrap, value), value);\r\n            }\r\n\r\n            // used in FormRestoreOnBackwardPlugin\r\n            api.updateOptionsSelected = () => wrapsCollection.forLoop( wrap => updateChoiceSelected(wrap, getIsOptionSelected))\r\n            api.updateOptionSelected = (key) => updateChoiceSelected(wrapsCollection.get(key), getIsOptionSelected)\r\n        }\r\n    }\r\n}\r\n\r\nfunction updateChoiceSelected(wrap, getIsOptionSelected){\r\n    let newIsSelected = getIsOptionSelected(wrap.option);\r\n    if (newIsSelected != wrap.isOptionSelected)\r\n    {\r\n        wrap.isOptionSelected = newIsSelected;\r\n        wrap.updateSelected?.(); // some hidden oesn't have element (and need to be updated)\r\n    }\r\n}","import {composeSync} from '../ToolsJs';\r\n\r\nexport function DisabledOptionPlugin(pluginData){\r\n    let {configuration, isChoiceSelectableAspect, createWrapAspect,  buildChoiceAspect,\r\n        filterPredicateAspect, wrapsCollection, optionToggleAspect, buildPickAspect } = pluginData;\r\n    \r\n    let {getIsOptionDisabled, options} = configuration;\r\n    if (options) {\r\n        if (!getIsOptionDisabled)\r\n            getIsOptionDisabled = (option) => (option.disabled===undefined) ? false : option.disabled;     \r\n    } else { // selectElement\r\n        if (!getIsOptionDisabled)\r\n            getIsOptionDisabled = (option) => option.disabled;     \r\n    }\r\n\r\n    // TODO check this instead of wrap.updateDisabled\r\n    // function updateDisabled(wrap){\r\n    //     wrap?.choice?.choiceDomManagerHandlers?.updateDisabled?.();\r\n    //     wrap?.pick?.pickDomManagerHandlers?.updateDisabled?.();\r\n    // }\r\n\r\n    let origÐ¡reateWrap = createWrapAspect.createWrap;\r\n    createWrapAspect.createWrap = (option) => {\r\n        let wrap = origÐ¡reateWrap(option);\r\n        wrap.isOptionDisabled = getIsOptionDisabled(option); // TODO: remove usage wrap.isOptionDisabled\r\n        wrap.updateDisabled = null; \r\n        return wrap;\r\n    };\r\n\r\n    let origToggle = optionToggleAspect.toggle;\r\n    optionToggleAspect.toggle = (wrap) => {\r\n        let success = false;\r\n        if (wrap.isOptionSelected!==undefined){\r\n            if (wrap.isOptionSelected || !wrap.isOptionDisabled) // TODO: declare dependency on SelectedOptionPlugin\r\n                success = origToggle(wrap);\r\n        }\r\n        else{\r\n            if (!wrap.isOptionDisabled) {\r\n                success = origToggle(wrap);\r\n            }\r\n        }\r\n        return success;\r\n    };\r\n\r\n    let origIsSelectable = isChoiceSelectableAspect.isSelectable\r\n    isChoiceSelectableAspect.isSelectable = (wrap) => {\r\n        return  origIsSelectable(wrap) && !wrap.isOptionDisabled ;\r\n    };\r\n\r\n    let origFilterPredicate = filterPredicateAspect.filterPredicate;\r\n    filterPredicateAspect.filterPredicate = (wrap, text) => {\r\n        return  !wrap.isOptionDisabled && origFilterPredicate(wrap, text) ;\r\n    };\r\n\r\n    let origBuildChoice = buildChoiceAspect.buildChoice;\r\n    buildChoiceAspect.buildChoice = (wrap) => {\r\n        origBuildChoice(wrap);\r\n        wrap.updateDisabled = wrap.choice.choiceDomManagerHandlers.updateDisabled\r\n        wrap.choice.dispose = composeSync(()=>{wrap.updateDisabled=null;}, wrap.choice.dispose);\r\n    }\r\n\r\n    \r\n    let origBuildPick = buildPickAspect.buildPick;\r\n    buildPickAspect.buildPick = (wrap, removeOnButton) => {\r\n        let pick = origBuildPick(wrap, removeOnButton);\r\n        \r\n        pick.updateDisabled = () => pick.pickDomManagerHandlers.updateDisabled();\r\n        pick.dispose = composeSync(pick.dispose, ()=>{pick.updateDisabled=null});\r\n\r\n        let choiceUpdateDisabledBackup = wrap.updateDisabled;\r\n        wrap.updateDisabled = composeSync(choiceUpdateDisabledBackup, pick.updateDisabled); // add pickDisabled\r\n        pick.dispose = composeSync(pick.dispose, \r\n            ()=>{\r\n                wrap.updateDisabled = choiceUpdateDisabledBackup; // remove pickDisabled\r\n                wrap.updateDisabled(); // make \"true disabled\" without it checkbox only looks disabled\r\n            }\r\n        )\r\n        return pick;\r\n    }\r\n\r\n    return {\r\n        buildApi(api){\r\n            api.updateOptionsDisabled = () => wrapsCollection.forLoop( wrap => updateChoiceDisabled(wrap, getIsOptionDisabled))\r\n            api.updateOptionDisabled = (key) => updateChoiceDisabled(wrapsCollection.get(key), getIsOptionDisabled)\r\n        }\r\n    };\r\n}\r\n\r\nfunction updateChoiceDisabled(wrap, getIsOptionDisabled){\r\n    let newIsDisabled = getIsOptionDisabled(wrap.option);\r\n    if (newIsDisabled != wrap.isOptionDisabled)\r\n    {\r\n        wrap.isOptionDisabled= newIsDisabled;\r\n        wrap.updateDisabled?.(); // some hidden oesn't have element (and need to be updated)\r\n    }\r\n}","export function PicksApiPlugin(pluginData){\r\n    let {picksList, createWrapAspect, createPickHandlersAspect, addPickAspect} = pluginData;\r\n    return {\r\n        buildApi(api){\r\n            api.forEachPeak = (f) => \r\n                picksList.forEach(wrap=>f(wrap.option));\r\n            // TODO: getHeadPeak\r\n            api.getTailPeak = () => picksList.getTail()?.option;\r\n            api.countPeaks = () => picksList.getCount();\r\n            api.isEmptyPeaks = () => picksList.isEmpty();\r\n            \r\n            api.addPick = (option) => {\r\n                let wrap = createWrapAspect.createWrap(option);\r\n                // TODO should be moved to specific plugins\r\n                wrap.updateDisabled = ()=>{};\r\n                wrap.updateHidden = ()=>{};\r\n                let pickHandlers = createPickHandlersAspect.createPickHandlers(wrap);\r\n                addPickAspect.addPick(wrap, pickHandlers);\r\n            }\r\n        }\r\n    }\r\n}","import  {EventBinder} from '../ToolsDom';\r\nimport  {addStyling, toggleStyling} from '../ToolsStyling';\r\n\r\nexport function JQueryMethodsPlugin(pluginData){\r\n    let {staticDom, choicesDom, filterDom, picksList} = pluginData;\r\n    return {\r\n        buildApi(api){\r\n            api.getContainer = () =>  staticDom.containerElement;\r\n            api.getChoices = () => choicesDom.choicesElement;\r\n            api.getFilterInput = () => filterDom.filterInputElement;\r\n            api.getPicks = () => picksDom.picksElement;\r\n            \r\n            api.picksCount = () => picksList.getCount();\r\n            //api.staticContent = popupAspect; // depricated, alternative accept to popupAspect.setChoicesVisible\r\n\r\n            pluginData.jQueryMethodsPluginData = {EventBinder, addStyling, toggleStyling}\r\n        }\r\n    }\r\n}","import {LabelPlugin} from './plugins/LabelPlugin'\r\nimport {RtlPlugin} from './plugins/RtlPlugin'\r\nimport {FormResetPlugin} from './plugins/FormResetPlugin'\r\nimport {ValidationApiPlugin} from './plugins/ValidationApiPlugin'\r\nimport {BsAppearancePlugin} from './plugins/BsAppearancePlugin'\r\n\r\nimport {HiddenOptionPlugin} from './plugins/HiddenOptionPlugin'\r\n//import {HiddenOptionPlugin} from './plugins/HiddenOptionAltPlugin'\r\n\r\nimport {CssPatchPlugin} from './plugins/CssPatchPlugin'\r\nimport {PlaceholderPlugin} from './plugins/PlaceholderPlugin'\r\nimport {JQueryMethodsPlugin} from './plugins/JQueryMethodsPlugin'\r\nimport {OptionsApiPlugin} from './plugins/OptionsApiPlugin'\r\nimport {FormRestoreOnBackwardPlugin} from './plugins/FormRestoreOnBackwardPlugin'\r\nimport {SelectElementPlugin} from './plugins/SelectElementPlugin'\r\nimport {SelectedOptionPlugin} from './plugins/SelectedOptionPlugin'\r\nimport {DisabledOptionPlugin} from './plugins/DisabledOptionPlugin'\r\nimport {PicksApiPlugin} from './plugins/PicksApiPlugin'\r\nimport {PicksPlugin} from './plugins/PicksPlugin'\r\n\r\nexport let defaultPlugins = [CssPatchPlugin, SelectElementPlugin, LabelPlugin, HiddenOptionPlugin, ValidationApiPlugin, \r\n    BsAppearancePlugin, FormResetPlugin, RtlPlugin, PlaceholderPlugin , OptionsApiPlugin, \r\n    JQueryMethodsPlugin, SelectedOptionPlugin, FormRestoreOnBackwardPlugin, DisabledOptionPlugin, PicksApiPlugin];\r\n\r\nexport let ajaxPlugins = [CssPatchPlugin, PicksPlugin, LabelPlugin, ValidationApiPlugin, \r\n    BsAppearancePlugin, RtlPlugin, PlaceholderPlugin , OptionsApiPlugin, \r\n    JQueryMethodsPlugin, PicksApiPlugin];","import {closestByClassName} from '../ToolsDom'\r\n\r\nexport function Bs5Plugin(){\r\n}\r\n\r\nBs5Plugin.plugDefaultConfig = (defaults) => {\r\n    defaults.css = css;\r\n    setDefaults(defaults);\r\n}\r\n\r\n\r\nfunction setDefaults(defaults){\r\n    defaults.useCssPatch = true;\r\n    defaults.cssPatch = cssPatch;\r\n    defaults.pickButtonHTML = '<button aria-label=\"Remove\" tabIndex=\"-1\" type=\"button\"></button>'\r\n    defaults.composeGetSize = composeGetSize;\r\n    defaults.getDefaultLabel = getDefaultLabel;\r\n}\r\n\r\nfunction composeGetSize(selectElement){\r\n    let inputGroupElement = closestByClassName(selectElement, 'input-group');\r\n    let getSize = null;\r\n    if (inputGroupElement){\r\n        getSize = function(){\r\n            var value = null;\r\n            if (inputGroupElement.classList.contains('input-group-lg'))\r\n                value = 'lg';\r\n            else if (inputGroupElement.classList.contains('input-group-sm'))\r\n                value = 'sm';\r\n            return value;\r\n        }\r\n    }\r\n    else{ \r\n        getSize = function(){\r\n            var value = null;\r\n            if (selectElement.classList.contains('form-select-lg') || selectElement.classList.contains('form-control-lg')) // changed for BS4\r\n                value = 'lg';\r\n            else if (selectElement.classList.contains('form-select-sm') || selectElement.classList.contains('form-control-sm'))\r\n                value = 'sm'; \r\n            return value;\r\n        }\r\n    }\r\n    return getSize;\r\n}\r\n\r\nfunction getDefaultLabel(selectElement){\r\n    let value = null;\r\n    let query = `label[for=\"${selectElement.id}\"]`;\r\n    let p1 = selectElement.parentElement;\r\n    value = p1.querySelector(query); // label can be wrapped into col-auto\r\n    if (!value){\r\n        let p2 = p1.parentElement;\r\n        value = p2.querySelector(query);\r\n    }\r\n    return value;\r\n}\r\n\r\nconst css = {\r\n    choices: 'dropdown-menu', // bs4, in bsmultiselect.scss as ul.dropdown-menu\r\n    choice_hover:  'hover',  //  not bs4, in scss as 'ul.dropdown-menu li.hover'\r\n    choice_selected: '', \r\n    choice_disabled: '', \r\n\r\n    picks: 'form-control',  // bs4, in scss 'ul.form-control'\r\n    picks_focus: 'focus', // not bs4, in scss 'ul.form-control.focus'\r\n    picks_disabled: 'disabled', //  not bs4, in scss 'ul.form-control.disabled'\r\n    pick_disabled: '',  \r\n    \r\n    pickFilter: '', \r\n    filterInput: '',\r\n\r\n    // used in pickContentGenerator\r\n    pick: 'badge text-dark', // bs4\r\n    pickContent: '',\r\n    pickContent_disabled: 'disabled', // not bs4, in scss 'ul.form-control li span.disabled'\r\n    pickButton: 'btn-close', // bs4\r\n\r\n    // used in choiceContentGenerator\r\n    // choice:  'dropdown-item', // it seems like hover should be managed manually since there should be keyboard support\r\n    choiceCheckBox_disabled: 'disabled', //  not bs4, in scss as 'ul.form-control li .custom-control-input.disabled ~ .custom-control-label'\r\n    choiceContent: 'form-check', // bs4 d-flex required for rtl to align items\r\n    choiceCheckBox: 'form-check-input', // bs4\r\n    choiceLabel: 'form-check-label',\r\n    choiceLabel_disabled: ''  \r\n}\r\n\r\nconst cssPatch = {\r\n    choices: {listStyleType:'none'},\r\n    picks: {listStyleType:'none', display:'flex', flexWrap:'wrap',  height: 'auto', marginBottom: '0'},\r\n    choice: 'px-md-2 px-1',  \r\n    choice_hover: 'text-primary bg-light', \r\n    filterInput: {\r\n        border:'0px', height: 'auto', boxShadow:'none', \r\n        padding:'0', margin:'0', \r\n        outline:'none', backgroundColor:'transparent',\r\n        backgroundImage: 'none' // otherwise BS .was-validated set its image\r\n    },\r\n    filterInput_empty: 'form-control', // need for placeholder, TODO test form-control-plaintext\r\n\r\n    // used in PicksDom\r\n    picks_disabled: {backgroundColor: '#e9ecef'},\r\n\r\n    picks_focus: {borderColor: '#80bdff', boxShadow: '0 0 0 0.2rem rgba(0, 123, 255, 0.25)'},\r\n    picks_focus_valid: {borderColor: '', boxShadow: '0 0 0 0.2rem rgba(40, 167, 69, 0.25)'},\r\n    picks_focus_invalid: {borderColor: '', boxShadow: '0 0 0 0.2rem rgba(220, 53, 69, 0.25)'},\r\n    \r\n    // used in BsAppearancePlugin\r\n    picks_def: {minHeight: 'calc(2.25rem + 2px)'},\r\n    picks_lg:  {minHeight: 'calc(2.875rem + 2px)'},\r\n    picks_sm:  {minHeight: 'calc(1.8125rem + 2px)'},\r\n    \r\n    // used in pickContentGenerator\r\n    pick: {paddingLeft: '0px' },\r\n    pickButton: {fontSize:'0.8em',  float : \"none\", verticalAlign: \"text-top\"},\r\n    pickContent_disabled: {opacity: '.65'}, \r\n    \r\n    // used in choiceContentGenerator\r\n    choiceContent: {justifyContent: 'flex-start'}, // BS problem: without this on inline form menu items justified center\r\n    choiceLabel: {color: 'inherit'}, // otherwise BS .was-validated set its color\r\n    choiceCheckBox: {color: 'inherit'},\r\n    choiceLabel_disabled: {opacity: '.65'},  // more flexible than {color: '#6c757d'}; note: avoid opacity on pickElement's border; TODO write to BS4 \r\n\r\n    //floating plugin\r\n    floating_choices: {minHeight: '58px'},\r\n    floating_choices_empty_unfocus: {paddingTop: '1.625rem', paddingBottom : '.625rem', },\r\n    floating_label_empty_unfocus: {opacity: '.65', transform : 'scale(.85) translateY(-.5rem) translateX(.15rem)'},\r\n}\r\n\r\n","export function HiddenOptionPlugin(pluginData){\r\n    let {configuration, createWrapAspect, isChoiceSelectableAspect,\r\n        wrapsCollection, buildChoiceAspect, buildAndAttachChoiceAspect,\r\n        countableChoicesListInsertAspect, countableChoicesList} = pluginData;\r\n\r\n    countableChoicesListInsertAspect.countableChoicesListInsert = (wrap, key) => {\r\n        if ( !wrap.isOptionHidden ){\r\n            let choiceNext = wrapsCollection.getNext(key, c=>!c.isOptionHidden );\r\n            countableChoicesList.add(wrap, choiceNext)\r\n        }\r\n    }\r\n\r\n    let origBuildAndAttachChoice = buildAndAttachChoiceAspect.buildAndAttachChoice;\r\n    buildAndAttachChoiceAspect.buildAndAttachChoice=(wrap, getNextElement)=>{\r\n        if (wrap.isOptionHidden){ \r\n            buildHiddenChoice(wrap);\r\n        }\r\n        else{ \r\n            origBuildAndAttachChoice(wrap, getNextElement);\r\n        }\r\n    }\r\n\r\n    var origIsSelectable = isChoiceSelectableAspect.isSelectable;\r\n    isChoiceSelectableAspect.isSelectable = (wrap) => origIsSelectable(wrap) && !wrap.isOptionHidden;\r\n\r\n    let {getIsOptionHidden, options} = configuration;\r\n    if (options) {\r\n        if (!getIsOptionHidden)\r\n            getIsOptionHidden = (option) => (option.hidden===undefined)?false:option.hidden;     \r\n    } else {\r\n        if (!getIsOptionHidden)\r\n            getIsOptionHidden = (option) => {\r\n                return option.hidden;     \r\n            } \r\n    }\r\n    \r\n    var origÐ¡reateWrap = createWrapAspect.createWrap;\r\n    createWrapAspect.createWrap = (option) => {\r\n        let wrap = origÐ¡reateWrap(option);\r\n        wrap.isOptionHidden = getIsOptionHidden(option);\r\n        return wrap;\r\n    };\r\n\r\n    return {\r\n        buildApi(api){     \r\n            let getNextNonHidden =  (key) => wrapsCollection.getNext(key, c => !c.isOptionHidden );\r\n\r\n            api.updateOptionsHidden = () => \r\n                wrapsCollection.forLoop( (wrap, key) => \r\n                        updateChoiceHidden(wrap, key, getNextNonHidden, countableChoicesList, getIsOptionHidden, buildChoiceAspect)\r\n                    );\r\n\r\n            api.updateOptionHidden  = (key) => \r\n                updateChoiceHidden(wrapsCollection.get(key), key, getNextNonHidden, countableChoicesList, getIsOptionHidden, buildChoiceAspect);\r\n            // TODO create updateHidden ? \r\n            // it is too complex since we need to find the next non hidden, when this depends on key \r\n            // there should be the backreference \"wrap -> index\" invited before\r\n            // api.updateOptionHidden  = (key) => wrapsCollection.get(key).updateHidden();\r\n        }\r\n    }\r\n}\r\n\r\nfunction buildHiddenChoice(wrap){\r\n    wrap.updateSelected = () => void 0;\r\n    \r\n    wrap.choice.isChoiceElementAttached = false;\r\n    wrap.choice.choiceElement = null;\r\n    wrap.choice.choiceElementAttach = null;\r\n    wrap.choice.setVisible = null; \r\n    wrap.choice.setHoverIn = null;\r\n    wrap.choice.remove = null; \r\n    \r\n    wrap.choice.dispose = () => { \r\n        wrap.choice.dispose = null;\r\n    };\r\n\r\n    wrap.dispose = () => { \r\n        wrap.choice.dispose();\r\n        wrap.dispose = null;\r\n    };\r\n\r\n}\r\n\r\nfunction updateChoiceHidden(wrap, key, getNextNonHidden, countableChoicesList, getIsOptionHidden, buildChoiceAspect){\r\n    let newIsOptionHidden = getIsOptionHidden(wrap.option);\r\n    if (newIsOptionHidden != wrap.isOptionHidden)\r\n    {\r\n        wrap.isOptionHidden= newIsOptionHidden;\r\n        if (wrap.isOptionHidden) {\r\n\r\n            countableChoicesList.remove(wrap);\r\n            wrap.choice.remove(); \r\n            buildHiddenChoice(wrap);\r\n        } else {\r\n            let nextChoice = getNextNonHidden(key);\r\n            countableChoicesList.add(wrap, nextChoice);\r\n            buildChoiceAspect.buildChoice(wrap);\r\n            wrap.choice.choiceElementAttach(nextChoice?.choice.choiceElement);\r\n        }\r\n    }\r\n}\r\n","import {composeSync} from '../ToolsJs';\r\nimport {getDataGuardedWithPrefix} from '../ToolsDom';\r\nimport {toggleStyling} from '../ToolsStyling';\r\n\r\nexport function PlaceholderPlugin(pluginData){\r\n    let {configuration, staticManager, picksList, picksDom, filterDom, staticDom, updateDataAspect,\r\n        resetFilterListAspect, filterManagerAspect} = pluginData;\r\n    let {placeholder,  css} = configuration;\r\n    let {picksElement} = picksDom;\r\n    let filterInputElement = filterDom.filterInputElement;\r\n    if (!placeholder){\r\n        placeholder = getDataGuardedWithPrefix(staticDom.initialElement,\"bsmultiselect\",\"placeholder\");\r\n    }\r\n\r\n    function setEmptyInputWidth(isVisible){\r\n        if(isVisible)\r\n            filterInputElement.style.width ='100%';\r\n        else\r\n            filterInputElement.style.width ='2ch';\r\n    }\r\n    var emptyToggleStyling = toggleStyling(filterInputElement, css.filterInput_empty);\r\n    function showPlacehodler(isVisible){\r\n        if (isVisible)\r\n        {\r\n            filterInputElement.placeholder = placeholder?placeholder:'';\r\n            picksElement.style.display = 'block';\r\n        }\r\n        else\r\n        {\r\n            filterInputElement.placeholder = '';\r\n            picksElement.style.display = 'flex';\r\n        }\r\n        emptyToggleStyling(isVisible);\r\n        setEmptyInputWidth(isVisible);\r\n    }\r\n    showPlacehodler(true);\r\n   \r\n    function setDisabled(isComponentDisabled){ \r\n        filterInputElement.disabled = isComponentDisabled;\r\n    };\r\n    let isEmpty = () => picksList.isEmpty() && filterDom.isEmpty()\r\n\r\n    function updatePlacehodlerVisibility(){\r\n        showPlacehodler(isEmpty());\r\n    };\r\n    function updateEmptyInputWidth(){\r\n        setEmptyInputWidth(isEmpty())\r\n    };\r\n            \r\n    let origDisable = picksDom.disable;\r\n    picksDom.disable = (isComponentDisabled)=>{\r\n        setDisabled(isComponentDisabled);\r\n        origDisable(isComponentDisabled);\r\n    };\r\n\r\n    staticManager.appendToContainer = composeSync(staticManager.appendToContainer, updateEmptyInputWidth);\r\n\r\n    filterManagerAspect.processEmptyInput = composeSync(updateEmptyInputWidth, filterManagerAspect.processEmptyInput);\r\n    resetFilterListAspect.forceResetFilter = composeSync(resetFilterListAspect.forceResetFilter, updatePlacehodlerVisibility);\r\n            \r\n    let origAdd = picksList.add;\r\n    picksList.add = (pick) => { \r\n        let returnValue = origAdd(pick);\r\n        if (picksList.getCount()==1) \r\n            updatePlacehodlerVisibility()\r\n        /*wrap.*/pick.dispose = composeSync(/*wrap.*/pick.dispose, ()=>\r\n            { \r\n                if (picksList.getCount()==0) \r\n                    updatePlacehodlerVisibility()\r\n            })\r\n        return returnValue;\r\n    };\r\n\r\n    updateDataAspect.updateData = composeSync(updateDataAspect.updateData, updatePlacehodlerVisibility);\r\n    \r\n}","import {createCss, extendCss} from '../ToolsStyling';\r\nimport {isBoolean} from '../ToolsJs';\r\n\r\nexport function CssPatchPlugin(){\r\n}\r\n\r\nCssPatchPlugin.plugMergeSettings = (configuration, defaults, settings) => {\r\n    let cssPatch = settings?.cssPatch;\r\n    if (isBoolean(cssPatch))\r\n        throw new Error(\"BsMultiSelect: 'cssPatch' was used instead of 'useCssPatch'\") // often type of error\r\n    configuration.cssPatch = createCss(defaults.cssPatch, cssPatch); // replace classes, merge styles\r\n}\r\n\r\nCssPatchPlugin.plugStaticDom = (configurationPluginData) => {\r\n    let {configuration} = configurationPluginData;\r\n    if (configuration.useCssPatch)\r\n        extendCss(configuration.css, configuration.cssPatch); \r\n}","import {shallowClearClone, isString} from './ToolsJs';\r\n\r\nexport function addStyling(element, styling){\r\n    var backupStyling = {classes:[], styles:{}}\r\n    if (styling) {\r\n        var {classes, styles} = styling;\r\n        classes.forEach(e => element.classList.add(e)) // todo use add(classes)\r\n        backupStyling.classes = classes.slice();\r\n        for (let property in styles){\r\n            backupStyling.styles[property] = element.style[property];\r\n            element.style[property] = styles[property]; // todo use Object.assign (need polyfill for IE11)\r\n        }\r\n    }\r\n    return backupStyling;\r\n}\r\n\r\nfunction removeStyling(element, styling){\r\n    if (styling) {\r\n        var {classes, styles} = styling;\r\n        classes.forEach(e=>element.classList.remove(e)) // todo use remove(classes)\r\n        for (let property in styles)\r\n            element.style[property]  = styles[property]; // todo use Object.assign (need polyfill for IE11)\r\n    }\r\n}\r\n\r\nexport function toggleStyling(element, styling){\r\n    var backupStyling = {classes:[], styles:{}};\r\n    var isOn=false;\r\n    return (value)=>{\r\n        if (value) {\r\n            if (isOn===false){\r\n                backupStyling = addStyling(element, styling)\r\n                isOn=true;\r\n            }\r\n        } else {\r\n            if (isOn===true){\r\n                removeStyling(element, backupStyling);\r\n                isOn=false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction extendClasses(out, param, actionStr, actionArr, isRemoveEmptyClasses){\r\n    if (isString(param)){\r\n        if (param === \"\"){\r\n            if (isRemoveEmptyClasses){\r\n                out.classes = [];\r\n            }\r\n        } else {\r\n            let c = param.split(' ');\r\n            out.classes = actionStr(c);\r\n        }\r\n        return true;\r\n    } else if (param instanceof Array){\r\n        if (param.length==0){\r\n            if (isRemoveEmptyClasses){\r\n                out.classes = [];\r\n            }\r\n        }\r\n        else{\r\n            out.classes = actionArr(param);\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction extend(value, param, actionStr, actionArr, actionObj, isRemoveEmptyClasses){\r\n    var success = extendClasses(value, param, actionStr, actionArr, isRemoveEmptyClasses);\r\n    if (success === false){\r\n        if (param instanceof Object){\r\n            var {classes, styles} = param;\r\n            extendClasses(value, classes, actionStr, actionArr, isRemoveEmptyClasses);\r\n            \r\n            if (styles) {\r\n                value.styles = actionObj(styles);\r\n            } else if (!classes) {\r\n                value.styles = actionObj(param)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function Styling(param){\r\n    var value = {classes:[], styles:{}};\r\n    if (param){\r\n        extend(value, param, a=>a, a=>a.slice(), o=>shallowClearClone(o), true);\r\n    }\r\n    return Object.freeze(value);\r\n}\r\n\r\nfunction createStyling(isReplace, param, ...params){\r\n    var value = {classes:[], styles:{}};\r\n    if (param){\r\n        extend(value, param, a=>a, a=>a.slice(), o=>shallowClearClone(o),true);\r\n        if (params){\r\n            var {classes, styles} = value;\r\n            var extendInt = isReplace? (p)=>extend(value, p, s=>s, a=>a.slice(), o=> shallowClearClone(styles, o),true):\r\n                (p)=>extend(value, p, a=>classes.concat(a), a=>classes.concat(a), o=>shallowClearClone(styles, o),false)\r\n            params.forEach(p=> extendInt(p));\r\n        }\r\n    }\r\n    return Styling(value);\r\n}\r\n\r\nexport function createCss(stylings1, stylings2){\r\n    var destination = {};\r\n    for (let property in stylings1) {\r\n        let param1 = stylings1[property];\r\n\r\n        let param2 = stylings2?stylings2[property]:undefined;\r\n        if (param2===undefined)\r\n            destination[property] = Styling(param1)\r\n        else{\r\n            destination[property] = createStyling(true, param1, param2); \r\n        }\r\n    }\r\n    if (stylings2)\r\n        for (let property in stylings2) {\r\n            if (!stylings1[property])\r\n                destination[property] = Styling(stylings2[property])\r\n        }\r\n    return destination;\r\n}\r\n\r\nexport function extendCss(stylings1, stylings2){\r\n    for (let property in stylings2) {\r\n        let param2 = stylings2[property];\r\n        let param1 = stylings1[property];\r\n        if (param1 === undefined)\r\n            stylings1[property] = Styling(param2)\r\n        else{\r\n            stylings1[property] = createStyling(false, param1, param2); \r\n        }\r\n    }\r\n}","import {ValidityApi} from '../ValidityApi'\r\nimport {ObservableValue, ObservableLambda, defCall, isBoolean, composeSync} from '../ToolsJs';\r\nimport {getDataGuardedWithPrefix} from '../ToolsDom';\r\n\r\nconst defValueMissingMessage = 'Please select an item in the list'\r\n\r\nexport function ValidationApiPlugin(pluginData){\r\n    var {configuration, triggerAspect, onChangeAspect, optionsAspect, \r\n        selectElementPluginData, staticDom, filterDom, updateDataAspect} = pluginData;\r\n    // TODO: required could be a function\r\n    let {getIsValueMissing, valueMissingMessage, required} = configuration;\r\n    if (!isBoolean(required))\r\n        required = selectElementPluginData?.required; \r\n    else if (!isBoolean(required))\r\n        required = false;\r\n    valueMissingMessage = defCall(valueMissingMessage,\r\n        ()=> getDataGuardedWithPrefix(staticDom.initialElement,\"bsmultiselect\",\"value-missing-message\"),\r\n        defValueMissingMessage)\r\n\r\n    if (!getIsValueMissing) {\r\n        getIsValueMissing = () => {\r\n            let count = 0;\r\n            let optionsArray = optionsAspect.getOptions();\r\n            for (var i=0; i < optionsArray.length; i++) {\r\n                if (optionsArray[i].selected) \r\n                    count++;\r\n            }\r\n            return count===0;\r\n        }\r\n    }\r\n    \r\n    var isValueMissingObservable = ObservableLambda(()=>required && getIsValueMissing());\r\n    var validationApiObservable  = ObservableValue(!isValueMissingObservable.getValue());\r\n\r\n    onChangeAspect.onChange = composeSync(isValueMissingObservable.call, onChangeAspect.onChange);\r\n    updateDataAspect.updateData = composeSync(isValueMissingObservable.call, updateDataAspect.updateData);\r\n    pluginData.validationApiPluginData = {validationApiObservable};\r\n\r\n    var validationApi = ValidityApi(\r\n        filterDom.filterInputElement, \r\n        isValueMissingObservable, \r\n        valueMissingMessage,\r\n        (isValid)=>validationApiObservable.setValue(isValid),\r\n        triggerAspect.trigger\r\n        );\r\n\r\n    return {\r\n        buildApi(api){\r\n            api.validationApi = validationApi;\r\n        },\r\n        dispose(){\r\n            isValueMissingObservable.detachAll(); \r\n            validationApiObservable.detachAll();\r\n        }\r\n    }\r\n}\r\n\r\nValidationApiPlugin.plugDefaultConfig = (defaults)=>{\r\n    defaults.valueMissingMessage = '';\r\n}","export function FormRestoreOnBackwardPlugin(pluginData){\r\n    let {staticDom, environment, loadAspect, configuration} = pluginData;\r\n    let window = environment.window;\r\n    return {\r\n        buildApi(api){\r\n            if (!api.updateOptionsSelected){\r\n                if (options && configuration.setSelected)\r\n                    throw new Error(\"BsMultisilect: FormRestoreOnBackwardPlugin requires SelectedOptionPlugin defined first\");\r\n            }\r\n            else{\r\n                let origLoad = loadAspect.load;\r\n                loadAspect.load = ()=>{\r\n                    origLoad();\r\n                    // support browser's \"step backward\" and form's values restore\r\n                    if (staticDom.selectElement && window.document.readyState !=\"complete\"){\r\n                        window.setTimeout(function(){api.updateOptionsSelected()});\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","export function PluginManager(plugins, pluginData){\r\n    let instances = [];\r\n    if (plugins){\r\n        for(let i = 0; i<plugins.length; i++){\r\n            let instance = plugins[i](pluginData)\r\n            if (instance)\r\n                instances.push(instance);\r\n        }\r\n    }\r\n    \r\n    let disposes = [];\r\n    return {\r\n        buildApi(api){\r\n            for(let i = 0; i<instances.length; i++){\r\n                let dispose = instances[i].buildApi?.(api)\r\n                if (dispose)\r\n                    disposes.push(dispose);\r\n            }\r\n        },\r\n        dispose(){\r\n            for(let i = 0; i<disposes.length; i++){\r\n                disposes[i]()\r\n            }\r\n            disposes=null;\r\n            for(let i = 0; i<instances.length; i++){\r\n                instances[i].dispose?.()\r\n            }\r\n            instances=null;\r\n        }\r\n    }\r\n}\r\n\r\nexport function plugDefaultConfig(constructors, defaults){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].plugDefaultConfig?.(defaults)\r\n    }\r\n}\r\n\r\nexport function plugMergeSettings(constructors, configuration, defaults, settings){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].plugMergeSettings?.(configuration, defaults, settings)\r\n    }\r\n}\r\n\r\nexport function plugStaticDom(constructors, aspects){\r\n    for(let i = 0; i<constructors.length; i++){\r\n        constructors[i].plugStaticDom?.(aspects)\r\n    }\r\n}","import  {EventBinder} from './ToolsDom';\r\nimport  {addStyling, toggleStyling} from './ToolsStyling';\r\n\r\nexport function PickDomFactory(css, componentPropertiesAspect, optionPropertiesAspect, pickButtonAspect){\r\n    return { \r\n        create(pickElement, wrap, remove){\r\n            let eventBinder = EventBinder();\r\n            let buttonHTML = pickButtonAspect.getButtonHTML();\r\n            pickElement.innerHTML = '<span></span>'+buttonHTML;\r\n            let pickContentElement = pickElement.querySelector('SPAN');\r\n            let pickButtonElement  = pickElement.querySelector('BUTTON');\r\n            eventBinder.bind(pickButtonElement, \"click\", remove);\r\n            // TODO: explicit conditional styling \r\n            return {\r\n                pickDom:{\r\n                    pickContentElement,\r\n                    pickButtonElement,\r\n                },\r\n                pickDomManager:{\r\n                    init(){\r\n                        addStyling(pickContentElement, css.pickContent);\r\n                        addStyling(pickButtonElement, css.pickButton);\r\n                        let disableToggle = toggleStyling(pickContentElement, css.pickContent_disabled);\r\n\r\n                        function updateData(){\r\n                            pickContentElement.textContent = optionPropertiesAspect.getText(wrap.option); \r\n                        }\r\n                        function updateDisabled(){\r\n                            disableToggle(wrap.isOptionDisabled)\r\n                        }\r\n                        function updateRemoveDisabled(){\r\n                            pickButtonElement.disabled = componentPropertiesAspect.getDisabled();\r\n                        }\r\n                        updateData();\r\n                        updateDisabled()\r\n                        updateRemoveDisabled();\r\n\r\n                        return {\r\n                            updateData,\r\n                            updateDisabled,\r\n                            updateRemoveDisabled,\r\n                        }\r\n                    },\r\n                    dispose(){\r\n                        eventBinder.unbind();\r\n                    },\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import  {EventBinder} from './ToolsDom';\r\nimport  {addStyling, toggleStyling} from './ToolsStyling';\r\n\r\nexport function ChoiceDomFactory(css, optionPropertiesAspect){\r\n    return {\r\n        create(choiceElement, wrap, toggle){\r\n            choiceElement.innerHTML = '<div><input formnovalidate type=\"checkbox\"><label></label></div>';\r\n            let choiceContentElement = choiceElement.querySelector('DIV');\r\n            let choiceCheckBoxElement = choiceContentElement.querySelector('INPUT');\r\n            let choiceLabelElement = choiceContentElement.querySelector('LABEL');\r\n            let eventBinder = EventBinder();\r\n            eventBinder.bind(choiceElement, \"click\",  toggle);\r\n            // TODO: explicit conditional styling \r\n            return {\r\n                choiceDom:{\r\n                    choiceContentElement,\r\n                    choiceCheckBoxElement,\r\n                    choiceLabelElement\r\n                },\r\n                choiceDomManager:{\r\n                    init(){\r\n                        addStyling(choiceContentElement, css.choiceContent); \r\n                        addStyling(choiceCheckBoxElement, css.choiceCheckBox); \r\n                        addStyling(choiceLabelElement, css.choiceLabel); \r\n            \r\n                        let choiceSelectedToggle = toggleStyling(choiceElement, css.choice_selected);\r\n                        let choiceDisabledToggle = toggleStyling(choiceElement, css.choice_disabled);\r\n                        let choiceHoverToggle = toggleStyling(choiceElement, css.choice_hover);\r\n             \r\n                        let choiceCheckBoxDisabledToggle = toggleStyling(choiceCheckBoxElement, css.choiceCheckBox_disabled)\r\n                        let choiceLabelDisabledToggle = toggleStyling(choiceLabelElement, css.choiceLabel_disabled)\r\n            \r\n                        function updateData() {\r\n                            choiceLabelElement.textContent = optionPropertiesAspect.getText(wrap.option);\r\n                        }\r\n                        function updateSelected(){ \r\n                            choiceSelectedToggle(wrap.isOptionSelected);\r\n                            choiceCheckBoxElement.checked = wrap.isOptionSelected;\r\n                        }\r\n                        function updateDisabled(){\r\n                            choiceDisabledToggle(wrap.isOptionDisabled)\r\n                            choiceCheckBoxDisabledToggle(wrap.isOptionDisabled)\r\n                            choiceLabelDisabledToggle(wrap.isOptionDisabled)\r\n            \r\n                            // do not desable checkBox if option is selected! there should be possibility to unselect \"disabled\"\r\n                            choiceCheckBoxElement.disabled = wrap.isOptionDisabled && !wrap.isOptionSelected;\r\n                        }\r\n                        updateData();\r\n                        updateSelected();\r\n                        updateDisabled();\r\n\r\n                        return{\r\n                            updateData,\r\n                            updateSelected, \r\n                            updateDisabled,\r\n                            updateHoverIn(){\r\n                                choiceHoverToggle(wrap.choice.isHoverIn);\r\n                            },\r\n                        }\r\n                    },\r\n                    dispose(){\r\n                        eventBinder.unbind();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n","import {findDirectChildByTagName, closestByClassName} from './ToolsDom';\r\n\r\nexport function CreateElementAspect(createElement){\r\n    return {\r\n        createElement\r\n    }\r\n}\r\n\r\nexport function StaticDomFactory(choicesDomFactory, createElementAspect){\r\n    return {\r\n        create(css){\r\n            let choicesDom = choicesDomFactory.create(css);\r\n            return {\r\n                choicesDom,\r\n                createStaticDom(element, containerClass){\r\n                    function showError(message){\r\n                        element.style.backgroundColor = 'red';\r\n                        element.style.color = 'white';\r\n                        throw new Error(message);\r\n                    }\r\n                   \r\n                    let containerElement, picksElement;\r\n                    let removableContainerClass= false;\r\n                    if (element.tagName == 'DIV') {\r\n                        containerElement = element;\r\n                        if (!containerElement.classList.contains(containerClass)){\r\n                            containerElement.classList.add(containerClass);\r\n                            removableContainerClass = true;\r\n                        }\r\n                        picksElement = findDirectChildByTagName(containerElement, 'UL');\r\n                    }\r\n                    else if (element.tagName == 'UL') {\r\n                        picksElement = element;\r\n                        containerElement = closestByClassName(element, containerClass);\r\n                        if (!containerElement){\r\n                            showError('BsMultiSelect: defined on UL but precedentant DIV for container not found; class='+containerClass);\r\n                        }\r\n                    } \r\n                    else if (element.tagName==\"INPUT\"){\r\n                        showError('BsMultiSelect: INPUT element is not supported');\r\n                    }\r\n                    let disposablePicksElement=false;\r\n                    if (!picksElement) {\r\n                        picksElement = createElementAspect.createElement('UL');\r\n                        disposablePicksElement = true; \r\n                    }\r\n                \r\n                    return {\r\n                        choicesDom,\r\n                        staticDom: {\r\n                            initialElement:element,\r\n                            containerElement,\r\n                            picksElement,\r\n                            disposablePicksElement\r\n                        },\r\n                        staticManager: {\r\n                            appendToContainer(){ \r\n                                containerElement.appendChild(choicesDom.choicesElement); \r\n                                if (disposablePicksElement)\r\n                                    containerElement.appendChild(picksElement)\r\n                            },\r\n                            dispose(){ \r\n                                containerElement.removeChild(choicesDom.choicesElement); \r\n                                if (removableContainerClass)\r\n                                    containerElement.classList.remove(containerClass);\r\n                                if (disposablePicksElement)\r\n                                    containerElement.removeChild(picksElement)\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import {addStyling, toggleStyling} from './ToolsStyling';\r\n\r\nexport function PicksDom(picksElement, disposablePicksElement, createElementAspect, css){\r\n    var pickFilterElement  = createElementAspect.createElement('LI');\r\n    \r\n    addStyling(picksElement,       css.picks);\r\n    addStyling(pickFilterElement,  css.pickFilter);\r\n\r\n    let disableToggleStyling = toggleStyling(picksElement, css.picks_disabled);\r\n    let focusToggleStyling   = toggleStyling(picksElement, css.picks_focus);\r\n    let isFocusIn = false;\r\n\r\n    return {\r\n        picksElement,\r\n        pickFilterElement,\r\n\r\n        createPickElement(){\r\n            var pickElement = createElementAspect.createElement('LI');\r\n            addStyling(pickElement, css.pick);\r\n            return {\r\n                pickElement, \r\n                attach: (beforeElement) => picksElement.insertBefore(pickElement, beforeElement??pickFilterElement),\r\n                detach: () => picksElement.removeChild(pickElement)\r\n            };\r\n        },\r\n        disable(isComponentDisabled){\r\n            disableToggleStyling(isComponentDisabled)\r\n        },\r\n        toggleFocusStyling(){\r\n            focusToggleStyling(isFocusIn)\r\n        },\r\n        getIsFocusIn(){\r\n            return isFocusIn;\r\n        },\r\n        setIsFocusIn(newIsFocusIn){\r\n            isFocusIn = newIsFocusIn\r\n        }, \r\n        \r\n        dispose(){\r\n            if (!disposablePicksElement){\r\n                disableToggleStyling(false)\r\n                focusToggleStyling(false)\r\n                \r\n                if (pickFilterElement.parentNode)\r\n                    pickFilterElement.parentNode.removeChild(pickFilterElement)\r\n            }\r\n        }\r\n    }\r\n}\r\n","import {addStyling} from './ToolsStyling';\r\nimport {EventBinder} from './ToolsDom';\r\n\r\nexport function FilterDom(disposablePicksElement, createElementAspect, css){\r\n    var filterInputElement = createElementAspect.createElement('INPUT');\r\n    addStyling(filterInputElement, css.filterInput);\r\n\r\n    filterInputElement.setAttribute(\"type\",\"search\");\r\n    filterInputElement.setAttribute(\"autocomplete\",\"off\");\r\n    var eventBinder = EventBinder();\r\n    return {\r\n        filterInputElement,\r\n        isEmpty: () => filterInputElement.value ? false:true,\r\n        setEmpty(){\r\n            filterInputElement.value ='';\r\n        },\r\n        getValue(){\r\n            return filterInputElement.value;\r\n        },\r\n        setFocus(){\r\n            filterInputElement.focus();\r\n        },\r\n        setWidth(text){\r\n            filterInputElement.style.width = text.length*1.3 + 2 + \"ch\"\r\n        },\r\n        // TODO: check why I need this comparision? \r\n        setFocusIfNotTarget(target){\r\n            if (target != filterInputElement)\r\n                filterInputElement.focus();\r\n        },\r\n        onInput(onFilterInputInput){\r\n            eventBinder.bind(filterInputElement,'input',    onFilterInputInput);\r\n        },\r\n        onFocusIn(onFocusIn){\r\n            eventBinder.bind(filterInputElement,'focusin',  onFocusIn);\r\n        },\r\n        onFocusOut(onFocusOut){\r\n            eventBinder.bind(filterInputElement,'focusout', onFocusOut);\r\n        },\r\n        onKeyDown(onfilterInputKeyDown){\r\n            eventBinder.bind(filterInputElement,'keydown',  onfilterInputKeyDown);    \r\n        },\r\n        onKeyUp(onFilterInputKeyUp){\r\n            eventBinder.bind(filterInputElement,'keyup',    onFilterInputKeyUp);\r\n        },\r\n        dispose(){\r\n            eventBinder.unbind();\r\n            if (!disposablePicksElement){\r\n                if (filterInputElement.parentNode)\r\n                    filterInputElement.parentNode.removeChild(filterInputElement)\r\n            }\r\n        }\r\n    }\r\n}\r\n","import {addStyling} from './ToolsStyling';\r\n\r\nexport function ChoicesDomFactory(createElementAspect) {\r\n    return {\r\n        create(css){\r\n            var choicesElement = createElementAspect.createElement('UL'); \r\n            choicesElement.style.display = 'none';\r\n            addStyling(choicesElement, css.choices);\r\n            return {\r\n                choicesElement,\r\n                createChoiceElement() {\r\n                    var choiceElement = createElementAspect.createElement('LI');\r\n                    addStyling(choiceElement, css.choice);\r\n                    return {\r\n                        choiceElement, \r\n                        setVisible: (isVisible) => choiceElement.style.display = isVisible ? 'block': 'none',\r\n                        attach: (beforeElement) => choicesElement.insertBefore(choiceElement, beforeElement),\r\n                        detach: () => choicesElement.removeChild(choiceElement)\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","export function TriggerAspect(element, trigger) {\r\n    return {\r\n        trigger: (eventName) => trigger(element, eventName)\r\n    }\r\n}\r\n\r\nexport function OnChangeAspect(triggerAspect, name) {\r\n    return {\r\n        onChange(){\r\n            triggerAspect.trigger(name)\r\n        }\r\n    }\r\n}\r\n\r\nexport function ComponentPropertiesAspect(getDisabled) {\r\n    return {\r\n        getDisabled\r\n    }\r\n}\r\n\r\n","export function addToJQueryPrototype(pluginName, createPlugin, $){\r\n    const firstChar = pluginName.charAt(0);\r\n    const firstCharLower = firstChar.toLowerCase();\r\n    if (firstCharLower == firstChar) {\r\n        throw new Error(`Plugin name '${pluginName}' should be started from upper case char`)\r\n    }\r\n    const prototypableName = firstCharLower + pluginName.slice(1)\r\n    const noConflictPrototypable = $.fn[prototypableName];\r\n    const noConflictPrototypableForInstance = $.fn[pluginName];\r\n    const dataKey = `DashboardCode.${pluginName}`;\r\n\r\n    function createInstance(options, e, $e){\r\n        const optionsRef = (typeof options === 'object') || options instanceof Function ? options:null;\r\n        let instance = createPlugin(e, optionsRef,\r\n            () => {\r\n                $e.removeData(dataKey)\r\n            });\r\n        $e.data(dataKey, instance);\r\n        return instance;\r\n    }\r\n\r\n    function prototypable(options){\r\n        let output=[];\r\n        this.each( function (i, e) {\r\n            let $e = $(e);\r\n            let instance = $e.data(dataKey)\r\n            let isMethodName = typeof options === 'string';\r\n            if (!instance) {\r\n                if (isMethodName && /Dispose/.test(options)) \r\n                    return;\r\n                instance = createInstance(options, e, $e);\r\n            }\r\n            if (isMethodName) {\r\n                let methodName = options;\r\n                if (typeof instance[methodName] === 'undefined') {\r\n                    let lMethodName = methodName.charAt(0).toLowerCase() + methodName.slice(1)\r\n                    if ( typeof instance[lMethodName] === 'undefined') {\r\n                        throw new Error(`No method named '${methodName}'`)\r\n                    } else {\r\n                        methodName = lMethodName;\r\n                    }\r\n                }\r\n                let result = instance[methodName]();\r\n                if (result !== undefined){\r\n                    output.push(result);\r\n                }\r\n            }\r\n        })\r\n        if (output.length==0)\r\n            return this;\r\n        else if (output.length==1)\r\n            return output[0];\r\n        else\r\n            return output;\r\n    }\r\n\r\n    function prototypableForInstance(options){\r\n        let instance = this.data(dataKey);\r\n        if (instance)\r\n            return instance;\r\n        else if (this.length === 1){\r\n            return createInstance(options, this.get(0), this);\r\n        } else if (this.length > 1){\r\n            let output=[];\r\n            this.each(function(i, e){\r\n                output.push(createInstance(options, e, $(e)));\r\n            })\r\n            return output;\r\n        }\r\n    }\r\n    \r\n    $.fn[prototypableName] = prototypable;\r\n    $.fn[prototypableName].noConflict = function () {\r\n        $.fn[prototypableName] = noConflictPrototypable\r\n        return prototypable;\r\n    }\r\n\r\n    $.fn[pluginName] = prototypableForInstance;\r\n    $.fn[pluginName].noConflict = function () {\r\n        $.fn[pluginName] = noConflictPrototypableForInstance\r\n        return prototypableForInstance;\r\n    }\r\n\r\n    return prototypable;\r\n}","export function PopupAspect(choicesElement, filterInputElement, createPopper) { \r\n    let popper = null;\r\n    let popperConfiguration = {\r\n        placement: 'bottom-start',\r\n        modifiers: {\r\n            preventOverflow: {enabled:true},\r\n            hide: {enabled:false},\r\n            flip: {enabled:false}\r\n        }\r\n    };\r\n    return {\r\n        init(){ \r\n            if (!!createPopper.prototype && !!createPopper.prototype.constructor.name) { // it is a constructor\r\n                popper = new createPopper(filterInputElement, choicesElement, popperConfiguration); \r\n            }else{\r\n                popper = createPopper(filterInputElement, choicesElement, popperConfiguration); \r\n                //throw new Error(\"BsMultiSelect: popper paramater is not a constructor\")\r\n            }\r\n        },        \r\n        isChoicesVisible(){ return choicesElement.style.display != 'none'},\r\n        setChoicesVisible(visible){\r\n            choicesElement.style.display = visible ? 'block' : 'none';\r\n        },\r\n        popperConfiguration,\r\n        updatePopupLocation(){\r\n            popper.update();  // become async in poppoer 2; use forceUpdate if sync is needed? \r\n        },\r\n        dispose(){\r\n            popper.destroy();\r\n        }\r\n    }\r\n}"]}